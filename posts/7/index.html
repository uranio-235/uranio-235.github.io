
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>El SysAdmin del 3er Mundo</title>
  <meta name="author" content="låzaro">

  
  <meta name="description" content="Parece que ahora se ha vuelto una costumbre meterle las manos al parque informático del Calixto
García. Por lo que dicen los jefes, la cosa está que &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://uranio-235.github.io/posts/7/">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/atom.xml" rel="alternate" title="El SysAdmin del 3er Mundo" type="application/atom+xml">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="/javascripts/libs/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="//fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="//fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  

</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/">El SysAdmin del 3er Mundo</a></h1>
  
    <h2>servidores con linux & ruby on rails en Cuba</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="http://www.google.com.cu" method="get">
  <fieldset role="search">
    <input type="hidden" name="sitesearch" value="uranio-235.github.io">
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/blog/archives">Archivo</a></li>
  <li><a href="/blog/categories/rails/">Ruby on Rails</a></li>
  <li><a href="/blog/categories/destacado/">Destacado</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div class="blog-index">
  
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2014/08/11/ocs-inventory/">ocs-inventory</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2014-08-11T11:06:28-04:00'><span class='date'><span class='date-month'>Aug</span> <span class='date-day'>11</span><span class='date-suffix'>th</span>, <span class='date-year'>2014</span></span> <span class='time'>11:06 am</span></time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Parece que ahora se ha vuelto una costumbre <a href="http://es.wikipedia.org/wiki/Hurto">meterle las manos</a> al parque informático del Calixto
García. Por lo que dicen los jefes, la cosa está que llueve sobre lo mojado. Yo
desde que llegué, estoy con la cháchara de implementar OCS inventory para
controlar el parque informático, pero me dan por loco. Una buena razón para
darle de lado al asunto, es el echo de que más del 50% de las máquinas, carecen
de red.</p>

<p>Pero OCS inventory tiene una solución, existe un modo offline para situaciones
como esta, <a href="http://wiki.ocsinventory-ng.org/index.php/Howtos:OCS_Inventory_Mass_Import_from_local">véalo en este link</a></p>

<p><img src="/images/ocsinventory.png"></p>

<p>En windows corre el instalador en modo inventario local. Al llevar a cabo la
instalación, parecerá no haber sucedido nada. Se creará el archivo con el
inventario en el la raíz del disco &ldquo;C:&rdquo; cuya extensión será &ldquo;.ocs&rdquo; y su nombre
se deriva del nombre de la máquina.</p>

<p>FELICIDADES! Ya casi terminó el inventario local. Copia el fichero para tu
memoria y llévalo pal servidor.</p>

<p>En linux, hay una herramienta que colegia los ficheros .ocs con el sistema
principal.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>ln -s /usr/share/ocsinventory-server/binutils/ocsinventory-injector.pl /usr/local/bin/
</span></code></pre></td></tr></table></div></figure>


<p>Ahora que la tenemos cerca:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>ocsinventory-injector.pl -f /ruta/al/fichero.ocs
</span></code></pre></td></tr></table></div></figure>


<p>Con eso colegiamos lo cambio en el servidor y VUALÁ! La máquina offline va para
el servidor de OCS.</p>

<p>Ah! Por cierto, el agente de windows, lo puede <a href="http://www.ocsinventory-ng.org/en/download/register-download-ocs-inventory-ng-agent-for-windows.html">descargar de aqui</a></p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2014/07/08/select-en-bootstrap/">select en bootstrap</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2014-07-08T15:40:54-04:00'><span class='date'><span class='date-month'>Jul</span> <span class='date-day'>8</span><span class='date-suffix'>th</span>, <span class='date-year'>2014</span></span> <span class='time'>3:40 pm</span></time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>A rails le sobra magia, eso no es secreto para nadie. No obstante, si hay un
hechizo complicado de conjurar, es el dichoso <a href="http://guides.rubyonrails.org/form_helpers.html#binding-a-form-to-an-object">form_for</a></p>

<p>Es una verdadera jodienda poner un select decente en un form_for de rails,
sobre todo para que coja el estilo de boostrap. He aquí el secreto:</p>

<figure class='code'><figcaption><span>&#8220;un_scaffold.html.erb&#8221;</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='html'><span class='line'> <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">&quot;form-control&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>    <span class="err">&lt;</span>%= f.select(:ampm, options_for_select([[&#39;AM&#39;, 1], [&#39;PM&#39;, 2]])) %&gt;
</span><span class='line'> <span class="nt">&lt;/div&gt;</span>
</span></code></pre></td></tr></table></div></figure>


<p>Ni en mi mejor día leyendo código fuente de RoR me hubiera imaginado que <a href="file:///home/lazaro/Documentacion/Rails/guides.rubyonrails.org/form_helpers.html#the-select-and-option-tags">options_for_select</a>
existía. Evito a toda costa usar select, pero aveces no queda más remedio; un
&ldquo;radio&rdquo; con 7 elementos se ve horrible.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2014/07/05/empirico/">empíricos</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2014-07-05T09:18:42-04:00'><span class='date'><span class='date-month'>Jul</span> <span class='date-day'>5</span><span class='date-suffix'>th</span>, <span class='date-year'>2014</span></span> <span class='time'>9:18 am</span></time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>¿Sabes tú qué es un &ldquo;empírico&rdquo;?</p>

<p>Una persona que desarrolla habilidades de manera autodidacta en un oficio o
campo de la ciencia y que llega a ser tanto o más bueno que un catedrático.</p>

<p>Generalmente estamos graduados de algo que no ejercemos.</p>

<p>Guardamos con devoción en nuestra casa, el libro que nos darían si llegáramos al
tercer año de la carrera universitaria que deberíamos estudiar.</p>

<p>No leemos los libros que nos obligan. Leemos los que nos interesan.</p>

<p>No podemos ir a la universidad porque suspendemos las pruebas en las que nos
preguntan cosas que hace 6 años leímos o cosas que No nos interesan.</p>

<p>Cuando llegamos a preescolar sabíamos las vocales, los colores y contar del uno
al diez. Odiábamos a la profesora por obligarnos a atender su aburrida clase.</p>

<p>Somos gente que pensamos diferentes y no encajamos en el montón. Algunos nos
llaman &ldquo;rosca izquierda&rdquo; otros nos llaman &ldquo;originales&rdquo;.</p>

<p>Sabemos que colar un café es una reacción exotérmica porque dimos química en
noveno grado.</p>

<p>Sabemos que de día sopla la brisa y de noche el terral, porque dimos &ldquo;mundo en
que vivimos&rdquo; en 5to grado.</p>

<p>VAMOS A LA ESCUELA A APRENDER, no a sacar buenas notas.</p>

<p>No nos expliques nada, solo déjanos ver como lo haces.</p>

<p>Sabemos hacer muy pocas cosas pero no tenemos rivales en las pocas que hacemos.</p>

<p>Si hay un camino a la derecha y otro a la izquierda, hacemos uno nuevo por el
medio; con la esperanza de hacerlo mejor.</p>

<p>No somos mejores ni peores que nadie porque no nos comparamos.</p>

<p>Tenemos una ortografía terrible porque escribimos en cualquier idioma menos en
el nuestro.</p>

<p>Sabemos un montón de cosas y no nos acordamos cuando o porque lo aprendimos.</p>

<p>Los que nos aprecian o admiran nos llaman &ldquo;geniales&rdquo; o &ldquo;inteligentes&rdquo;. Los que
nos repudian o envidian nos llaman &ldquo;autosuficientes&rdquo; o &ldquo;excéntricos&rdquo;.</p>

<p>Solo somos &ldquo;empíricos&rdquo;</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2014/06/27/crear-un-chroot-con-debian/">crear un chroot con debian</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2014-06-27T14:48:13-04:00'><span class='date'><span class='date-month'>Jun</span> <span class='date-day'>27</span><span class='date-suffix'>th</span>, <span class='date-year'>2014</span></span> <span class='time'>2:48 pm</span></time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>A menudo, necesitamos hacer una que otra barbaridad y no nos gustaría que esto
sucediera en nuestro sistema base. La virtualización es una buena opción para
aquellos que son enfermos a meter las patas; pero correr virtualbox solo para
eso, es matar moscas a cañonazos y:</p>

<p>   <blockquote><p>Prefiero lamer el piso del IPK que usar Proxmox.</p></blockquote></p>

<p>En debian, tenemos la herramienta
<a href="https://wiki.debian.org/es/debootstrap">debootstrap</a> que nos permite generar
chroot con fines educativos. La mala noticias es que necesita bajar los paquetes
de un mirror. Por suerte con un CD se resuelve el problema&hellip;</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>mount debian-7.0.0-i386-CD-1.iso /media/cdrom
</span><span class='line'>debootstrap --no-check-gpg wheezy /opt/chroot/ file:/media/cdrom
</span></code></pre></td></tr></table></div></figure>


<p>Luego para echarlo a andar montamos /sys y /proc como bind del host en el chroot:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>mount -o <span class="nb">bind</span> /sys /opt/chroot/sys
</span><span class='line'>mount -o <span class="nb">bind</span> /proc /opt/chroot/proc
</span></code></pre></td></tr></table></div></figure>


<p>Y luego hazle el chroot</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2014/06/10/autenticador-sql-en-el-proxy/">autenticador SQL en el proxy</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2014-06-10T15:26:38-04:00'><span class='date'><span class='date-month'>Jun</span> <span class='date-day'>10</span><span class='date-suffix'>th</span>, <span class='date-year'>2014</span></span> <span class='time'>3:26 pm</span></time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>De siempre, me ha parecido que los autenticadores de squid son unas
canchanfletas. Realmente antes me parecían otra cosa, porque la palabra
&ldquo;canchanfleta&rdquo; no existía, pero nunca me simpatizaron mucho los autenticadores.</p>

<p>El hecho de que para administrar los usuarios se necesite una aplicación aparte
y por lo general bien estrafalaria; es por si solo una verdadera jodienda.</p>

<p>El despliegue aquí en el Calixto fue prácticamente una locura. Todo a la
carrera. A pesar de eso, escribí un autenticador de lo mas chulo. Al enviarle
como argumento un usuario, generaba una contraseña firme y creaba un fichero
bajo el directorio &ldquo;/etc/squid/digest/&rdquo;. El nombre de dicho fichero era el
nombre de usuario y el contenido: un digest irreversible (el password).</p>

<h3>Problema 1:</h3>

<p>La necesidad de crear usuarios y cambiar contraseñas, pujaba la necesidad de
una mecanismo más óptimo. El problema era correr ruby on rails en el server
para manejar los usuarios; matar moscas a cañonazos. El rails podía crear los
ficheros en mi máquina y luego cotejarlo con el servidor manualmente con &ldquo;scp&rdquo;,
lo cual seguía siendo un fastidio. Además NO SE POR QUE, después de crear un
usuario, había que reiniciar el servidor, muy a pesar de que el directorio se
releía cada vez que se pedía un usaurio.</p>

<p>Sumado a eso, la evidente aparición de un presunto servidor de correo y la
inspiración que resulta el esquema de infomed; me dejaron caer una vieja escupía
en la frente; yo que era tan renuente a SQL.</p>

<p>Bueno, todos los usuarios pa una base de datos y problema resuelto.</p>

<p>Además, tengo planificado más de un servicio, así que alé por el típico esquema
de una cuenta para todos los servicios.</p>

<figure class='code'><figcaption><span>&#8220;consulta SQL para ver el password&#8221;</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='sql'><span class='line'><span class="k">SELECT</span> <span class="n">password</span> <span class="k">FROM</span> <span class="n">users</span> <span class="k">WHERE</span> <span class="n">username</span><span class="o">=</span><span class="ss">&quot;fulanito&quot;</span>
</span></code></pre></td></tr></table></div></figure>


<p>La cantidad de código del autenticador se redujo considerablemente y con ello
el margen de error. La cuestión quedó sencilla: Una consulta SQL que determina
si el usuario está en la base de datos y si tiene permisos de navegación. En
futuro si se requiere un sistema de quotas, saldrá por ahí también.</p>

<h3>Problema 2:</h3>

<p>Pero entonces surgió un nuevo problema. Cuba, tierra de salvajes apagones y
feroces mosquitos. La luz falla y la máquina del informático se cae. Cuando el
autenticador comete algún error, squid dice que el autenticador está fallando y
lo deja de pinchar. Aún si arrancase la base de datos, squid no vuelve a echar a
andar el autenticador.</p>

<p>Entonces volvemos a lo mismo: -lazarito! no hay internet??! Junto a un nagios
histérico que manda correos a diestra y siniestra. PÁFATA! De vuelta al
subdesarrollo, ssh pal servidor y &ldquo;squid -k reconfigure&rdquo;</p>

<h3>Solución:</h3>

<p>El autenticador debe seguir en pie, aún cuando la base de datos no sea
accesible.</p>

<p>La única forma de lograr esto de forma transparente hacia squid; es verificar si
la conexión a la base de datos está operacional y denegar todas las
autenticaciones si esta no lo estuviere.</p>

<h3>Implementación:</h3>

<p>Pero un autenticador de squid, es un ciclo infinito que lee stdin y habla por
stdout. Cargar una subrutina de rescate en cada vuelta, sería caerle a puñaladas
a la memoria RAM.</p>

<p>Solución: En cada vuelta, se compruebe si la base de datos está en linea. En
caso de no estarlo, se llama una función que establece la conexión. Este es un
iterador que intentará establecer la conexión hasta que lo logre. Mientras tanto
toda la autenticación en el proxy será &ldquo;usuario no válido&rdquo;.</p>

<figure class='code'><figcaption><span>&#8220;scope del iterador principal, bifurcador de reconexión&#8221;</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="k">if</span> <span class="n">my</span>
</span><span class='line'>   <span class="vi">@auth</span><span class="o">=</span><span class="kp">false</span>
</span><span class='line'><span class="k">else</span>
</span><span class='line'>   <span class="k">begin</span>
</span><span class='line'>      <span class="n">my</span> <span class="o">=</span> <span class="no">Mysql</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="s1">&#39;10.1.1.14&#39;</span><span class="p">,</span> <span class="s1">&#39;usuario&#39;</span><span class="p">,</span> <span class="s1">&#39;password&#39;</span><span class="p">,</span> <span class="s1">&#39;basededatos&#39;</span><span class="p">)</span> <span class="k">rescue</span> <span class="kp">false</span>
</span><span class='line'>   <span class="k">rescue</span>
</span><span class='line'>      <span class="no">STDERR</span> <span class="o">&lt;&lt;</span> <span class="s2">&quot;ERR Fallo la conexión al servidor SQL </span><span class="si">#{</span><span class="vg">$!</span><span class="si">}</span><span class="se">\n</span><span class="s2">&quot;</span>
</span><span class='line'>      <span class="no">STDERR</span><span class="o">.</span><span class="n">flush</span>
</span><span class='line'>      <span class="k">next</span>
</span><span class='line'>   <span class="k">end</span>
</span><span class='line'><span class="k">end</span> <span class="c1"># if sql</span>
</span></code></pre></td></tr></table></div></figure>


<p>El iterador principal sigue viendo la variable que hace como semáforo (&ldquo;my&rdquo; en
este caso) en false y no se toma la molestia de encuestar una base de datos que
ya sabe; está off-line. La variable &ldquo;my&rdquo; será false mientras no se redeclare con
la conexión de Mysql.new. No confundir con @auth que en este caso es el valor
por definicion de la autenticacion. Osea, no se autenticó.</p>

<p>La variable <em>my</em> será true cuando la función logre establecer la conexión con
la base de datos.</p>

<p>De está forma, falla de manera silente, segura y controlada.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2014/06/09/postfix-entrando-en-el-baile/">postfix entrando en el baile</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2014-06-09T15:19:03-04:00'><span class='date'><span class='date-month'>Jun</span> <span class='date-day'>9</span><span class='date-suffix'>th</span>, <span class='date-year'>2014</span></span> <span class='time'>3:19 pm</span></time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>En el episodio anterior, vimos como dovecot se sumaba al esquema mysql. Faltaría
solamente postfix, para tener entonces un &ldquo;completo servidor MySQL&rdquo;</p>

<p>Cabe reconocer que el futuro de MySQL es incierto, pero meintras PostGres sea la
gran basura que es, que conmigo ni cuenten.</p>

<p>Normalmente postfix, entrega a través de procmail, pero ahora, nuestro dovecot
con sus flamantes características, tendrá una manera más compleja de entregar.
Por tanto, debemos usar el LDA (Local Deliver Agent) de Dovecot como el MDA por
defecto de postfix.</p>

<p>Al fichero <em>/etc/postfix/main.cf</em> le agregamos en el fondo un nuevo transport.</p>

<figure class='code'><figcaption><span>/etc/postfix/master.cf</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='ini'><span class='line'><span class="err">dovecot</span> <span class="err">unix</span> <span class="err">-</span> <span class="err">n</span> <span class="err">n</span> <span class="err">-</span> <span class="err">-</span> <span class="err">pipe</span>
</span><span class='line'>  <span class="na">flags</span><span class="o">=</span><span class="s">DRhu user=vmail:vmail argv=/usr/lib/dovecot/deliver -f ${sender} -d ${user}@${domain} -m ${extension}</span>
</span></code></pre></td></tr></table></div></figure>


<p>Además de lo usual, al main.cf le declaramos que su nuevo transporte es  un tal
&ldquo;dovecot&rdquo; y le agregaremos unas cuantas gangarreas extras que ya explicaré.</p>

<figure class='code'><figcaption><span>/etc/postfix/main.cf</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
</pre></td><td class='code'><pre><code class='ini'><span class='line'><span class="c1"># el resto de u confuiguracion arriba</span>
</span><span class='line'><span class="na">virtual_transport</span><span class="o">=</span><span class="s">dovecot</span>
</span><span class='line'><span class="na">mailbox_command</span> <span class="o">=</span> <span class="s">/usr/lib/dovecot/deliver</span>
</span><span class='line'><span class="na">mydestination</span> <span class="o">=</span> <span class="s">localhost, blackjack</span>
</span><span class='line'><span class="na">virtual_mailbox_domains</span> <span class="o">=</span> <span class="s">hcg.sld.cu</span>
</span><span class='line'><span class="na">virtual_mailbox_maps</span> <span class="o">=</span> <span class="s">$virtual_mailbox_domains</span>
</span><span class='line'><span class="na">virtual_alias_maps</span> <span class="o">=</span> <span class="s">hash:/etc/aliases</span>
</span></code></pre></td></tr></table></div></figure>


<ol>
<li>Un comentario a prueba de imbéciles.</li>
<li>Declaramos el nuevo transporte para el dominio virtual.</li>
<li>Declaramos además, que se use el LDA de dovecot.</li>
<li>Declaramos que solo localhost y blackjack son destinos locales.</li>
<li>El dominio virtual será &ldquo;hcg.sld.cu&rdquo;.</li>
<li>Y lo mapeamos igual.</li>
<li>Por último, lo alias se quedan en el fichero tradicional.</li>
</ol>


<p>Ahora si creamos un usaurio llamado &ldquo;usuario&rdquo; en la base de datos;
usuario@localhost no será válido porque solo existe en el domino virtual.</p>

<p>Además, le agregamos que los alisas, son un hash en /etc/alisas, al estilo
antiguo. No vamos a cargar la base de datos con los alisases. Sobre todo
teniendo en cuenta lo pocos que son. De esta forma, cuando por ejemplo, se manda
un correo a root que es una alias de lazaro, postfix preguntara quien es lazaro
y responderá un usaurio del dominio virtual. Genial eh?</p>

<p>Tanto los alisas como los dominios virtuales, podrían ser tablas de MySQL, pero
como mi aplicación no maneja eso, lo haces al estilo tradicional. En caso de que
más adelante desarrollase algún esquema tipo proveedor de servicios; otro gallo
cantaría.</p>

<p>No olvidemos &ldquo;postfix reload&rdquo;</p>
</div>
  
  


    </article>
  
  <div class="pagination">
    
      <a class="prev" href="/posts/8">&larr; Older</a>
    
    <a href="/blog/archives">Blog Archives</a>
    
    <a class="next" href="/posts/6">Newer &rarr;</a>
    
  </div>
</div>
<aside class="sidebar">
  
    <section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2015/10/15/repo-de-fdroid/">repo de fdroid</a>
      </li>
    
      <li class="post">
        <a href="/blog/2015/10/08/prawn-pdf-con-ruby/">prawn, pdf con ruby</a>
      </li>
    
      <li class="post">
        <a href="/blog/2015/10/05/assets-por-controlador/">assets por controlador</a>
      </li>
    
      <li class="post">
        <a href="/blog/2015/09/17/dhcp-por-grupos/">dhcp por grupos</a>
      </li>
    
      <li class="post">
        <a href="/blog/2015/09/10/plymouth-boot-screen/">plymouth boot screen</a>
      </li>
    
      <li class="post">
        <a href="/blog/2015/09/07/git-clone-rapido/">git clone rápido</a>
      </li>
    
      <li class="post">
        <a href="/blog/2015/09/07/archlinux-dos-kernel/">archlinux con dos kernel</a>
      </li>
    
      <li class="post">
        <a href="/blog/2015/09/01/squid-transparente/">squid transparente</a>
      </li>
    
      <li class="post">
        <a href="/blog/2015/08/28/compute-remote-uptime/">compute remote uptime</a>
      </li>
    
      <li class="post">
        <a href="/blog/2015/07/19/will-paginate/">will_paginate</a>
      </li>
    
      <li class="post">
        <a href="/blog/2015/07/12/date-select-en-espanol/">date_select en español</a>
      </li>
    
      <li class="post">
        <a href="/blog/2015/07/11/openvas-en-archlinux/">OpenVAS en Archlinux</a>
      </li>
    
      <li class="post">
        <a href="/blog/2015/07/05/anadir-verbo-a-un-scaffold/">añadir verbo a un scaffold</a>
      </li>
    
      <li class="post">
        <a href="/blog/2015/07/05/asset-pipeline-en-production/">asset pipeline en production</a>
      </li>
    
      <li class="post">
        <a href="/blog/2015/06/30/bootstrap-en-rails-4/">bootstrap en rails 4</a>
      </li>
    
      <li class="post">
        <a href="/blog/2015/06/14/revocar-certificados-de-ovpn/">revocar certificados de OVPN</a>
      </li>
    
      <li class="post">
        <a href="/blog/2015/06/12/systemd-automount/">systemd automount</a>
      </li>
    
      <li class="post">
        <a href="/blog/2015/06/07/openvpn-en-arch/">OpenVPN en Arch</a>
      </li>
    
      <li class="post">
        <a href="/blog/2015/06/03/transando-a-ext4/">transando a ext4</a>
      </li>
    
      <li class="post">
        <a href="/blog/2015/06/01/pacman-bajo-el-microscopio/">pacman bajo el microscopio</a>
      </li>
    
      <li class="post">
        <a href="/blog/2015/05/28/cambiar-user-agent-en-squid/">cambiar user agent con squid</a>
      </li>
    
      <li class="post">
        <a href="/blog/2015/05/26/nic-bonding/">NIC bonding</a>
      </li>
    
      <li class="post">
        <a href="/blog/2015/05/23/ltsp-en-debian8-y-salud/">ltsp en debian8 y salud</a>
      </li>
    
      <li class="post">
        <a href="/blog/2015/02/22/rails-sin-turbolink/">rails sin turbolinks</a>
      </li>
    
      <li class="post">
        <a href="/blog/2015/02/21/sasl-homeclub-only/">SASL homeclub only</a>
      </li>
    
      <li class="post">
        <a href="/blog/2015/02/19/delay-pools-de-squid/">delay pools de squid</a>
      </li>
    
      <li class="post">
        <a href="/blog/2015/02/12/rails-con-mongodb/">rails con mongodb</a>
      </li>
    
      <li class="post">
        <a href="/blog/2015/02/06/zentyal/">Zentyal</a>
      </li>
    
      <li class="post">
        <a href="/blog/2015/02/01/bundle/">bundle</a>
      </li>
    
      <li class="post">
        <a href="/blog/2014/12/02/welcome-aboard/">welcome aboard</a>
      </li>
    
      <li class="post">
        <a href="/blog/2014/10/28/proxy-automatico/">proxy automático</a>
      </li>
    
      <li class="post">
        <a href="/blog/2014/09/24/verdial-y-el-imagis/">la pena de verdial</a>
      </li>
    
      <li class="post">
        <a href="/blog/2014/09/05/palos-de-wordpress/">palos de wordpress</a>
      </li>
    
      <li class="post">
        <a href="/blog/2014/08/25/el-server-de-correo/">el servidor de correo</a>
      </li>
    
      <li class="post">
        <a href="/blog/2014/08/25/mas-de-ocs/">más de OCS</a>
      </li>
    
      <li class="post">
        <a href="/blog/2014/08/15/subdesarrollo/">subdesarrollo</a>
      </li>
    
      <li class="post">
        <a href="/blog/2014/08/11/ocs-inventory/">ocs-inventory</a>
      </li>
    
      <li class="post">
        <a href="/blog/2014/07/08/select-en-bootstrap/">select en bootstrap</a>
      </li>
    
      <li class="post">
        <a href="/blog/2014/07/05/empirico/">empíricos</a>
      </li>
    
      <li class="post">
        <a href="/blog/2014/06/27/crear-un-chroot-con-debian/">crear un chroot con debian</a>
      </li>
    
      <li class="post">
        <a href="/blog/2014/06/10/autenticador-sql-en-el-proxy/">autenticador SQL en el proxy</a>
      </li>
    
      <li class="post">
        <a href="/blog/2014/06/09/postfix-entrando-en-el-baile/">postfix entrando en el baile</a>
      </li>
    
      <li class="post">
        <a href="/blog/2014/06/09/dovecot-entra-en-el-baile/">dovecot entra en el baile</a>
      </li>
    
      <li class="post">
        <a href="/blog/2014/05/02/wordpress-para-todos/">wordpress para todos</a>
      </li>
    
      <li class="post">
        <a href="/blog/2014/04/06/squid-en-infomed/">el toten de proxies</a>
      </li>
    
      <li class="post">
        <a href="/blog/2014/04/04/en-la-cumbre-del-vedado/">el &#8220;calisto&#8221; garcía</a>
      </li>
    
  </ul>
</section>





  
</aside>

    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2015 - låzaro -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  



<div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) {return;}
  js = d.createElement(s); js.id = id; js.async = true;
  js.src = "//connect.facebook.net/en_US/all.js#appId=212934732101925&xfbml=1";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>



  <script type="text/javascript">
    (function() {
      var script = document.createElement('script'); script.type = 'text/javascript'; script.async = true;
      script.src = 'https://apis.google.com/js/plusone.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(script, s);
    })();
  </script>



  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = '//platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
