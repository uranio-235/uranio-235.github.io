
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>El SysAdmin del 3er Mundo</title>
  <meta name="author" content="låzaro">

  
  <meta name="description" content="OpenVAS en Archlinux 11/07/2015 7:19 pm | Comments Recientemente, un &ldquo;Webmaster&rdquo; usó en uno de los servidores que patrocino; un
escaner &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://uranio-235.github.io/posts/13/">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/atom.xml" rel="alternate" title="El SysAdmin del 3er Mundo" type="application/atom+xml">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="/javascripts/libs/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="//fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="//fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-68987437-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


  
</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/">El SysAdmin del 3er Mundo</a></h1>
  
    <h2>todo lo que expliqué mientras nadie prestaba atención</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="http://www.google.com" method="get">
  <fieldset role="search">
    <input type="hidden" name="sitesearch" value="uranio-235.github.io">
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/blog/archives">Archivo</a></li>
  <li><a href="/blog/categories/rails/">Ruby on Rails</a></li>
  <li><a href="/blog/categories/islam/">Islam</a></li>
  <li><a href="/blog/categories/destacado/">Destacado</a></li>
  <li><a href="/blog/categories/razonemos/">Razonemos</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div class="blog-index">
  
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2015/07/11/openvas-en-archlinux/">OpenVAS en Archlinux</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2015-07-11T19:19:59-04:00'><span class='date'>11/07/2015</span> <span class='time'>7:19 pm</span></time>
        
           | <a href="/blog/2015/07/11/openvas-en-archlinux/#disqus_thread"
             data-disqus-identifier="http://uranio-235.github.io/blog/2015/07/11/openvas-en-archlinux/">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p><img class="left" src="/images/greenbone.png" title="Login del Greenbone" alt="Login del Greenbone"></p>

<p>Recientemente, un &ldquo;Webmaster&rdquo; usó en uno de los servidores que patrocino; un
escaner de vulnerabilidades. El administrador de red del lugar, le dio acceso al
servidor; claro está. El informe reveló un cartapaso de vulnerabilidades. Por
ejemplo, la ausencia de una partición swap; podría dar lugar a un kernel-panic
por falta de memoria RAM; en un servidor de correo con 4 Gigas de RAM. Además,
advertía que la versión de bash (con sus parches puestos) era muy vieja y
recomendaba usar una reciente. Como si instalar software reciente en debian
fuese jamón.</p>

<p>No vi nada con respecto a postfix o dovecot pero de inmediato me llamaron para
que explicara como era posible que mi servidor tuviera semejantes
vulnerabilidades. Claro, con acceso a root cualquiera busca vulnerabilidades.</p>

<p>Soy de los que pasa HORAS, intentando penetrar mi propia seguridad; pero el caso
llevaba un contra ataque más elaborado.</p>

<p>El sosftware por excelencia para probar la seguridad: <a href="http://es.wikipedia.org/wiki/OpenVAS">OpenVAS</a></p>

<h3>No solo identifica el problema, también te dice como arreglarlo.</h3>

<p>Funciona de manera similar a un antivirus. Una base de datos se actualiza y ala
las vulnerabilidades conocidas. Luego, una interfaz web, de lo más cómoda;
permite llevar a cabo un análisis tanto ligero como exhaustivo del sistema
seleccionado como objetivo. Además, se pueden programar análisis de manera
automatizada.</p>

<p>Su interfaz web, el llamado &ldquo;Greenbone Security Assistant&rdquo;, nos hará la vida muy
fácil una vez instalado.</p>

<p>En archlinux todo es un rollo, así que empezemos:</p>

<figure class='code'><figcaption><span>&#8220;instalando openvas&#8221;</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>pacman -S openvas
</span></code></pre></td></tr></table></div></figure>


<p>La interfaz web de openvas (el greenbone) debe ser contactada por SSL (obligao).
Como siempre, crear los certificados es todo una ceremonia.</p>

<figure class='code'><figcaption><span>&#8220;creando certificados&#8221;</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>openvas-mkcert
</span><span class='line'>openvas-mkcert-client -n -i
</span></code></pre></td></tr></table></div></figure>


<p>Ahora lo más importante. Descargarnos la base de datos con las amenazas, o sea,
con las vulnerabilidades.</p>

<figure class='code'><figcaption><span>&#8220;actualizando las bases&#8221;</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>openvas-nvt-sync
</span><span class='line'>openvas-scapdata-sync
</span><span class='line'>openvas-certdata-sync
</span></code></pre></td></tr></table></div></figure>


<p>El escaner, es un servicio, que en producción, está supuestamente corriendo y
realizando escaneos bajo demanda. Lo echamos a andar:</p>

<figure class='code'><figcaption><span>&#8220;el servicio&#8221;</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>systemctl start openvas-scanner
</span></code></pre></td></tr></table></div></figure>


<p>Una vez que tenemos las bases de datos descargadas, las instalamos en openvas</p>

<figure class='code'><figcaption><span>&#8220;instalando las bases&#8221;</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>openvasmd --rebuild --progress
</span></code></pre></td></tr></table></div></figure>


<p>Y hasta aquí es donde la wiki de arch está bien. Pues para crear el usuario de
openvas y echar a andar el greenbone, se forma la moña.</p>

<p>Primero debemos crear el usuario de openvas. En este caso de ejemplo, el
usuario será <strong>admin</strong> con password <strong>admin</strong>.</p>

<figure class='code'><figcaption><span>&#8220;creando usuarios&#8221;</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>openvasmd --create-user<span class="o">=</span>admin --role<span class="o">=</span>Admin
</span><span class='line'>openvasmd --user<span class="o">=</span>admin --new-password<span class="o">=</span>admin
</span></code></pre></td></tr></table></div></figure>


<p>Por último, echamos a andar la interfaz web:</p>

<figure class='code'><figcaption><span>&#8220;iniciando gsad&#8221;</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>gsad --http-only --listen<span class="o">=</span>127.0.0.1 -p 9392
</span><span class='line'>openvasmd -p <span class="m">9390</span> -a 127.0.0.1
</span></code></pre></td></tr></table></div></figure>


<p>Abre un navegador y apunta para <a href="http://127.0.0.1:9392">http://127.0.0.1:9392</a></p>

<p>Una vez dentro, verás la página donde se almacenan los escaneos. Ahí localiza un
botón morado con una barita mágica. Vea la imagen de abajo</p>

<p><img class="center" src="/images/openvas_wiz.png" title="Botón del Wizard" alt="Botón del Wizard"></p>

<p>En la pantalla que le sigue, especificamos el host al que queremos escanear.</p>

<p><img class="center" src="/images/openvas_scan.png" title="Seleccionar Objetivo" alt="Seleccionar objetivo"></p>

<p>Apto seguido, comenzará el escaneo. Es posible que el servidor deje de prestar
servicios; pues openvas le da con todo.</p>

<p>Finalmente, cuando el escaneo esté terminado, en vez de un tanto por ciento,
verás; como en la primera imagen, un letrero que dice &ldquo;<strong>done</strong>&rdquo; sobre la barra
azul.</p>

<p><img class="center" src="/images/openvas_result.png" title="resultado del escaneo" alt="resultado de escaneo"></p>

<p>La imagen muestra, el resultado del webmaster que le tiró piedras al tejado del
vecino con el suyo de vidrio. Al hacer click en la vulnerabilidad, nos muestra
la solución, como es el ejemplo de esta:</p>

<p><img class="center" src="/images/openvas_sol.png" title="solución" alt="solución"></p>

<p>Hermosa pareja; el problema y la solución junticos&hellip;</p>
</div>
  
  


<p>Si este art&iacute;culo te result&oacute; interesante, considere donar 0.06 BTC: <a href="/images/direccion.png">1Kg4gu3e7u8HUw8bj5NbBciRg6Y56kuFCU</a> </p>

    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2015/07/05/anadir-verbo-a-un-scaffold/">añadir verbo a un scaffold</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2015-07-05T21:35:54-04:00'><span class='date'>05/07/2015</span> <span class='time'>9:35 pm</span></time>
        
           | <a href="/blog/2015/07/05/anadir-verbo-a-un-scaffold/#disqus_thread"
             data-disqus-identifier="http://uranio-235.github.io/blog/2015/07/05/anadir-verbo-a-un-scaffold/">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Cualquiera que sepa como usar debidamente los scaffolds, o sea, cualquiera que
sepa como hacerle la paja a ruby on rails para que haga lo que queremos; seguro
habrá intentado en algún momento, añadir un nuevo método a un scaffold. Además,
de seguro quisiste luego poder llamarlo con los métodos &ldquo;metodo_user_path&rdquo; y que
la ruta se cree de manera automática.</p>

<p>Por ejemplo, en este caso, tengo el scaffold <strong>user</strong> y le agregué el método
<strong>cambiar</strong> aparte de los clásicos PUT y DELETE.</p>

<figure class='code'><figcaption><span>&#8220;scope de users_controller.rb&#8221;</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'>  <span class="c1"># cambia el estado de habilitación del usuarios</span>
</span><span class='line'>  <span class="k">def</span> <span class="nf">cambiar</span>
</span><span class='line'>     <span class="vi">@user</span><span class="o">.</span><span class="n">enabled</span><span class="o">=!</span><span class="vi">@user</span><span class="o">.</span><span class="n">enabled</span>
</span><span class='line'>     <span class="vi">@user</span><span class="o">.</span><span class="n">save</span>
</span><span class='line'>     <span class="n">redirect_to</span> <span class="ss">:back</span>
</span><span class='line'>  <span class="k">end</span>
</span><span class='line'>
</span><span class='line'>  <span class="c1"># GET /users</span>
</span><span class='line'>  <span class="k">def</span> <span class="nf">index</span>
</span><span class='line'>    <span class="vi">@users</span> <span class="o">=</span> <span class="no">User</span><span class="o">.</span><span class="n">all</span>
</span><span class='line'>  <span class="k">end</span>
</span></code></pre></td></tr></table></div></figure>


<p>Pero el método cambiar no aparece en rails hasta que no hagas lo siguiente en el
fichero de las rutas.</p>

<figure class='code'><figcaption><span>&#8220;config/routes.rb&#8221;</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'>   <span class="c1"># el scaffold de los usuarios</span>
</span><span class='line'>   <span class="n">resources</span> <span class="ss">:users</span> <span class="k">do</span>
</span><span class='line'>
</span><span class='line'>      <span class="c1"># agregamos el verbo cambiar usado para</span>
</span><span class='line'>      <span class="c1"># @user.enabled=!@user.enabled</span>
</span><span class='line'>      <span class="c1"># para que exista: cambiar_user_path</span>
</span><span class='line'>      <span class="n">member</span> <span class="k">do</span>
</span><span class='line'>         <span class="n">get</span> <span class="s1">&#39;cambiar&#39;</span>
</span><span class='line'>      <span class="k">end</span>
</span><span class='line'>
</span><span class='line'>   <span class="k">end</span>
</span></code></pre></td></tr></table></div></figure>


<p>Ahora existirá el método <strong>cambiar_user_path</strong> que toma como argumento el
usuario.</p>

<p>   cambiar_user_path(user)</p>

<p>De esta manera, se le manda el objeto usuario y genera una URL como</p>

<p>   /users/345/cambiar</p>

<p>Dicha ruta macheará el método User#cambiar</p>
</div>
  
  


<p>Si este art&iacute;culo te result&oacute; interesante, considere donar 0.06 BTC: <a href="/images/direccion.png">1Kg4gu3e7u8HUw8bj5NbBciRg6Y56kuFCU</a> </p>

    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2015/06/30/bootstrap-en-rails-4/">bootstrap en rails 4</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2015-06-30T12:19:42-04:00'><span class='date'>30/06/2015</span> <span class='time'>12:19 pm</span></time>
        
           | <a href="/blog/2015/06/30/bootstrap-en-rails-4/#disqus_thread"
             data-disqus-identifier="http://uranio-235.github.io/blog/2015/06/30/bootstrap-en-rails-4/">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Pensaba escribir una entrada sobre como hacer que se vean los glyphicons luego
de instalar la gema de boostrap en rails 4; pero, recientemente he recibido
numerosas críticas, sobre entradas de mi blog. Dicen que hablo sobre como
solucionar problemas de cosas que ni si quiera conocen pero al parecer están muy
buenas.</p>

<p><a href="http://getbootstrap.com">Bootstrap</a> es un framework CSS patrocinado por Twitter
y es el fin de los dolores de cabeza para todo el que como yo, le tiene terror a
programar CSS. Por supuesto, como todo en materia de framework, tiene sus pro y
sus contras.</p>

<p>La ventaja de usar un framework, es que te ahorras un mundo de código. La
ventaja además; de usar un framework CSS, es que estás de manera automática
arriba de los último en materia de CSS.</p>

<p>La desventaja de usar un Framework (cea CSS o no) es que en la mayoría de los
casos, carga mil y un elemento que nunca usarás. Por ejemplo, tengo una
aplicación que NO usa carrousel; pero como está hecha a la carrera, no he tenido
tiempo de determinar que elementos o no cargar con bootstrap. Por definición, se
cargan todos.</p>

<p>En nuestro Gemfile, debemos declarar que use bootstrap así:</p>

<figure class='code'><figcaption><span>&#8220;scope del Gemfile&#8221;</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="n">gem</span> <span class="s2">&quot;twitter-bootstrap-rails&quot;</span>
</span></code></pre></td></tr></table></div></figure>


<p>Luego, procedemos a la instalación del tema CSS, en mi caso, como no uso less ni
nada de eso, lo hago así:</p>

<figure class='code'><figcaption><span>&#8220;instalando el engine&#8221;</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>rails generate bootstrap:install static
</span></code></pre></td></tr></table></div></figure>


<p>Con eso, supuestamente ya está listo. Pero como todo en ruby on rails se queda
atrás, resulta que el asset pipeline moderno no carga las fuentes y en el
fichero <strong>application.css</strong> hay que añadirle el siguiente código:</p>

<figure class='code'><figcaption><span>&#8220;app/assets/stylesheets/application.css&#8221;</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
</pre></td><td class='code'><pre><code class='css'><span class='line'><span class="c">/* Esto va al final de la CSS */</span>
</span><span class='line'>
</span><span class='line'><span class="k">@font-face</span> <span class="p">{</span>
</span><span class='line'>  <span class="nt">font-family</span><span class="o">:</span> <span class="s1">&#39;Glyphicons Halflings&#39;</span><span class="o">;</span>
</span><span class='line'>  <span class="nt">src</span><span class="o">:</span> <span class="nt">url</span><span class="o">(</span><span class="s1">&#39;../assets/glyphicons-halflings-regular.eot&#39;</span><span class="o">);</span>
</span><span class='line'>  <span class="nt">src</span><span class="o">:</span> <span class="nt">url</span><span class="o">(</span><span class="s1">&#39;../assets/glyphicons-halflings-regular.eot?#iefix&#39;</span><span class="o">)</span> <span class="nt">format</span><span class="o">(</span><span class="s1">&#39;embedded-opentype&#39;</span><span class="o">),</span>
</span><span class='line'>       <span class="nt">url</span><span class="o">(</span><span class="s1">&#39;../assets/glyphicons-halflings-regular.woff&#39;</span><span class="o">)</span> <span class="nt">format</span><span class="o">(</span><span class="s1">&#39;woff&#39;</span><span class="o">),</span>
</span><span class='line'>       <span class="nt">url</span><span class="o">(</span><span class="s1">&#39;../assets/glyphicons-halflings-regular.ttf&#39;</span><span class="o">)</span> <span class="nt">format</span><span class="o">(</span><span class="s1">&#39;truetype&#39;</span><span class="o">),</span>
</span><span class='line'>       <span class="nt">url</span><span class="o">(</span><span class="s1">&#39;../assets/glyphicons-halflings-regular.svg#glyphicons_halflingsregular&#39;</span><span class="o">)</span> <span class="nt">format</span><span class="o">(</span><span class="s1">&#39;svg&#39;</span><span class="o">);</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>¿Qué como conseguí eso? Ni preguntes, me lo mandó por correo un salvaje de la
materia.</p>

<p>Otra cosa:</p>

<p>Si no sabes usar boostrap, te recomiendo que le eches un vistazo. Si sabes
escribir CSS, te recomiendo que lo veas igual, pues tiene una buena API para
personalizarlo como te de la gana.</p>

<h3>pero está la gema bootstrap-sass</h3>

<p>Sí, ya se que está <a href="http://badge.fury.io/rb/bootstrap-sass">bootstrap-sass</a>,
que es además <em>es el port oficial de bootstrap</em> y que rails usa
<a href="http://sass-lang.com">SASS</a>; pero te imaginarás el criterio que tengo sobre
sass.</p>

<p>Por mi, coffe-script y sass pueden cogerlos, doblarlos bien y meterselos ambos
en el&hellip;. BOLSILLO. El programador web que no quiera aprender JavaScript y CSS
está embarcao. Por otra parte, para aprender SASS y CoffeScript hay que saber
CSS y JavaScript :D ¿Que problema verdad?</p>

<h3>Helpers de utildad</h3>

<p>La diferencia entre bootstrap-sass y twitter-bootstrap-rails  es que
boostrap-sass la hizo la gente de bootstrap y la segunda, la hicieron usuarios
de ruby on rails&hellip;</p>

<p>Te explico:</p>

<figure class='code'><figcaption><span>&#8220;fulanito.erb.html&#8221;</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='erb'><span class='line'><span class="cp">&lt;%=</span> <span class="n">nav_bar</span> <span class="ss">brand</span><span class="p">:</span> <span class="s2">&quot;Páfata&quot;</span> <span class="k">do</span> <span class="cp">%&gt;</span><span class="x"></span>
</span><span class='line'><span class="x">    </span><span class="cp">&lt;%=</span> <span class="n">menu_text</span> <span class="s2">&quot;El texto de la barra&quot;</span> <span class="cp">%&gt;</span><span class="x"></span>
</span><span class='line'><span class="cp">&lt;%</span> <span class="k">end</span> <span class="cp">%&gt;</span><span class="x"></span>
</span></code></pre></td></tr></table></div></figure>


<p>Eso generará un navbar como este:</p>

<figure class='code'><figcaption><span>&#8220;render output&#8221;</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='html'><span class='line'><span class="nt">&lt;nav</span> <span class="na">class=</span><span class="s">&quot;navbar navbar-default&quot;</span> <span class="na">role=</span><span class="s">&quot;navigation&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>  <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">&quot;container&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>  <span class="nt">&lt;a</span> <span class="na">class=</span><span class="s">&quot;navbar-brand&quot;</span> <span class="na">href=</span><span class="s">&quot;http://127.0.0.1:3000/&quot;</span><span class="nt">&gt;</span>Páfata<span class="nt">&lt;/a&gt;</span>
</span><span class='line'>  <span class="nt">&lt;p</span> <span class="na">class=</span><span class="s">&quot;navbar-text&quot;</span><span class="nt">&gt;</span>El texto de la barra<span class="nt">&lt;/p&gt;</span>
</span><span class='line'><span class="nt">&lt;/div&gt;&lt;/nav&gt;</span>
</span></code></pre></td></tr></table></div></figure>


<p>Si eso no te pareció emocionante, mira el helper de flash. Ponte tu que halla un
error y lo metes en el flash.</p>

<figure class='code'><figcaption><span>&#8220;ejemplo_controller.rb&#8221;</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="k">def</span> <span class="nf">fulanito</span>
</span><span class='line'>   <span class="n">flash</span><span class="o">[</span><span class="ss">:error</span><span class="o">]=</span><span class="s1">&#39;Bofatás! El error del milenio&#39;</span>
</span><span class='line'>   <span class="n">render</span> <span class="ss">:fulanito</span>
</span><span class='line'><span class="k">end</span>
</span></code></pre></td></tr></table></div></figure>


<p>En la vista, pones está simple linea:</p>

<figure class='code'><figcaption><span>&#8220;fulanito.erb.html&#8221;</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='erb'><span class='line'><span class="cp">&lt;%=</span> <span class="n">bootstrap_flash</span> <span class="cp">%&gt;</span><span class="x"></span>
</span></code></pre></td></tr></table></div></figure>


<p>Y se renderiza:</p>

<figure class='code'><figcaption><span>&#8220;render output&#8221;</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='html'><span class='line'><span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">&quot;alert fade in alert-danger &quot;</span><span class="nt">&gt;</span>
</span><span class='line'><span class="nt">&lt;button</span> <span class="na">class=</span><span class="s">&quot;close&quot;</span><span class="na">data-dismiss=</span><span class="s">&quot;alert&quot;</span><span class="nt">&gt;</span><span class="ni">&amp;times;</span><span class="nt">&lt;/button&gt;</span>
</span><span class='line'>Bofatás! El error del milenio
</span><span class='line'><span class="nt">&lt;/div&gt;</span>
</span></code></pre></td></tr></table></div></figure>


<p>Échale un vistazo al link de abajo, pa que veas como renderizan breadcumb
declarando los componentes en los controladores.</p>

<p>Mas detalles aquí: <a href="https://github.com/seyhunak/twitter-bootstrap-rails">https://github.com/seyhunak/twitter-bootstrap-rails</a></p>
</div>
  
  


<p>Si este art&iacute;culo te result&oacute; interesante, considere donar 0.05 BTC: <a href="/images/direccion.png">1Kg4gu3e7u8HUw8bj5NbBciRg6Y56kuFCU</a> </p>

    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2015/06/21/se-dice-dios-no-ala/">se dice DIOS, no alá</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2015-06-21T22:27:03-04:00'><span class='date'>21/06/2015</span> <span class='time'>10:27 pm</span></time>
        
           | <a href="/blog/2015/06/21/se-dice-dios-no-ala/#disqus_thread"
             data-disqus-identifier="http://uranio-235.github.io/blog/2015/06/21/se-dice-dios-no-ala/">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p><img class="right" src="/images/ala.png" width="300" height="400" title="" ></p>

<p>Aunque el islam es algo poco común en cuba, cada día en el mundo, va tomando más
fuerza. Nunca falta un curioso que se cree culto y te dice.</p>

<p>&ldquo;yo creo en dios, no en alá&rdquo;.</p>

<p>Sin darse cuenta el disparate que están diciendo.</p>

<p>   <blockquote><p>Alá es la hispanización de la palabra árabe Al-lāh (الله), que en español significa <strong>Dios</strong>.</p><footer><strong>Wikipedia</strong></footer></blockquote></p>

<p>De hecho, los cristianos árabes (que hay) llaman a dios Alá, porque repito,
<strong>significa dios LITERALMENTE</strong></p>

<p>Claro, como en todas las religiones, siempre hay extremistas y aquí los hay, que
andan por la habana, disfrazados de árabes y dicen Alá en vez de dios.</p>

<p>Por otra parte, el <a href="https://es.wikipedia.org/wiki/Lengua_lit%C3%BArgica">idioma litúrgico</a>
del islam es el árabe, razón por la cual el término suena más o menos como <em>al
laaj</em> y mucha gente lo agarra por el mango.</p>

<p>Existen dos grandes traducciones del corán al español, la Julio Cortés y la Isa
García. La primera, en mi opinión, es bastante mala; comparada con la segunda,
que es más completa, ya que incluye una interpretación contextual [entre
corchetes] de las oraciones más complejas. Esto nos da la medida que la
traducción es más fiel. En esta traducción, se usa el término Dios en lugar de
Alá (casi siempre con inicial mayúscula).</p>

<p>Por esta razón, mucha gente hablando en español dice &ldquo;alá&rdquo;. Y yo pregunto:</p>

<h3>¿Has visto algún testigo de Jehová diciendo GOD?</h3>

<p>Claro que no, todos dicen <strong>dios</strong>. Porque cuando la religión salió de Estados
Unidos, medio mundo sabía inglés.</p>

<p>Sin embargo, cuando el islam salió del mundo árabe, la palabra Alá empezó a
sonar en España, donde no convenía que Alá y Dios fueran la misma cosa. A los
Españoles había que convencerlos de que adorar a alá era adorar a un dios
diferente. Problemas políticos <strong>de aquel entonces</strong>, por una bobería ahí
llamada <a href="https://es.wikipedia.org/wiki/Reconquista">reconquista</a>.</p>

<p>Hoy, en el siglo XXI, sabemos que <strong>dios</strong> en árabe se dice &ldquo;al laj&rdquo; (Al-Lāh o الله).</p>

<p>Dios y Alá, son la misma cosa, solo cambia la manera en que las vemos&hellip; Dios es
uno solo, onmipotente y omnisapiente; nosotros los mortales, dadas nuestras
diferencias políticas, culturales e idiomáticas, necesitamos ponerle nombre a
dios para poder comprenderlo.</p>
</div>
  
  


<p>Si este art&iacute;culo te result&oacute; interesante, considere donar 0.07 BTC: <a href="/images/direccion.png">1Kg4gu3e7u8HUw8bj5NbBciRg6Y56kuFCU</a> </p>

    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2015/06/01/pacman-bajo-el-microscopio/">pacman bajo el microscopio</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2015-06-01T21:13:05-04:00'><span class='date'>01/06/2015</span> <span class='time'>9:13 pm</span></time>
        
           | <a href="/blog/2015/06/01/pacman-bajo-el-microscopio/#disqus_thread"
             data-disqus-identifier="http://uranio-235.github.io/blog/2015/06/01/pacman-bajo-el-microscopio/">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>En este post, me propongo mostrarle algunas de las bondades de pacman. Cualquier
que conozca Arch Linux, sabe de lo que estoy hablando.</p>

<p>Veremos bien de cerca el engranaje de está compleja maquinaria.</p>

<p>Pacman, es una herramienta lo suficientemente versátil como para llevar el
nombre de &ldquo;administrador de paquetes&rdquo;. Su nombre es un juego de palabras que
proviene de juntar las palabras &ldquo;PACkage MANager&rdquo;.</p>

<p>A diferencia de ciertas y determinadas distribuciones (entiéndase debian); que
requieren más de 3 softwares para esa pincha. Pacman solo es autosuficiente para
gestionar la paquetería. La herramienta repo-add, está incluída dentro del
paquete de pacman y se usa para crear repositorios personalizados.</p>

<figure class='code'><figcaption><span>&#8220;huevo de pascua de pacman&#8221;</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
</pre></td><td class='code'><pre><code class='console'><span class='line'><span class="go">[lazaro@artema ~]$ repo-elephant </span>
</span><span class='line'><span class="go">     __</span>
</span><span class='line'><span class="go">    &#39;. \</span>
</span><span class='line'><span class="go">     &#39;- \</span>
</span><span class='line'><span class="go">      / /_         .---.</span>
</span><span class='line'><span class="go">     / | \\,.\/--.//    )</span>
</span><span class='line'><span class="go">     |  \//        )/  /</span>
</span><span class='line'><span class="go">      \  &#39; ^ ^    /    )____.----..  6</span>
</span><span class='line'><span class="go">       &#39;.____.    .___/            \._)</span>
</span><span class='line'><span class="go">          .\/.                      )</span>
</span><span class='line'><span class="go">           &#39;\                       /</span>
</span><span class='line'><span class="go">           _/ \/    ).        )    (</span>
</span><span class='line'><span class="go">          /#  .!    |        /\    /</span>
</span><span class='line'><span class="go">          \  C// #  /&#39;-----&#39;&#39;/ #  /</span>
</span><span class='line'><span class="go">       .   &#39;C/ |    |    |   |    |mrf  ,</span>
</span><span class='line'><span class="go">       \), .. .&#39;OOO-&#39;. ..&#39;OOO&#39;OOO-&#39;. ..\(,</span>
</span></code></pre></td></tr></table></div></figure>


<p>Como ya sabrán (o se darán por enterado) Arch Linux no es por release, si no que
un canal en constante desarrollo, hace como upstream, donde se depositan los
paquetes consideraros estables. Esto es lo que en distribuciones estáticas se
llamara &ldquo;repo&rdquo;. Pacman lleva la ardua tarea de mantener el sistema debidamente
actualizado. Nuestro sistema no tendrá &ldquo;actualizaciones&rdquo; si no que evolucionará
constantemente desde el &ldquo;core&rdquo;, escalando horizontalmente el sistema completo.</p>

<p>De esta manera se logra el mítico equilibrio entre estabilidad y novedad.</p>

<p>Para ello, pacman debe tener constancia local de la lista de paquetes que hay en
el upstream. Estas listas son ficheros de textos, comprimidos con gzip, que
contienen información acerca de lo que hay arriba. Por ejemplo, contiene la URL
de como descargarlos.</p>

<p>Para pacman, instalar un paquete o alar está lista, es casi la misma operación.
Se llama &ldquo;sync&rdquo; (sincronizar)</p>

<figure class='code'><figcaption><span>&#8220;-Sy&#8221;</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>pacman -Sy
</span></code></pre></td></tr></table></div></figure>


<p>Pero puedes de un solo viaje, sincronizar y actualizar todo el sistema.</p>

<figure class='code'><figcaption><span>&#8220;lo úlitmo que trajo el barco </span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>pacman -Syu
</span></code></pre></td></tr></table></div></figure>


<p>Buscar un paquete también es una operación de sincronización.</p>

<figure class='code'><figcaption><span>&#8220;buscar fulanito&#8221;</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>pacman -Ss fulanito
</span></code></pre></td></tr></table></div></figure>


<p>También puedes, bajar la lista, actualizar el sistema e instalar algo de un solo
golpe.</p>

<figure class='code'><figcaption><span>&#8220;todo junto&#8221;</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>pacman -Syu fulanito
</span></code></pre></td></tr></table></div></figure>


<p>Pacman irá a los sitios que tiene declarado en el fichero: <strong>/etc/pacman.d/mirrorlist</strong>
y bajará esos ficheros. Seguidamente los depositará en el directorio /var/lib/pacman/sync/</p>

<figure class='code'><figcaption><span>&#8220;bases de datos&#8221;</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='console'><span class='line'><span class="go">[lazaro@artema ~]$ file /var/lib/pacman/sync/*.db</span>
</span><span class='line'><span class="go">/var/lib/pacman/sync/archlinuxfr.db: gzip compressed data, last modified: Thu May 21 04:31:59 2015, from Unix</span>
</span><span class='line'><span class="go">/var/lib/pacman/sync/community.db:   gzip compressed data, last modified: Fri May 29 08:47:01 2015, from Unix</span>
</span><span class='line'><span class="go">/var/lib/pacman/sync/core.db:        gzip compressed data, last modified: Wed May 27 19:02:40 2015, from Unix</span>
</span><span class='line'><span class="go">/var/lib/pacman/sync/extra.db:       gzip compressed data, last modified: Fri May 29 04:27:15 2015, from Unix</span>
</span></code></pre></td></tr></table></div></figure>


<p>Ahora nuestro sistema sabe lo que hay &ldquo;arriba&rdquo; (en el repo) y está listo para
compararlo con lo que está &ldquo;abajo&rdquo; (instalado). La información sobre todo los
paquetes que el sistema tiene instalado, se almacena en el directorio
<strong>/var/lib/pacman/local/</strong></p>

<p>La lista es muy grande para mostrarla. Pero dentro hay directorios con la
versión de cada programa instalado. Dentro de ese subdirectorio, hay 4 ficheros
que contiene la información del paquete instalado.</p>

<p>Por ejemplo, el paquete <strong>ruby</strong>, en su versión <strong>2.2.2-1</strong> responde al
directorio <strong>/var/lib/pacman/local/ruby-2.2.2-1</strong></p>

<p>Cada directorio, contiene 4 ficheros:</p>

<figure class='code'><figcaption><span>&#8220;metainfo de un paquete instalado&#8221;</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='console'><span class='line'><span class="go">[lazaro@artema ~]$ ls /var/lib/pacman/local/ruby-2.2.2-1/</span>
</span><span class='line'><span class="go">desc  files  install  mtree</span>
</span></code></pre></td></tr></table></div></figure>


<p>El fichero <strong>desc</strong> contiene la información que describe al paquete, versión,
nombre, etc..</p>

<p>El fichero <strong>files</strong> contiene la lista de ficheros que instala dicho paquete.</p>

<p>El fichero <strong>install</strong> contiene una serie de comando disparadores, como
post_install. Dentro de install, se declaró una función llamada post_install()
que será llamada cuando el paquete termine de ser instalado.</p>

<p>Por último, <strong>mtree</strong> (que está comprimido con gz) contiene lo mismo que files,
pero con la suma MD5 de cada fichero. Esto es usado por pacman para verificar la
integridad de los archivos instalados.</p>

<p>Por ejemplo, si quisiéramos ver que ficheros contiene el paquete ruby, podríamos
ver el contenido del fichero <strong>files</strong> pero sería más fácil usar el comando
<strong>Query</strong> con el argumento <strong>list</strong></p>

<figure class='code'><figcaption><span>&#8220;pacman -Ql fulano&#8221;</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
</pre></td><td class='code'><pre><code class='console'><span class='line'><span class="go">[lazaro@artema ~]$ pacman -Ql ruby|grep &#39;/usr/bin/&#39;</span>
</span><span class='line'><span class="go">ruby /usr/bin/</span>
</span><span class='line'><span class="go">ruby /usr/bin/erb</span>
</span><span class='line'><span class="go">ruby /usr/bin/gem</span>
</span><span class='line'><span class="go">ruby /usr/bin/irb</span>
</span><span class='line'><span class="go">ruby /usr/bin/rake</span>
</span><span class='line'><span class="go">ruby /usr/bin/rdoc</span>
</span><span class='line'><span class="go">ruby /usr/bin/ri</span>
</span><span class='line'><span class="go">ruby /usr/bin/ruby</span>
</span></code></pre></td></tr></table></div></figure>


<p>El principal fichero de pacman, es <strong>/etc/pacman.conf</strong> y a diferencia de otros
package managers, este es bien sencillo. Además, es MUY personalizable.</p>

<p>Por ejemplo, la cláusala XferCommand, permite especificar que comando usar para
bajar los paquetes. Las variables, %u y %o serán enviadas como URL del paquetes
y fichero en disco.</p>

<figure class='code'><figcaption><span>&#8220;scope de pacman.conf&#8221;</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='console'><span class='line'><span class="go">[lazaro@artema ~]$ cat /etc/pacman.conf|grep Xfer</span>
</span><span class='line'><span class="gp">#</span><span class="nv">XferCommand</span> <span class="o">=</span> /usr/bin/curl --retry-delay <span class="m">5</span> --progress-bar -C - -f %u &gt; %o
</span><span class='line'><span class="go">XferCommand = /usr/bin/wget --no-cache -t 0 -T 10 --max-redirect=0 -w 5 --passive-ftp -c -O %o %u</span>
</span></code></pre></td></tr></table></div></figure>


<p>Ese es un buen ejemplo de una configuración para wget en conexiones &ldquo;hostiles&rdquo;.
Para que tengas una idea de cuan personalizable puede llegar a ser:</p>

<figure class='code'><figcaption><span>&#8220;NoExtract&#8221;</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='console'><span class='line'><span class="go">[lazaro@artema ~]$ cat /etc/pacman.conf|grep NoEx</span>
</span><span class='line'><span class="go">NoExtract = *.mo</span>
</span></code></pre></td></tr></table></div></figure>


<p>En este caso, los ficheros <strong>.mo</strong> no serán extraídos de los paquetes durante el
proceso de instalación. Como yo uso el sistema en inglés, no me interesa tener
las traducciones de sepetecientos idiomas.</p>

<p>Los paquetes que instales, irán al directorio <strong>/var/cache/pacman/pkg/</strong> y
podrías usar dicho directorio como repo para compartirlo con aquellos que no
tiene acceso a internet; o bien, llevártelo para tu casa, lugar donde te
integras al grupo antes mencionado.</p>

<p>Quizás te interese crear tu propio repo. La idea de crear un repo a partir de la
cache, le ha tirado un cabo a una pila de gente. En un viaje reciente que hice
por el oriente de la isla, cargué mi laptop con todo el software necesario he
instalé 3 servidores con arch <strong>sin conectarme a internet</strong> (vergonzosa hazaña).</p>

<p>Con esta opción:</p>

<figure class='code'><figcaption><span>&#8220;mantener paquetes&#8221;</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='console'><span class='line'><span class="go">[lazaro@artema ~]$ cat /etc/pacman.conf|grep Clea</span>
</span><span class='line'><span class="go">CleanMethod = KeepCurrent</span>
</span></code></pre></td></tr></table></div></figure>


<p>Aquellos paquetes que una vez fuero instalados se mantienen. Por tanto, supón
que quieres tener en la otra máquina (la de tu casa) &ldquo;geary&rdquo; el cliente de
correo. Simplemente lo instalas y lo desinstalas en la máquina privilegiada.</p>

<figure class='code'><figcaption><span>&#8220;cacheando paquetes&#8221;</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='console'><span class='line'><span class="go">pacman -S geary &amp;&amp; pacman -R geary</span>
</span></code></pre></td></tr></table></div></figure>


<p>Ahora el paquete está en la cache, y aunque ya no está en el sistema, se
conservará en la cache hasta que no lo borres. Claro, esto tiene como desventaja
que no se bajarán actualizaciones para ese paquete.</p>

<p>En mi caso, yo tengo este escripcito al que llamo <strong>mkrepo.sh</strong></p>

<figure class='code'><figcaption><span>mkrepo.sh</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
</pre></td><td class='code'><pre><code class='console'><span class='line'><span class="gp">#</span>!/bin/bash
</span><span class='line'>
</span><span class='line'><span class="gp">#</span> elimina esa base de datos
</span><span class='line'><span class="go">rm /var/cache/pacman/pkg/custom.db.tar.gz</span>
</span><span class='line'>
</span><span class='line'><span class="gp">#</span> crea una nueva
</span><span class='line'><span class="go">repo-add /var/cache/pacman/pkg/custom.db.tar.gz /var/cache/pacman/pkg/*.pkg.tar.xz</span>
</span><span class='line'>
</span><span class='line'><span class="gp">#</span> dime que tengo que poner
</span><span class='line'><span class="go">echo &#39;&#39;&#39;</span>
</span><span class='line'><span class="go">[mirepo]</span>
</span><span class='line'><span class="go">SigLevel = Optional TrustAll</span>
</span><span class='line'><span class="go">Server = http://localhost:8080</span>
</span><span class='line'><span class="go">&#39;&#39;&#39;</span>
</span><span class='line'><span class="gp">#</span> sírvelo con darkhttpd
</span><span class='line'><span class="go">darkhttpd /var/cache/pacman/pkg/ --chroot --port 8080</span>
</span></code></pre></td></tr></table></div></figure>


<p>Al correrlo, la cache se indexa; lista para ser usada como repo. El script hace
un <strong>echo</strong>, para recordarte como sería la configuración que debes poner en
/etc/pacman.conf para usar ese repo.</p>

<p>Finalmente, darkhttpd (un servidor web que viene con el Live de arch) sirve ese
repo.</p>

<p>Quizás tengas una memoria flash donde creas el repo. En ese caso, bastaría con
especificar una linea Server con la dirección file:///</p>

<p>Server = file:///media/MEMORIA/repo/</p>

<p>Simple verdad?</p>

<p>Pensé hacer esta entrada más larga, pero sería aburrir al lector. En cambio,
ahora ya sabes una parte, te dejo que investigues el resto.</p>

<h4>Happy Hacking!</h4>
</div>
  
  


<p>Si este art&iacute;culo te result&oacute; interesante, considere donar 0.03 BTC: <a href="/images/direccion.png">1Kg4gu3e7u8HUw8bj5NbBciRg6Y56kuFCU</a> </p>

    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2015/05/28/cambiar-user-agent-en-squid/">cambiar user agent con squid</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2015-05-28T18:46:04-04:00'><span class='date'>28/05/2015</span> <span class='time'>6:46 pm</span></time>
        
           | <a href="/blog/2015/05/28/cambiar-user-agent-en-squid/#disqus_thread"
             data-disqus-identifier="http://uranio-235.github.io/blog/2015/05/28/cambiar-user-agent-en-squid/">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>En esta sofocante tarde de verano cubano y en un lugar que no diré, me encontré
detrás de un proxy administrador por la
<a href="http://es.wikipedia.org/wiki/Schutzstaffel">Schutzstaffel</a>. Lo que no se
parezca a un navegador, NO PASA. Por tanto, Ruby, Wget y demás, NO pinchan.</p>

<p>Por suerte, tengo la costumbre de usar un squid local, para no tener que estar
configurando el navegador. En ese squid declaro como padre el squid del momento
(ya sea salud u otro) y ahí pongo el nombre de usuario con la contraseña una
sola vez. Si estás en cuba y tienes una laptop con linux, te aconsejo que acates
esa costumbre.</p>

<p>Solución:</p>

<p>Reescribir el encabezado User-Agent de las peticiones en el squid local. Así
todas salen de un supuesto firefox.</p>

<figure class='code'><figcaption><span>&#8220;/etc/squid/squid.conf&#8221;</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='squidconf'><span class='line'>request_header_access<span class="w"> </span><span class="k">User</span>-Agent<span class="w"> </span><span class="no">deny</span><span class="w"> </span><span class="no">all</span><span class="w"></span>
</span><span class='line'>request_header_replace<span class="w"> </span><span class="k">User</span>-Agent<span class="w"> </span>Mozilla/5.0<span class="w"> </span>(X11;<span class="w"> </span>U;<span class="w"> </span>Linux<span class="w"> </span>i686;<span class="w"> </span>en-US;<span class="w"> </span>rv:1.8.1.4)<span class="w"> </span>Gecko/20070515<span class="w"> </span>Firefox/2.0.0.4<span class="w"></span>
</span></code></pre></td></tr></table></div></figure>


<p>   <blockquote><p>Al carajo albañiles que se acabó la mezcla.</p></blockquote></p>
</div>
  
  


<p>Si este art&iacute;culo te result&oacute; interesante, considere donar 0.07 BTC: <a href="/images/direccion.png">1Kg4gu3e7u8HUw8bj5NbBciRg6Y56kuFCU</a> </p>

    </article>
  
  <div class="pagination">
    
      <a class="prev" href="/posts/14">&larr; Older</a>
    
    <a href="/blog/archives">Blog Archives</a>
    
    <a class="next" href="/posts/12">Newer &rarr;</a>
    
  </div>
</div>
<aside class="sidebar">
  
    <section>

	<h1>Lo m&aacute;s reciente</h1>

	<ul id="recent_posts">
		
		<li class="post">
			<a href="/blog/2017/05/13/instalar-node-rapido/">instalar node rápido</a>
		</li>
		
		<li class="post">
			<a href="/blog/2017/05/10/ssl-ca-local/">autoridad certificadora</a>
		</li>
		
		<li class="post">
			<a href="/blog/2017/04/08/xen-y-virt-manager/">xen y virt-manager</a>
		</li>
		
		<li class="post">
			<a href="/blog/2017/03/29/jugar-teeworlds-en-lan/">jugar teeworlds en LAN</a>
		</li>
		
		<li class="post">
			<a href="/blog/2017/03/17/nueva-vm-siempre-es-pv/">nueva VM siempre es PV</a>
		</li>
		
		<li class="post">
			<a href="/blog/2017/03/04/rainloop-en-debian/">rainloop en debian</a>
		</li>
		
		<li class="post">
			<a href="/blog/2017/03/03/nginx-y-websocket/">nginx y websocket</a>
		</li>
		
		<li class="post">
			<a href="/blog/2017/03/03/pkg-tras-un-proxy/">pkg tras un proxy</a>
		</li>
		
		<li class="post">
			<a href="/blog/2017/03/01/portknocking-en-freebsd/">portknocking en freebsd</a>
		</li>
		
		<li class="post">
			<a href="/blog/2017/03/01/bind-en-infomed/">bind en infomed</a>
		</li>
		
		<li class="post">
			<a href="/blog/2017/03/01/qos-con-tc/">QoS con tc o dummynet</a>
		</li>
		
		<li class="post">
			<a href="/blog/2017/02/22/bind-personal/">bind personal</a>
		</li>
		
		<li class="post">
			<a href="/blog/2017/02/05/dns-con-vistas/">dns con vistas</a>
		</li>
		
		<li class="post">
			<a href="/blog/2017/02/01/ipfw-simple-y-consiso/">ipfw simple y conciso</a>
		</li>
		
		<li class="post">
			<a href="/blog/2017/01/28/freebsd-11/">mis crónicas con freebsd</a>
		</li>
		
		<li class="post">
			<a href="/blog/2017/01/21/palito/">animación del palito</a>
		</li>
		
		<li class="post">
			<a href="/blog/2017/01/20/datatables-espanol/">DataTables en español</a>
		</li>
		
		<li class="post">
			<a href="/blog/2017/01/09/tendencias-tecnologicas/">tendencias tecnológicas</a>
		</li>
		
		<li class="post">
			<a href="/blog/2017/01/09/flasheando-modem-al-s4/">flasheando modem al S4</a>
		</li>
		
		<li class="post">
			<a href="/blog/2017/01/02/rails-assets/">rails-assets</a>
		</li>
		
		<li class="post">
			<a href="/blog/2016/12/29/xgproyect/">xgproyect</a>
		</li>
		
		<li class="post">
			<a href="/blog/2016/12/27/cambiar-mac-a-un-nano/">cambiar mac a un nano</a>
		</li>
		
		<li class="post">
			<a href="/blog/2016/12/19/phpmyadmin-multiples-servidores/">phpmyadmin múltiples servidores</a>
		</li>
		
		<li class="post">
			<a href="/blog/2016/12/19/iptables-y-ftp/">iptables y ftp</a>
		</li>
		
		<li class="post">
			<a href="/blog/2016/12/09/rails-en-alpine/">rails en alpine</a>
		</li>
		
		<li class="post">
			<a href="/blog/2016/11/24/squid3-bloquear-user-agent/">squid3 bloquear user-agent</a>
		</li>
		
		<li class="post">
			<a href="/blog/2016/11/22/redimensionar-lvm/">redimensionar lvm</a>
		</li>
		
		<li class="post">
			<a href="/blog/2016/11/20/sysinfo-en-el-motd/">sysinfo en el motd</a>
		</li>
		
		<li class="post">
			<a href="/blog/2016/11/14/openvpn-user-plus-pass/">openvpn user+pass</a>
		</li>
		
		<li class="post">
			<a href="/blog/2016/10/22/el-domain-pop/">recolección DomainPOP</a>
		</li>
		
		<li class="post">
			<a href="/blog/2016/10/22/domainpop-con-postfix/">domainpop con postfix</a>
		</li>
		
		<li class="post">
			<a href="/blog/2016/10/22/tunel-6in4/">túnel 6in4</a>
		</li>
		
		<li class="post">
			<a href="/blog/2016/10/22/cortafuegos-ipv6-sencillo/">cortafuegos ipv6 sencillo</a>
		</li>
		
		<li class="post">
			<a href="/blog/2016/10/22/poniendo-direcciones-ipv6/">las reglas del juego ipv6</a>
		</li>
		
		<li class="post">
			<a href="/blog/2016/10/22/ipv6/">la resolución 185/2016</a>
		</li>
		
		<li class="post">
			<a href="/blog/2016/10/04/dirver-broadcom/">driver broadcom</a>
		</li>
		
		<li class="post">
			<a href="/blog/2016/09/22/audifonos-blutu/">audífonos blutú</a>
		</li>
		
		<li class="post">
			<a href="/blog/2016/09/16/dispatcher-script/">dispatcher script</a>
		</li>
		
		<li class="post">
			<a href="/blog/2016/08/16/password-de-windows/">password de windows</a>
		</li>
		
		<li class="post">
			<a href="/blog/2016/08/15/repositorio-de-iso-en-xen/">Local ISO en XenServer</a>
		</li>
		
		<li class="post">
			<a href="/blog/2016/07/31/kiwix-como-servicio/">kiwix como servicio</a>
		</li>
		
		<li class="post">
			<a href="/blog/2016/07/17/hibernar-en-archlinux/">hibernar en archlinux</a>
		</li>
		
		<li class="post">
			<a href="/blog/2016/07/17/rsync-basico/">rsync básico</a>
		</li>
		
		<li class="post">
			<a href="/blog/2016/06/20/correos-del-cron/">correos del cron</a>
		</li>
		
		<li class="post">
			<a href="/blog/2016/06/18/dkim-y-spf-en-postfix/">dkim y spf en postfix</a>
		</li>
		
		<li class="post">
			<a href="/blog/2016/06/06/desacelerar-mouse/">desacelerar mouse</a>
		</li>
		
		<li class="post">
			<a href="/blog/2016/05/12/deshabilitar-historial-de-bash/">deshabilitar historial de bash</a>
		</li>
		
		<li class="post">
			<a href="/blog/2016/04/29/reparar-archivos-de-innodb/">reparar archivos de innodb</a>
		</li>
		
		<li class="post">
			<a href="/blog/2016/04/01/wpa2-con-freeradius/">WPA2 con freeradius</a>
		</li>
		
		<li class="post">
			<a href="/blog/2016/03/14/misterio-con-ethernet-foxconn/">misterio con ethernet foxconn</a>
		</li>
		
		<li class="post">
			<a href="/blog/2016/03/07/cargar-rvm/">cargar rvm</a>
		</li>
		
		<li class="post">
			<a href="/blog/2016/02/22/data-confirm-en-un-boton/">data confirm en un boton</a>
		</li>
		
		<li class="post">
			<a href="/blog/2016/02/20/hooks-de-pacman/">los hooks de pacman</a>
		</li>
		
		<li class="post">
			<a href="/blog/2016/02/01/arch-compartir-paquetes/">arch compartir paquetes</a>
		</li>
		
		<li class="post">
			<a href="/blog/2016/01/25/hostname-arbitrario-en-bind9/">bind9, registro arbitratio</a>
		</li>
		
		<li class="post">
			<a href="/blog/2015/12/14/servidor-jabber-con-prosody/">servidor jabber con prosody</a>
		</li>
		
		<li class="post">
			<a href="/blog/2015/11/29/mc-demora-en-abrir/">mc demora en abrir</a>
		</li>
		
		<li class="post">
			<a href="/blog/2015/11/23/desmume-ultralento/">desmume ultralento</a>
		</li>
		
		<li class="post">
			<a href="/blog/2015/11/12/rc-dot-local-en-systemd/">rc.local en systemd</a>
		</li>
		
		<li class="post">
			<a href="/blog/2015/11/03/las-mujeres-gordas/">las mujeres gordas</a>
		</li>
		
		<li class="post">
			<a href="/blog/2015/11/03/tls-y-ssl-en-postfix/">tls y ssl en postfix</a>
		</li>
		
		<li class="post">
			<a href="/blog/2015/10/20/compartir-la-wifi/">compartir la wifi</a>
		</li>
		
		<li class="post">
			<a href="/blog/2015/10/18/systemd-timesyncd/">systemd-timesyncd</a>
		</li>
		
		<li class="post">
			<a href="/blog/2015/10/15/repo-de-fdroid/">repo de fdroid</a>
		</li>
		
		<li class="post">
			<a href="/blog/2015/10/08/prawn-pdf-con-ruby/">prawn, pdf con ruby</a>
		</li>
		
		<li class="post">
			<a href="/blog/2015/09/17/dhcp-por-grupos/">dhcp por grupos</a>
		</li>
		
		<li class="post">
			<a href="/blog/2015/09/10/plymouth-boot-screen/">plymouth boot screen</a>
		</li>
		
		<li class="post">
			<a href="/blog/2015/09/07/git-clone-rapido/">git clone rápido</a>
		</li>
		
		<li class="post">
			<a href="/blog/2015/09/07/archlinux-dos-kernel/">archlinux con dos kernel</a>
		</li>
		
		<li class="post">
			<a href="/blog/2015/08/28/compute-remote-uptime/">compute remote uptime</a>
		</li>
		
		<li class="post">
			<a href="/blog/2015/07/24/transliteracion-del-coran/">transliteración del corán</a>
		</li>
		
		<li class="post">
			<a href="/blog/2015/07/12/date-select-en-espanol/">date_select en español</a>
		</li>
		
		<li class="post">
			<a href="/blog/2015/07/11/openvas-en-archlinux/">OpenVAS en Archlinux</a>
		</li>
		
		<li class="post">
			<a href="/blog/2015/07/05/anadir-verbo-a-un-scaffold/">añadir verbo a un scaffold</a>
		</li>
		
		<li class="post">
			<a href="/blog/2015/06/30/bootstrap-en-rails-4/">bootstrap en rails 4</a>
		</li>
		
		<li class="post">
			<a href="/blog/2015/06/21/se-dice-dios-no-ala/">se dice DIOS, no alá</a>
		</li>
		
		<li class="post">
			<a href="/blog/2015/06/01/pacman-bajo-el-microscopio/">pacman bajo el microscopio</a>
		</li>
		
		<li class="post">
			<a href="/blog/2015/05/28/cambiar-user-agent-en-squid/">cambiar user agent con squid</a>
		</li>
		
		<li class="post">
			<a href="/blog/2015/05/26/nic-bonding/">NIC bonding</a>
		</li>
		
		<li class="post">
			<a href="/blog/2015/05/23/ltsp-en-debian8-y-salud/">ltsp en debian8 y salud</a>
		</li>
		
		<li class="post">
			<a href="/blog/2015/02/21/sasl-homeclub-only/">SASL homeclub only</a>
		</li>
		
		<li class="post">
			<a href="/blog/2015/02/19/delay-pools-de-squid/">delay pools de squid</a>
		</li>
		
		<li class="post">
			<a href="/blog/2015/02/12/rails-con-mongodb/">rails con mongodb</a>
		</li>
		
		<li class="post">
			<a href="/blog/2015/02/06/zentyal/">Zentyal</a>
		</li>
		
		<li class="post">
			<a href="/blog/2014/10/28/proxy-automatico/">proxy automático</a>
		</li>
		
		<li class="post">
			<a href="/blog/2014/09/24/verdial-y-el-imagis/">la pena de verdial</a>
		</li>
		
		<li class="post">
			<a href="/blog/2014/09/05/palos-de-wordpress/">palos de wordpress</a>
		</li>
		
		<li class="post">
			<a href="/blog/2014/08/25/el-server-de-correo/">el servidor de correo</a>
		</li>
		
		<li class="post">
			<a href="/blog/2014/08/15/subdesarrollo/">subdesarrollo</a>
		</li>
		
		<li class="post">
			<a href="/blog/2014/08/11/ocs-inventory/">ocs-inventory</a>
		</li>
		
		<li class="post">
			<a href="/blog/2014/07/08/select-en-bootstrap/">select en bootstrap</a>
		</li>
		
		<li class="post">
			<a href="/blog/2014/07/05/empirico/">empíricos</a>
		</li>
		
		<li class="post">
			<a href="/blog/2014/06/10/autenticador-sql-en-el-proxy/">autenticador SQL en el proxy</a>
		</li>
		
		<li class="post">
			<a href="/blog/2014/06/09/postfix-entrando-en-el-baile/">postfix entrando en el baile</a>
		</li>
		
		<li class="post">
			<a href="/blog/2014/06/09/dovecot-entra-en-el-baile/">dovecot entra en el baile</a>
		</li>
		
		<li class="post">
			<a href="/blog/2014/05/02/wordpress-para-todos/">wordpress para todos</a>
		</li>
		
		<li class="post">
			<a href="/blog/2014/04/18/lxc-en-salud/">lxc en salud</a>
		</li>
		
		<li class="post">
			<a href="/blog/2014/04/06/squid-en-infomed/">el toten de proxies</a>
		</li>
		
		<li class="post">
			<a href="/blog/2014/04/04/en-la-cumbre-del-vedado/">el &#8220;calisto&#8221; garcía</a>
		</li>
		
	</ul>
	
</section>





  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-68987437-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


  
</aside>

    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2017 - låzaro -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  

<script type="text/javascript">
      var disqus_shortname = 'uranio-235';
      
        
        var disqus_script = 'count.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = '//' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>



<div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) {return;}
  js = d.createElement(s); js.id = id; js.async = true;
  js.src = "//connect.facebook.net/en_US/all.js#appId=212934732101925&xfbml=1";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>



  <script type="text/javascript">
    (function() {
      var script = document.createElement('script'); script.type = 'text/javascript'; script.async = true;
      script.src = 'https://apis.google.com/js/plusone.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(script, s);
    })();
  </script>



  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = '//platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-68987437-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>



</body>
</html>
