
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>El SysAdmin del 3er Mundo</title>
  <meta name="author" content="låzaro">

  
  <meta name="description" content="iptables y ftp 19/12/2016 11:34 am | Comments Instalé un proftpd y le puse un cortafuegos a dicho servidor. Al instante,
nagios reportó que el FTP &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://uranio-235.github.io/posts/3/">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/atom.xml" rel="alternate" title="El SysAdmin del 3er Mundo" type="application/atom+xml">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="/javascripts/libs/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="//fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="//fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-68987437-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


  
</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/">El SysAdmin del 3er Mundo</a></h1>
  
    <h2>luchando contra el subdesarrollo en todos los frentes</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="http://www.google.com" method="get">
  <fieldset role="search">
    <input type="hidden" name="sitesearch" value="uranio-235.github.io">
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/blog/archives">Archivo</a></li>
  <li><a href="/blog/categories/rails/">Ruby on Rails</a></li>
  <li><a href="/blog/categories/islam/">Islam</a></li>
  <li><a href="/blog/categories/destacado/">Destacado</a></li>
  <li><a href="/blog/categories/razonemos/">Razonemos</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div class="blog-index">
  
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2016/12/19/iptables-y-ftp/">iptables y ftp</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2016-12-19T11:34:13-05:00'><span class='date'>19/12/2016</span> <span class='time'>11:34 am</span></time>
        
           | <a href="/blog/2016/12/19/iptables-y-ftp/#disqus_thread"
             data-disqus-identifier="http://uranio-235.github.io/blog/2016/12/19/iptables-y-ftp/">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Instalé un proftpd y le puse un cortafuegos a dicho servidor. Al instante,
nagios reportó que el FTP pinchaba, así que di por terminada la tarea. Sin
embargo, a las dos horas un usuario me pregunta si &ldquo;el ftp está caído&rdquo;.</p>

<p>Resulta que los puertos pasivos, se comportan de una manera &ldquo;inesperada&rdquo;. Una
solución común es abrir el rango de puertos que se configuran como pasivos, pero
eso no me cuadra.</p>

<p>Por suerte, linux cuenta con un módulo especial llamado <strong>ip_conntrack_ftp</strong>,
especial para el tema.</p>

<p>Si quieres ver más detalles y otras soluciones, llégate aquí:</p>

<p><a href="http://unix.stackexchange.com/questions/93554/iptables-to-allow-incoming-ftp">http://unix.stackexchange.com/questions/93554/iptables-to-allow-incoming-ftp</a></p>
</div>
  
  


<p>Si este art&iacute;culo te result&oacute; interesante, considere donar 0.05 BTC: <a href="/images/direccion.png">1Kg4gu3e7u8HUw8bj5NbBciRg6Y56kuFCU</a> </p>

    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2016/12/09/rails-en-alpine/">rails en alpine</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2016-12-09T20:14:28-05:00'><span class='date'>09/12/2016</span> <span class='time'>8:14 pm</span></time>
        
           | <a href="/blog/2016/12/09/rails-en-alpine/#disqus_thread"
             data-disqus-identifier="http://uranio-235.github.io/blog/2016/12/09/rails-en-alpine/">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p><img class="right" src="/images/shinkasen.jpg" width="400" height="500" title="" ></p>

<p>Finalmente el boom de docker llegó a Cuba. En mi caso personal, hace rato lo uso
para desplegar aplicaciones de Ruby on Rails y siempre me pareció que debian era
la mejor base para hacer una imagen. Si bien, hay containers de rails, eso de
usar en producción, con una distro hecha por un cualquiera, como que me da cosa.
Hacer una a partir de la oficial, es más sencillo que verificar la integridad de
una ya hecha.</p>

<p>AlpineLinux para docker es un batazo, eso es in-negable. Pero instalar rails en
alpine, resultó ser más complicado de lo que yo pensaba.</p>

<figure class='code'><figcaption><span>&#8220;docker y alpine&#8221;</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>docker pull alpine
</span><span class='line'>docker run -ti alpine /bin/sh
</span></code></pre></td></tr></table></div></figure>


<p>Ante todo necesitamos instalar las librerías requeridas para compilar, sobre
todo las dependencias de nokogiri. Instalaremos los paquetes: build-base,
nodejs, tzdata, libxml2-dev,  libxslt-dev, sqlite-dev y claro, ruby</p>

<p>En este caso, usaremos sqlite como ejemplo, pero a ti quizás te cuadre más con
<strong>mariadb-dev</strong> (mysql) o <strong>postgresql-dev</strong></p>

<figure class='code'><figcaption><span>&#8220;apk add&#8221;</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>apk update
</span><span class='line'>apk add build-base nodejs tzdata libxml2-dev  libxslt-dev
</span><span class='line'>apk add sqlite-dev mariadb-dev postgresql-dev
</span><span class='line'>apk add ruby ruby-dev ca-certificates libffi libffi-dev
</span></code></pre></td></tr></table></div></figure>


<p>Como nokogiri es un caso tan peculiar, le diremos que compile usando las
librerías del sistema, para ellos lo instalaremos aparte. Alpine <strong>no</strong> usa
glibc, usa musl-libc y nokogiri NO compila, por tanto, hay que usar las
librerías del sistema; en vez de las que provee nokogiri.</p>

<figure class='code'><figcaption><span>&#8220;nokogiri&#8221;</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>gem inst --no-document nokogiri -- --use-system-libraries
</span></code></pre></td></tr></table></div></figure>


<p>Con eso ya tenemos los cimientos echados. Nuestra imagen habrá crecido 200
megas. Ahora vamos instalar rails.</p>

<figure class='code'><figcaption><span>&#8220;gem&#8221;</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>gem inst --no-document rails io-console
</span></code></pre></td></tr></table></div></figure>


<p>El paso de instalar rails como gema del sistema es cuestionable para una pila de
gente; pero ten en cuenta que es la manera de saber si rails funciona, recuerda
que esto es un ejemplo. La primera vez me topé con que debía instalar
<strong>io-console</strong>, ya que a pesar de ser dependencia, nadie la requería. Bueno a
ver&hellip;</p>

<figure class='code'><figcaption><span>&#8220;rails&#8221;</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>/ <span class="c"># rails -v</span>
</span><span class='line'>Rails 5.0.0.1
</span></code></pre></td></tr></table></div></figure>


<p>Tengo una imagen llamada &ldquo;alpine_ruby&rdquo; en la que tengo todo lo necesario para
instalar y No tengo la gema de rails instalada. Entonces, con cada versión de
rails, por ejemplo, derivar de &ldquo;alpine_ruby&rdquo; la imagen alpine_rails50 , así
cuando salga el rails 5.1 le llamaré alpine_rails51</p>
</div>
  
  


<p>Si este art&iacute;culo te result&oacute; interesante, considere donar 0.06 BTC: <a href="/images/direccion.png">1Kg4gu3e7u8HUw8bj5NbBciRg6Y56kuFCU</a> </p>

    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2016/11/24/squid3-bloquear-user-agent/">squid3 bloquear user-agent</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2016-11-24T14:36:13-05:00'><span class='date'>24/11/2016</span> <span class='time'>2:36 pm</span></time>
        
           | <a href="/blog/2016/11/24/squid3-bloquear-user-agent/#disqus_thread"
             data-disqus-identifier="http://uranio-235.github.io/blog/2016/11/24/squid3-bloquear-user-agent/">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p><img class="right" src="/images/noiexplore.png" width="400" height="500" title="" ></p>

<p>Recién, he tenido algunos problemas con descargadores multi-hilos que se chupan
el ancho de banda y se cagan en los delay_pools. Buscando como bloquear dichos
descargadores, el colega Agustín Ybarra me recomienda bloquear los user_agent.</p>

<p>Pero pensándolo bien, resolví unos cuantos problemas. Pues por ejemplo, google
play service de los teléfonos android, consume muchísimo y resuelve poco, de
forma que el que navega en un delay_pool, ve afectado su ancho de banda por
cosas que ignora.</p>

<p>Solución, bloquear los User-Agent. La idea suena bien, pero primero hay que
loguear los user agent. Para ellos usaremos un custom_log de squid, loguearemos
los usuarios y los user-agent. A mi me quedó así:</p>

<figure class='code'><figcaption><span>&#8220;squid.conf&#8221;</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="c"># loguea los user-agent</span>
</span><span class='line'>logformat useragent  %un <span class="s2">&quot;%{User-Agent}&gt;h&quot;</span>
</span><span class='line'>access_log daemon:/var/log/squid3/user_agent.log useragent
</span></code></pre></td></tr></table></div></figure>


<p>Ahora tenemos el fichero <em>user_agent.log</em>, logueando usuario y user_agent; claro
está, podría loguear, usuario, user-agent y url, pero la linea queda muy larga.</p>

<p>Una vez que hallas encontrado el user-agent que te moleste, crea una ACL
<strong>arriba</strong> de la ACL que autorize la navegación.</p>

<figure class='code'><figcaption><span>&#8220;squid.conf&#8221;</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="c"># por ejemplo, blqueamos zapya y se fana</span>
</span><span class='line'>acl zapya browser ^com<span class="se">\.</span>dewmobile
</span><span class='line'>http_access deny zapya
</span><span class='line'>http_reply_access deny zapya
</span></code></pre></td></tr></table></div></figure>


<p>Seguiré aquí, como <a href="https://es.wikipedia.org/wiki/The_Catcher_in_the_Rye">el pescador del centeno</a>, esperando a que vuelva a usar su descargadorcito multi-hilo de mierda&hellip; aunque seguro puede cambiarle el user-agent.</p>
</div>
  
  


<p>Si este art&iacute;culo te result&oacute; interesante, considere donar 0.06 BTC: <a href="/images/direccion.png">1Kg4gu3e7u8HUw8bj5NbBciRg6Y56kuFCU</a> </p>

    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2016/11/22/redimensionar-lvm/">redimensionar lvm</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2016-11-22T21:00:22-05:00'><span class='date'>22/11/2016</span> <span class='time'>9:00 pm</span></time>
        
           | <a href="/blog/2016/11/22/redimensionar-lvm/#disqus_thread"
             data-disqus-identifier="http://uranio-235.github.io/blog/2016/11/22/redimensionar-lvm/">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Este post es a método de memorando, ya que SIEMPRE se me olvida como hacerlo.</p>

<p>En materia de virtualización, el sistema de plantillas nunca me ha gustado,
<strong>porque NO SÉ quién instala esos sistemas operativos ni como.</strong></p>

<p><strong>Yo prefiero</strong> por ejemplo, instalar un debian, acomodarle todo a mi manera y
usar esa instalación para generar nuevas máquinas, con todo ya listo. Por
ejemplo, un prototipo de firewall, las configuraciones de interfaz puesta con
dhcp, pero una configuración estática bien comentada, etc..</p>

<p>Mantengo esa máquina detenida y la arranco de vez en cuando para actualizar.
Cuando voy a hacer una nueva, <strong>simplemente clono esa máquina</strong>.</p>

<p>Prefiero llamarlo <strong>matriz</strong> que <em>plantilla</em>. El resto del tiempo, dicha máquina
permanece detenida (apagada) evitando así desgaste, envejecimiento, generación
de logs, etc&hellip;</p>

<p>Eso en la práctica, es lo mismo que una plantilla (para los criticones y amantes
de la moda).</p>

<p>Un inconveniente que afronté al principio con esto, fue &ldquo;el tamaño asignado al
disco duro&rdquo;. Por ejemplo, el servidor de correo que me lleva 500 gigas, mientras
que en el sistema de monitoreo (nagios) solo se lleva 5 gigas.</p>

<p>La matriz tiene un disco de 5 gigas donde se instaló todo. Sobra espacio, ya que
borrando /usr/share/doc/ y la cache de apt, se quedo en menos de un giga. El
problema (con Xen) viene a la hora de agrandar el disco.</p>

<p>No se como proxmox maneja esa situación y sinceramente, <strong>no me interesa</strong>, ya
que:</p>

<p><strong>LVM resuelve el problema!</strong></p>

<p>Si no tienes la costumbre de instalar sobre LVM, deberías hacértela&hellip; Es muy
versátil.</p>

<p>BTRfs es otra buena opción, pero su rendimiento decae mucho con el tiempo (<strong>mi
experiencia</strong>).</p>

<p>Añadir un disco al volumen lógico y aumentar su tamaño <strong>resuelve el problema</strong>.</p>

<p>Claro, el sistema de archivos que instalaste, debe soportar tal operación, pero
por suerte, ext4 lo hace perfectamente y sin tener que desmontar el sistema de
archivos.</p>

<p>El problema es que <strong>NUNCA ME ACUERDO</strong> de los comandos para redimensionar el
volumen lógico.</p>

<figure class='code'><figcaption><span>&#8220;la nota&#8221;</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>pvcreate /dev/xvdb
</span><span class='line'>vgextend lvm /dev/xvdb
</span><span class='line'>lvm lvextend -l +100%FREE /dev/lvm/lv1
</span><span class='line'>resize2fs -p /dev/lvm/lv1
</span></code></pre></td></tr></table></div></figure>


<p>Note que mi grupo de volúmenes se llama <strong>lvm</strong> y que el volumen lógico se llama
<strong>lv1</strong> (no soy muy creativo con nombres para lvm). O sea, el disco quedaría
así:</p>

<h4>/dev/mapper/lvm-lv1</h4>

<p><strong>Nota para los retardados:</strong> <em>El dispositivo /dev/xvdb es OTRO disco que se le
añadió a la máquina para aumentar su espacio. Tenía /dev/xvda con 5 gigas y se
le añádió otro disco, el llamado /dev/xvdb, con más espacio. Oséase colocaste
otro disco en la máquina virtual o simplemente conectaste otro disco duro en el
canal sata de una máquina física</em></p>

<p>Entonces, linea por linea, en cámara lenta:</p>

<p>1- Convierte el disco /dev/xvdb en un volumen físico (mete el disco pal saco de
LVM) En mi caso, el  grupo de volúmenes se llama <strong>lvm</strong>, así que:</p>

<p>2- Extenderemos el grupo llamado <strong>lvm</strong> añadiendo el volumen físico
<strong>/dev/xvdb</strong> al volumen lógico <strong>lv1</strong>.</p>

<p>3- La parte que siempre se me olvida (el parámetro está raro con cojone)
Redimensionar el volumen lógico <strong>lv1</strong> a su máxima capacidad.</p>

<p>4- Por último, redimensionar el ext4 en <strong>/dev/lvm/lv1</strong> a su máxima capacidad.</p>

<p>Y listo! Ya tienes tu disco del tamaño que te de la gana ;-)</p>

<p>Puedes correr <strong>lvmdiskscan -l</strong> para cerciorarte de que todo esté como esperas,
no sea que hallas metido la delicada.</p>
</div>
  
  


<p>Si este art&iacute;culo te result&oacute; interesante, considere donar 0.09 BTC: <a href="/images/direccion.png">1Kg4gu3e7u8HUw8bj5NbBciRg6Y56kuFCU</a> </p>

    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2016/11/20/sysinfo-en-el-motd/">sysinfo en el motd</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2016-11-20T17:13:27-05:00'><span class='date'>20/11/2016</span> <span class='time'>5:13 pm</span></time>
        
           | <a href="/blog/2016/11/20/sysinfo-en-el-motd/#disqus_thread"
             data-disqus-identifier="http://uranio-235.github.io/blog/2016/11/20/sysinfo-en-el-motd/">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p><img class="right" src="/images/sysinfo.png" width="400" height="500" title="" ></p>

<p>Desde que lo vi en unbuntu server, había querido hacer que mi servidores
mostraran un overview en el <a href="https://en.wikipedia.org/wiki/Motd_(Unix">MOTD</a>)</p>

<p>Al menos debian, tiene una manera de cambiar el MOTD dinamicamente. Para sazonar
bien el MOTD, vamos a usar figlet, una aplicación que genera letras en ascii-art a
partir de una palabra dada.</p>

<figure class='code'><figcaption><span>&#8220;instalando todo&#8221;</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>aptitude install figlet
</span></code></pre></td></tr></table></div></figure>


<p>El directorio <strong>/etc/update-motd.d/</strong> ejecutará en orden alfabético (o numérico
en nuestro caso) aquellos script cuya salida estandard, compondrán nuestro MOTD.</p>

<figure class='code'><figcaption><span>&#8220;aprovisionando el update-motd.d&#8221;</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>mkdir /etc/update-motd.d/
</span><span class='line'><span class="nb">cd</span> /etc/update-motd.d/
</span><span class='line'>touch 00-header <span class="o">&amp;&amp;</span> touch 01-sysinfo <span class="o">&amp;&amp;</span> touch 02-footer
</span><span class='line'>chmod +x /etc/update-motd.d/*
</span></code></pre></td></tr></table></div></figure>


<p>Finalmente, nos echamos el MOTD de debian por defecto; que no deja de
restregarnos en cara la falta de garantía.</p>

<p>Además, el fichero <strong>/var/run/motd</strong> contendrá nuestro motd resultante, así que
lo lincamos con el que borramos.</p>

<figure class='code'><figcaption><span>&#8220;aprovisionando el update-motd.d&#8221;</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>rm /etc/motd
</span><span class='line'>ln -s /var/run/motd /etc/motd
</span></code></pre></td></tr></table></div></figure>


<p>Por una cuestión de organización, usaremos 3 ficheros:</p>

<p><strong>00-header</strong> con lo que queremos poner primero. En este caso, el nombre y
version de la distribución, además de un mensajito de bienvenida.</p>

<figure class='code'><figcaption><span>&#8220;00-header&#8221;</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="c">#!/bin/bash</span>
</span><span class='line'><span class="o">[</span> -r /etc/lsb-release <span class="o">]</span> <span class="o">&amp;&amp;</span> . /etc/lsb-release
</span><span class='line'><span class="k">if</span> <span class="o">[</span> -z <span class="s2">&quot;$DISTRIB_DESCRIPTION&quot;</span> <span class="o">]</span> <span class="o">&amp;&amp;</span> <span class="o">[</span> -x /usr/bin/lsb_release <span class="o">]</span><span class="p">;</span> <span class="k">then</span>
</span><span class='line'>        <span class="nv">DISTRIB_DESCRIPTION</span><span class="o">=</span><span class="k">$(</span>lsb_release -s -d<span class="k">)</span>
</span><span class='line'><span class="k">fi</span>
</span><span class='line'>figlet <span class="k">$(</span>hostname<span class="k">)</span>
</span><span class='line'><span class="nb">printf</span> <span class="s2">&quot;\n&quot;</span>
</span><span class='line'><span class="nb">printf</span> <span class="s2">&quot;Welcome to %s (%s).\n&quot;</span> <span class="s2">&quot;$DISTRIB_DESCRIPTION&quot;</span> <span class="s2">&quot;$(uname -r)&quot;</span>
</span><span class='line'><span class="nb">printf</span> <span class="s2">&quot;\n&quot;</span>
</span></code></pre></td></tr></table></div></figure>


<p>Yo instalo los sistemas en inglés, así que para mantener todo parejo, escribimos
<em>güelcome</em> y lo hacemos con <strong>printf</strong> para procesar mejor los &ldquo;\n&rdquo; y que pinche
sin importar la shell que se esté usando.</p>

<p>El segundo fichero será <strong>01-sysinfo</strong> y contendrá la parte linda, de la memoria
RAM en uso, el CPU, la carga y la dirección ip de la primera interfaz.</p>

<figure class='code'><figcaption><span>&#8220;01-sysinfo&#8221;</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="c">#!/bin/bash</span>
</span><span class='line'><span class="nv">date</span><span class="o">=</span><span class="sb">`</span>date<span class="sb">`</span>
</span><span class='line'><span class="nv">load</span><span class="o">=</span><span class="sb">`</span>cat /proc/loadavg <span class="p">|</span> awk <span class="s1">&#39;{print $1}&#39;</span><span class="sb">`</span>
</span><span class='line'><span class="nv">root_usage</span><span class="o">=</span><span class="sb">`</span>df -h / <span class="p">|</span> awk <span class="s1">&#39;/\// {print $(NF-1)}&#39;</span><span class="sb">`</span>
</span><span class='line'><span class="nv">memory_usage</span><span class="o">=</span><span class="sb">`</span>free -m <span class="p">|</span> awk <span class="s1">&#39;/Mem:/ { total=$2 } /buffers\/cache/ { used=$3 } END { printf(&quot;%3.1f%%&quot;, used/total*100)}&#39;</span><span class="sb">`</span>
</span><span class='line'><span class="nv">swap_usage</span><span class="o">=</span><span class="sb">`</span>free -m <span class="p">|</span> awk <span class="s1">&#39;/Swap/ { printf(&quot;%3.1f%%&quot;, &quot;exit !$2;$3/$2*100&quot;) }&#39;</span><span class="sb">`</span>
</span><span class='line'><span class="nv">users</span><span class="o">=</span><span class="sb">`</span>users <span class="p">|</span> wc -w<span class="sb">`</span>
</span><span class='line'><span class="nb">time</span><span class="o">=</span><span class="sb">`</span>uptime <span class="p">|</span> grep -ohe <span class="s1">&#39;up .*&#39;</span> <span class="p">|</span> sed <span class="s1">&#39;s/,/\ hours/g&#39;</span> <span class="p">|</span> awk <span class="s1">&#39;{ printf $2&quot; &quot;$3 }&#39;</span><span class="sb">`</span>
</span><span class='line'><span class="nv">processes</span><span class="o">=</span><span class="sb">`</span>ps aux <span class="p">|</span> wc -l<span class="sb">`</span>
</span><span class='line'><span class="nv">ip</span><span class="o">=</span><span class="sb">`</span>ip a  s dev eth0<span class="p">|</span>grep inet<span class="p">|</span>awk <span class="s1">&#39;{print $2}&#39;</span><span class="p">|</span>cut -d <span class="s1">&#39;/&#39;</span> -f 1<span class="sb">`</span>
</span><span class='line'>
</span><span class='line'><span class="nb">printf</span> <span class="s2">&quot;System information as of: $date\n&quot;</span>
</span><span class='line'><span class="nb">printf</span> <span class="s2">&quot;System load:\t%s\tIP Address:\t%s\n&quot;</span> <span class="nv">$load</span> <span class="nv">$ip</span>
</span><span class='line'><span class="nb">printf</span> <span class="s2">&quot;Memory usage:\t%s\tSystem uptime:\t%s\n&quot;</span> <span class="nv">$memory_usage</span> <span class="s2">&quot;$time&quot;</span>
</span><span class='line'><span class="nb">printf</span> <span class="s2">&quot;Usage on /:\t%s\tSwap usage:\t%s\n&quot;</span> <span class="nv">$root_usage</span> <span class="nv">$swap_usage</span>
</span><span class='line'><span class="nb">printf</span> <span class="s2">&quot;Local Users:\t%s\tProcesses:\t%s\n\n&quot;</span> <span class="nv">$users</span> <span class="nv">$processes</span>
</span></code></pre></td></tr></table></div></figure>


<p>Por último <strong>02-footer</strong> será la parte de abajo. Contendrá cualquier cosa que
quieras poner en el fichero <strong>/etc/motd.tail</strong> por ejemplo, una anotación que
quieras hacer específica para ese servidor. Se mostrará si existe el fichero.</p>

<figure class='code'><figcaption><span>&#8220;02-footer&#8221;</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="c">#!/bin/bash</span>
</span><span class='line'><span class="o">[</span> -f /etc/motd.tail <span class="o">]</span> <span class="o">&amp;&amp;</span> cat /etc/motd.tail <span class="o">||</span> <span class="nb">true</span>
</span></code></pre></td></tr></table></div></figure>

</div>
  
  


<p>Si este art&iacute;culo te result&oacute; interesante, considere donar 0.08 BTC: <a href="/images/direccion.png">1Kg4gu3e7u8HUw8bj5NbBciRg6Y56kuFCU</a> </p>

    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2016/11/14/openvpn-user-plus-pass/">openvpn user+pass</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2016-11-14T21:41:05-05:00'><span class='date'>14/11/2016</span> <span class='time'>9:41 pm</span></time>
        
           | <a href="/blog/2016/11/14/openvpn-user-plus-pass/#disqus_thread"
             data-disqus-identifier="http://uranio-235.github.io/blog/2016/11/14/openvpn-user-plus-pass/">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Si bien, openvpn con una llave estática es algo bastante sencillo de configurar;
tiene un grave problema: Que solo un cliente puede conectarse a la vez. En un
escenario donde por ejemplo, queremos crear una vpn para múltiples servidores
que deben conectarse, usar un clave estática se vuelve un problema. Una
topología de anillo podría ayudarnos resolverlo, pero cada servidor debería ser
cliente y servidor a la vez. Una VPN autenticada por usuario y contraseña
resuelve el problema de la manera más simplificada posible.</p>

<p>Creamos la infraestructura de certificados:</p>

<figure class='code'><figcaption><span>&#8220;aprovisionando easy-rsa&#8221;</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="o">[</span>lazaro@artema ~<span class="o">]</span><span class="nv">$ </span>mkdir Downloads/vpn
</span><span class='line'><span class="o">[</span>lazaro@artema ~<span class="o">]</span><span class="nv">$ </span><span class="nb">cd </span>Downloads/vpn
</span><span class='line'><span class="o">[</span>lazaro@artema vpn<span class="o">]</span><span class="nv">$ </span>cp -r /etc/easy-rsa/* ./
</span></code></pre></td></tr></table></div></figure>


<p>Si quieres, si te da la mariconería, edita los parámetros del fichero que acabas
de copiar, pa que pongas los parámetros bonitillos, si no, espera a que openssl
los pregunte; a lo mejor ni los pregunta.</p>

<figure class='code'><figcaption><span>&#8220;aprovisionamiento de certificados&#8221;</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="o">[</span>lazaro@artema vpn<span class="o">]</span><span class="nv">$ </span>easyrsa init-pki
</span><span class='line'><span class="o">[</span>lazaro@artema vpn<span class="o">]</span><span class="nv">$ </span>easyrsa build-ca nopass
</span></code></pre></td></tr></table></div></figure>


<p>Note que la cadena de texto <strong>tuservidor</strong> debe ser remplazada por el nombre de
tu actor asiático preferido o, por algún nombre de tu agrado para el servidor.</p>

<figure class='code'><figcaption><span>&#8220;creando el certificado del servidor&#8221;</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="o">[</span>lazaro@artema vpn<span class="o">]</span><span class="nv">$ </span>easyrsa build-server-full tuservidor nopass
</span></code></pre></td></tr></table></div></figure>


<p>Ahora el <a href="https://es.wikipedia.org/wiki/Diffie-Hellman">Diffie Hellman</a>, MUY
importante. Ponte cómodo que va pa largo:</p>

<figure class='code'><figcaption><span>&#8220;creando el diffie hellman&#8221;</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="o">[</span>lazaro@artema vpn<span class="o">]</span><span class="nv">$ </span>easyrsa gen-dh
</span></code></pre></td></tr></table></div></figure>


<p>Tiramos todo eso para /etc/openvpn en un directorio que designaremos con el
nombre de &ldquo;servidor&rdquo; (por una cuestión de orden).</p>

<figure class='code'><figcaption><span>&#8220;/etc/openvpn/&#8221;</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="o">[</span>lazaro@artema vpn<span class="o">]</span><span class="nv">$ </span>mkdir /etc/openvpn/servidor
</span><span class='line'><span class="o">[</span>lazaro@artema vpn<span class="o">]</span><span class="nv">$ </span>cp pki/ca.crt /etc/openvpn/servidor
</span><span class='line'><span class="o">[</span>lazaro@artema vpn<span class="o">]</span><span class="nv">$ </span>cp pki/dh.pem /etc/openvpn/servidor
</span><span class='line'><span class="o">[</span>lazaro@artema vpn<span class="o">]</span><span class="nv">$ </span>cp -r pki/private/*.* /etc/openvpn/servidor/
</span><span class='line'><span class="o">[</span>lazaro@artema vpn<span class="o">]</span><span class="nv">$ </span>cp -r pki/issued/tuservidor.* /etc/openvpn/servidor/
</span></code></pre></td></tr></table></div></figure>


<p>Ya tenemos todo listo pa armar el muñeco. Ahora vamos a crear la configuración
del servidor. A mi me quedó así:</p>

<figure class='code'><figcaption><span>&#8220;servidor.conf&#8221;</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
<span class='line-number'>45</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="o">[</span>lazaro@artema vpn<span class="o">]</span><span class="nv">$ </span><span class="nb">cd</span> /etc/openvpn/
</span><span class='line'><span class="o">[</span>lazaro@artema openvpn<span class="o">]</span><span class="nv">$ </span>cat servidor.conf
</span><span class='line'><span class="c"># como y por donde escuhan</span>
</span><span class='line'>port 1194
</span><span class='line'>proto udp
</span><span class='line'>dev tun
</span><span class='line'>
</span><span class='line'><span class="c"># los certificados</span>
</span><span class='line'>ca /etc/openvpn/servidor/ca.crt
</span><span class='line'>cert  /etc/openvpn/servidor/tuservidor.crt
</span><span class='line'>key /etc/openvpn/servidor/tuservidor.key
</span><span class='line'>
</span><span class='line'><span class="c"># el diffie hellman</span>
</span><span class='line'>dh /etc/openvpn/servidor/dh.pem
</span><span class='line'>
</span><span class='line'><span class="c"># la red que vamos a operar</span>
</span><span class='line'>server 10.8.0.0 255.255.255.0
</span><span class='line'>
</span><span class='line'><span class="c"># manda un ping cada 10 segundos</span>
</span><span class='line'><span class="c"># y tumba el tunel si a los 120 no hay respuesta</span>
</span><span class='line'>keepalive <span class="m">10</span> 120
</span><span class='line'>
</span><span class='line'><span class="c"># usa la compresión lzo</span>
</span><span class='line'>comp-lzo
</span><span class='line'>
</span><span class='line'><span class="c"># opera con los siguientes privilegios</span>
</span><span class='line'><span class="c">#user nobody</span>
</span><span class='line'><span class="c">#group nogroup</span>
</span><span class='line'>
</span><span class='line'><span class="c"># esto es para reforzarlo</span>
</span><span class='line'>persist-key
</span><span class='line'>persist-tun
</span><span class='line'>
</span><span class='line'><span class="c"># que tan elocuente será</span>
</span><span class='line'>verb 3
</span><span class='line'>
</span><span class='line'><span class="c"># mándale estos parámetros al cliente</span>
</span><span class='line'>push <span class="s2">&quot;redirect-gateway def1&quot;</span>
</span><span class='line'>push <span class="s2">&quot;dhcp-option DNS 8.8.8.8&quot;</span>
</span><span class='line'>push <span class="s2">&quot;dhcp-option DNS 8.8.4.4&quot;</span>
</span><span class='line'>
</span><span class='line'><span class="c"># y he aquí el truco de la autenticación</span>
</span><span class='line'>plugin /usr/lib/openvpn/plugins/openvpn-plugin-auth-pam.so login
</span><span class='line'>client-cert-not-required
</span><span class='line'>username-as-common-name
</span></code></pre></td></tr></table></div></figure>


<p>Con eso tenemos el servidor pinchando. Ahora vamos a hacer un fichero <strong>.ovpn</strong>
genérico, para dar a entender como sería la configuración de nuestro cliente.</p>

<p><strong>OJO</strong> El certificado que se le dará al cliente será el <strong>ca.crt</strong></p>

<p>A mi me quedó así:</p>

<figure class='code'><figcaption><span>&#8220;cliente.ovpn&#8221;</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="o">[</span>lazaro@artema openvpn<span class="o">]</span><span class="nv">$ </span>cat tuservidor.ovpn
</span><span class='line'>client
</span><span class='line'>dev tun
</span><span class='line'>proto udp
</span><span class='line'>remote 192.168.0.1 1194
</span><span class='line'>remote-cert-tls server
</span><span class='line'>auth-user-pass ~/autenticacion.conf
</span><span class='line'>comp-lzo
</span><span class='line'>&lt;ca&gt;
</span><span class='line'>-----BEGIN CERTIFICATE-----
</span><span class='line'>Lorem ipsum ad his scripta blandit partiendo, eum fastidii
</span><span class='line'>accumsan euripidis in, eum liber hendrerit an. Qui ut wisi
</span><span class='line'>vocibus suscipiantur, quo dicit ridens inciderint id. Quo mundi
</span><span class='line'>lobortis reformidans eu, legimus senserit definiebas an eos. Eu
</span><span class='line'>sit tincidunt incorrupte definitionem, vis mutat affert
</span><span class='line'>percipit cu, eirmod consectetuer signiferumque eu per. In usu
</span><span class='line'>latine equidem dolores. Quo no falli viris intellegam, ut fugit
</span><span class='line'>veritus placerat per.  Ius id vidit volumus mandamus, vide
</span><span class='line'>veritus democritum te nec, ei eos debet libris consulatu. No
</span><span class='line'>mei ferri graeco dicunt, ad cum veri accommodare. Sed at malis
</span><span class='line'>omnesque delicata, usu et iusto zzril meliore. Dicunt maiorum
</span><span class='line'>eloquentiam cum cu, sit summo dolor essent te. Ne quodsi
</span><span class='line'>nusquam legendos has, ea dicit voluptua eloquentiam pro, ad sit
</span><span class='line'>quas qualisque. Eos vocibus deserunt quaestio ei.
</span><span class='line'>-----END CERTIFICATE-----
</span><span class='line'>&lt;/ca&gt;
</span></code></pre></td></tr></table></div></figure>


<p>Cada cliente de OpenVPN tiene su librito&hellip; Pero ese .ovpn genérico, debe ser
capaz de ser importado sin problema.</p>

<p>Por una cuestión de orden y seguridad, yo borro la base con la que se creó todo:</p>

<figure class='code'><figcaption><span>&#8220;clear area&#8221;</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="o">[</span>lazaro@artema ~<span class="o">]</span><span class="nv">$ </span>rm -rf Downloads/vpn
</span></code></pre></td></tr></table></div></figure>


<p>Por cierto, cada configuración que pongas en <strong>/etc/openvpn</strong> cuya extensión
sea <strong>.conf</strong> se puede echar a andar con systemd.</p>

<figure class='code'><figcaption><span>&#8220;systemctl</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="o">[</span>root@artema ~<span class="o">]</span><span class="c"># systemctl status openvpn@servidor</span>
</span><span class='line'>● openvpn@servidor.service - OpenVPN connection to servidor
</span><span class='line'>   Loaded: loaded <span class="o">(</span>/usr/lib/systemd/system/openvpn@.service<span class="p">;</span> disabled<span class="p">;</span> vendor preset: disabled<span class="o">)</span>
</span><span class='line'>   Active: inactive <span class="o">(</span>dead<span class="o">)</span>
</span><span class='line'>     Docs: man:openvpn<span class="o">(</span>8<span class="o">)</span>
</span></code></pre></td></tr></table></div></figure>



</div>
  
  


<p>Si este art&iacute;culo te result&oacute; interesante, considere donar 0.08 BTC: <a href="/images/direccion.png">1Kg4gu3e7u8HUw8bj5NbBciRg6Y56kuFCU</a> </p>

    </article>
  
  <div class="pagination">
    
      <a class="prev" href="/posts/4">&larr; Older</a>
    
    <a href="/blog/archives">Blog Archives</a>
    
    <a class="next" href="/posts/2">Newer &rarr;</a>
    
  </div>
</div>
<aside class="sidebar">
  
    <section>

	<h1>Lo m&aacute;s reciente</h1>

	<ul id="recent_posts">
		
		<li class="post">
			<a href="/blog/2017/02/05/a-las-puertas-del-3g/">a las puertas del 3g</a>
		</li>
		
		<li class="post">
			<a href="/blog/2017/02/05/dns-con-vistas/">dns con vistas</a>
		</li>
		
		<li class="post">
			<a href="/blog/2017/02/01/ipfw-simple-y-consiso/">ipfw simple y conciso</a>
		</li>
		
		<li class="post">
			<a href="/blog/2017/01/28/freebsd-11/">mis crónicas con freebsd</a>
		</li>
		
		<li class="post">
			<a href="/blog/2017/01/21/palito/">animación del palito</a>
		</li>
		
		<li class="post">
			<a href="/blog/2017/01/20/datatables-espanol/">DataTables en español</a>
		</li>
		
		<li class="post">
			<a href="/blog/2017/01/09/tendencias-tecnologicas/">tendencias tecnológicas</a>
		</li>
		
		<li class="post">
			<a href="/blog/2017/01/09/flasheando-modem-al-s4/">flasheando modem al S4</a>
		</li>
		
		<li class="post">
			<a href="/blog/2017/01/02/rails-assets/">rails-assets</a>
		</li>
		
		<li class="post">
			<a href="/blog/2016/12/29/xgproyect/">xgproyect</a>
		</li>
		
		<li class="post">
			<a href="/blog/2016/12/27/cambiar-mac-a-un-nano/">cambiar mac a un nano</a>
		</li>
		
		<li class="post">
			<a href="/blog/2016/12/19/phpmyadmin-multiples-servidores/">phpmyadmin múltiples servidores</a>
		</li>
		
		<li class="post">
			<a href="/blog/2016/12/19/iptables-y-ftp/">iptables y ftp</a>
		</li>
		
		<li class="post">
			<a href="/blog/2016/12/09/rails-en-alpine/">rails en alpine</a>
		</li>
		
		<li class="post">
			<a href="/blog/2016/11/24/squid3-bloquear-user-agent/">squid3 bloquear user-agent</a>
		</li>
		
		<li class="post">
			<a href="/blog/2016/11/22/redimensionar-lvm/">redimensionar lvm</a>
		</li>
		
		<li class="post">
			<a href="/blog/2016/11/20/sysinfo-en-el-motd/">sysinfo en el motd</a>
		</li>
		
		<li class="post">
			<a href="/blog/2016/11/14/openvpn-user-plus-pass/">openvpn user+pass</a>
		</li>
		
		<li class="post">
			<a href="/blog/2016/10/22/el-domain-pop/">recolección DomainPOP</a>
		</li>
		
		<li class="post">
			<a href="/blog/2016/10/22/domainpop-con-postfix/">domainpop con postfix</a>
		</li>
		
		<li class="post">
			<a href="/blog/2016/10/22/tunel-6in4/">túnel 6in4</a>
		</li>
		
		<li class="post">
			<a href="/blog/2016/10/22/cortafuegos-ipv6-sencillo/">cortafuegos ipv6 sencillo</a>
		</li>
		
		<li class="post">
			<a href="/blog/2016/10/22/poniendo-direcciones-ipv6/">las reglas del juego ipv6</a>
		</li>
		
		<li class="post">
			<a href="/blog/2016/10/22/ipv6/">la resolución 185/2016</a>
		</li>
		
		<li class="post">
			<a href="/blog/2016/10/04/dirver-broadcom/">driver broadcom</a>
		</li>
		
		<li class="post">
			<a href="/blog/2016/09/22/audifonos-blutu/">audífonos blutú</a>
		</li>
		
		<li class="post">
			<a href="/blog/2016/09/16/dispatcher-script/">dispatcher script</a>
		</li>
		
		<li class="post">
			<a href="/blog/2016/08/16/password-de-windows/">password de windows</a>
		</li>
		
		<li class="post">
			<a href="/blog/2016/08/15/repositorio-de-iso-en-xen/">Local ISO en xen</a>
		</li>
		
		<li class="post">
			<a href="/blog/2016/07/31/kiwix-como-servicio/">kiwix como servicio</a>
		</li>
		
		<li class="post">
			<a href="/blog/2016/07/17/hibernar-en-archlinux/">hibernar en archlinux</a>
		</li>
		
		<li class="post">
			<a href="/blog/2016/07/17/rsync-basico/">rsync básico</a>
		</li>
		
		<li class="post">
			<a href="/blog/2016/06/20/correos-del-cron/">correos del cron</a>
		</li>
		
		<li class="post">
			<a href="/blog/2016/06/18/dkim-y-spf-en-postfix/">dkim y spf en postfix</a>
		</li>
		
		<li class="post">
			<a href="/blog/2016/06/06/desacelerar-mouse/">desacelerar mouse</a>
		</li>
		
		<li class="post">
			<a href="/blog/2016/05/12/deshabilitar-historial-de-bash/">deshabilitar historial de bash</a>
		</li>
		
		<li class="post">
			<a href="/blog/2016/04/29/reparar-archivos-de-innodb/">reparar archivos de innodb</a>
		</li>
		
		<li class="post">
			<a href="/blog/2016/04/01/wpa2-con-freeradius/">WPA2 con freeradius</a>
		</li>
		
		<li class="post">
			<a href="/blog/2016/03/14/misterio-con-ethernet-foxconn/">misterio con ethernet foxconn</a>
		</li>
		
		<li class="post">
			<a href="/blog/2016/03/07/cargar-rvm/">cargar rvm</a>
		</li>
		
		<li class="post">
			<a href="/blog/2016/02/22/data-confirm-en-un-boton/">data confirm en un boton</a>
		</li>
		
		<li class="post">
			<a href="/blog/2016/02/20/hooks-de-pacman/">los hooks de pacman</a>
		</li>
		
		<li class="post">
			<a href="/blog/2016/02/01/arch-compartir-paquetes/">arch compartir paquetes</a>
		</li>
		
		<li class="post">
			<a href="/blog/2016/01/25/hostname-arbitrario-en-bind9/">bind9, registro arbitratio</a>
		</li>
		
		<li class="post">
			<a href="/blog/2015/12/14/servidor-jabber-con-prosody/">servidor jabber con prosody</a>
		</li>
		
		<li class="post">
			<a href="/blog/2015/11/29/mc-demora-en-abrir/">mc demora en abrir</a>
		</li>
		
		<li class="post">
			<a href="/blog/2015/11/23/desmume-ultralento/">desmume ultralento</a>
		</li>
		
		<li class="post">
			<a href="/blog/2015/11/22/certificado-autofirmado/">certificado autofirmado</a>
		</li>
		
		<li class="post">
			<a href="/blog/2015/11/12/rc-dot-local-en-systemd/">rc.local en systemd</a>
		</li>
		
		<li class="post">
			<a href="/blog/2015/11/03/las-mujeres-gordas/">las mujeres gordas</a>
		</li>
		
		<li class="post">
			<a href="/blog/2015/11/03/tls-y-ssl-en-postfix/">tls y ssl en postfix</a>
		</li>
		
		<li class="post">
			<a href="/blog/2015/10/20/compartir-la-wifi/">compartir la wifi</a>
		</li>
		
		<li class="post">
			<a href="/blog/2015/10/18/systemd-timesyncd/">systemd-timesyncd</a>
		</li>
		
		<li class="post">
			<a href="/blog/2015/10/15/repo-de-fdroid/">repo de fdroid</a>
		</li>
		
		<li class="post">
			<a href="/blog/2015/10/08/prawn-pdf-con-ruby/">prawn, pdf con ruby</a>
		</li>
		
		<li class="post">
			<a href="/blog/2015/10/05/assets-por-controlador/">assets por controlador</a>
		</li>
		
		<li class="post">
			<a href="/blog/2015/09/17/dhcp-por-grupos/">dhcp por grupos</a>
		</li>
		
		<li class="post">
			<a href="/blog/2015/09/10/plymouth-boot-screen/">plymouth boot screen</a>
		</li>
		
		<li class="post">
			<a href="/blog/2015/09/07/git-clone-rapido/">git clone rápido</a>
		</li>
		
		<li class="post">
			<a href="/blog/2015/09/07/archlinux-dos-kernel/">archlinux con dos kernel</a>
		</li>
		
		<li class="post">
			<a href="/blog/2015/09/01/squid-transparente/">squid transparente</a>
		</li>
		
		<li class="post">
			<a href="/blog/2015/08/28/compute-remote-uptime/">compute remote uptime</a>
		</li>
		
		<li class="post">
			<a href="/blog/2015/07/24/transliteracion-del-coran/">transliteración del corán</a>
		</li>
		
		<li class="post">
			<a href="/blog/2015/07/12/date-select-en-espanol/">date_select en español</a>
		</li>
		
		<li class="post">
			<a href="/blog/2015/07/11/openvas-en-archlinux/">OpenVAS en Archlinux</a>
		</li>
		
		<li class="post">
			<a href="/blog/2015/07/05/anadir-verbo-a-un-scaffold/">añadir verbo a un scaffold</a>
		</li>
		
		<li class="post">
			<a href="/blog/2015/07/05/asset-pipeline-en-production/">asset pipeline en production</a>
		</li>
		
		<li class="post">
			<a href="/blog/2015/06/30/bootstrap-en-rails-4/">bootstrap en rails 4</a>
		</li>
		
		<li class="post">
			<a href="/blog/2015/06/21/se-dice-dios-no-ala/">se dice DIOS, no alá</a>
		</li>
		
		<li class="post">
			<a href="/blog/2015/06/12/systemd-automount/">systemd automount</a>
		</li>
		
		<li class="post">
			<a href="/blog/2015/06/07/openvpn-en-arch/">OpenVPN en Arch</a>
		</li>
		
		<li class="post">
			<a href="/blog/2015/06/03/transando-a-ext4/">transando a ext4</a>
		</li>
		
		<li class="post">
			<a href="/blog/2015/06/01/pacman-bajo-el-microscopio/">pacman bajo el microscopio</a>
		</li>
		
		<li class="post">
			<a href="/blog/2015/05/28/cambiar-user-agent-en-squid/">cambiar user agent con squid</a>
		</li>
		
		<li class="post">
			<a href="/blog/2015/05/26/nic-bonding/">NIC bonding</a>
		</li>
		
		<li class="post">
			<a href="/blog/2015/05/23/ltsp-en-debian8-y-salud/">ltsp en debian8 y salud</a>
		</li>
		
		<li class="post">
			<a href="/blog/2015/02/21/sasl-homeclub-only/">SASL homeclub only</a>
		</li>
		
		<li class="post">
			<a href="/blog/2015/02/19/delay-pools-de-squid/">delay pools de squid</a>
		</li>
		
		<li class="post">
			<a href="/blog/2015/02/12/rails-con-mongodb/">rails con mongodb</a>
		</li>
		
		<li class="post">
			<a href="/blog/2015/02/06/zentyal/">Zentyal</a>
		</li>
		
		<li class="post">
			<a href="/blog/2014/12/02/welcome-aboard/">welcome aboard</a>
		</li>
		
		<li class="post">
			<a href="/blog/2014/10/28/proxy-automatico/">proxy automático</a>
		</li>
		
		<li class="post">
			<a href="/blog/2014/09/24/verdial-y-el-imagis/">la pena de verdial</a>
		</li>
		
		<li class="post">
			<a href="/blog/2014/09/05/palos-de-wordpress/">palos de wordpress</a>
		</li>
		
		<li class="post">
			<a href="/blog/2014/08/25/el-server-de-correo/">el servidor de correo</a>
		</li>
		
		<li class="post">
			<a href="/blog/2014/08/25/mas-de-ocs/">más de OCS</a>
		</li>
		
		<li class="post">
			<a href="/blog/2014/08/15/subdesarrollo/">subdesarrollo</a>
		</li>
		
		<li class="post">
			<a href="/blog/2014/08/11/ocs-inventory/">ocs-inventory</a>
		</li>
		
		<li class="post">
			<a href="/blog/2014/07/08/select-en-bootstrap/">select en bootstrap</a>
		</li>
		
		<li class="post">
			<a href="/blog/2014/07/05/empirico/">empíricos</a>
		</li>
		
		<li class="post">
			<a href="/blog/2014/06/10/autenticador-sql-en-el-proxy/">autenticador SQL en el proxy</a>
		</li>
		
		<li class="post">
			<a href="/blog/2014/06/09/postfix-entrando-en-el-baile/">postfix entrando en el baile</a>
		</li>
		
		<li class="post">
			<a href="/blog/2014/06/09/dovecot-entra-en-el-baile/">dovecot entra en el baile</a>
		</li>
		
		<li class="post">
			<a href="/blog/2014/05/02/wordpress-para-todos/">wordpress para todos</a>
		</li>
		
		<li class="post">
			<a href="/blog/2014/04/18/lxc-en-salud/">lxc en salud</a>
		</li>
		
		<li class="post">
			<a href="/blog/2014/04/06/squid-en-infomed/">el toten de proxies</a>
		</li>
		
		<li class="post">
			<a href="/blog/2014/04/04/en-la-cumbre-del-vedado/">el &#8220;calisto&#8221; garcía</a>
		</li>
		
	</ul>
	
</section>





  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-68987437-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


  
</aside>

    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2017 - låzaro -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  

<script type="text/javascript">
      var disqus_shortname = 'uranio-235';
      
        
        var disqus_script = 'count.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = '//' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>



<div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) {return;}
  js = d.createElement(s); js.id = id; js.async = true;
  js.src = "//connect.facebook.net/en_US/all.js#appId=212934732101925&xfbml=1";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>



  <script type="text/javascript">
    (function() {
      var script = document.createElement('script'); script.type = 'text/javascript'; script.async = true;
      script.src = 'https://apis.google.com/js/plusone.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(script, s);
    })();
  </script>



  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = '//platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-68987437-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>



</body>
</html>
