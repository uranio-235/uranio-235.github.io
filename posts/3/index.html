
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>El SysAdmin del 3er Mundo</title>
  <meta name="author" content="låzaro">

  
  <meta name="description" content="portknocking en freebsd 01/03/2017 11:53 pm | Comments La técnica port-knocking o knockd para otros, es en mi opinión, pilar de la
seguridad en &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://uranio-235.github.io/posts/3/">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/atom.xml" rel="alternate" title="El SysAdmin del 3er Mundo" type="application/atom+xml">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="/javascripts/libs/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="//fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="//fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-68987437-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


  
</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/">El SysAdmin del 3er Mundo</a></h1>
  
    <h2>todo lo que expliqué mientras nadie prestaba atención</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="http://www.google.com" method="get">
  <fieldset role="search">
    <input type="hidden" name="sitesearch" value="uranio-235.github.io">
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/blog/archives">Archivo</a></li>
  <li><a href="/blog/categories/rails/">Ruby on Rails</a></li>
  <li><a href="/blog/categories/islam/">Islam</a></li>
  <li><a href="/blog/categories/destacado/">Destacado</a></li>
  <li><a href="/blog/categories/razonemos/">Razonemos</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div class="blog-index">
  
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2017/03/01/portknocking-en-freebsd/">portknocking en freebsd</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2017-03-01T23:53:01-05:00'><span class='date'>01/03/2017</span> <span class='time'>11:53 pm</span></time>
        
           | <a href="/blog/2017/03/01/portknocking-en-freebsd/#disqus_thread"
             data-disqus-identifier="http://uranio-235.github.io/blog/2017/03/01/portknocking-en-freebsd/">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p><img class="right" src="/images/alibaba.jpg" width="400" height="500" title="" ></p>

<p>La técnica port-knocking o knockd para otros, es en mi opinión, <strong>pilar de la
seguridad</strong> en cualquier servidor que use SSH. Aunque es bastante versátil y
puede ser usado hasta para reiniciar servicios sin loguearte.</p>

<p>Una de las cosas que empece a extrañar en FreeBSD fue knockd, pero gracias a la
flexbilidad de ipfw, podemos usar este poderoso software. En FreeBSD el fichero
se encuentra en <strong>/usr/local/etc/knockd.conf.sample</strong> y el paquete se llama
<strong>knock</strong>.</p>

<p>OJO!! Muy importante especificarle la interfaz por la cual va a escuchar.</p>

<figure class='code'><figcaption><span>&#8220;/usr/local/etc/knockd.conf&#8221;</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
</pre></td><td class='code'><pre><code class='ini'><span class='line'> <span class="k">[options]</span>
</span><span class='line'>         <span class="na">logfile</span> <span class="o">=</span> <span class="s">/var/log/knockd.log</span>
</span><span class='line'><span class="s">         interface = xn0</span>
</span><span class='line'>
</span><span class='line'> <span class="k">[openSSH]</span>
</span><span class='line'>         <span class="na">sequence</span>    <span class="o">=</span> <span class="s">111,222,333</span>
</span><span class='line'><span class="s">         seq_timeout = 9</span>
</span><span class='line'><span class="s">         command     = /sbin/ipfw -q add 00001 allow all from %IP% to me</span>
</span><span class='line'><span class="s">         tcpflags    = syn</span>
</span><span class='line'>
</span><span class='line'> <span class="k">[closeSSH]</span>
</span><span class='line'>         <span class="na">sequence</span>    <span class="o">=</span> <span class="s">222,111,333</span>
</span><span class='line'><span class="s">         seq_timeout = 9</span>
</span><span class='line'><span class="s">         command     = /sbin/ipfw -q delete 00001</span>
</span><span class='line'><span class="s">         tcpflags    = syn</span>
</span></code></pre></td></tr></table></div></figure>


<p>Nada, resumiendo, que el truco está en poner la regla con el número 00001.
Recuerdas que ipfw te permite (casi te obliga a) especificar un número para cada
regla. Pues usaremos ese numerito diminuto para ponerla de primera.</p>

<p>Los tipos ortodoxos criticarán que es una regla <em>al tetón</em>. Pienso que no vale
la pena abrir solo el 22; si voy a pasar tanto trabajo, que se me abra la puerta
completa.</p>

<p>Por cierto, junto con knock, viene un programita para hacer el knocking. Yo
solía hacerlo con netcat pero knock es más cómodo.</p>

<figure class='code'><figcaption><span>&#8220;knock&#8221;</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='console'><span class='line'><span class="go">   knock 192.168.3.1 111,222,333</span>
</span></code></pre></td></tr></table></div></figure>


<p>En mi <strong>.bashrc</strong>, tengo esta función declarada.</p>

<figure class='code'><figcaption><span>&#8220;.bashrc&#8221;</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'> abrete_cesamo<span class="o">()</span> <span class="o">{</span>
</span><span class='line'>    knock  <span class="nv">$1</span> <span class="m">111</span> <span class="m">222</span> 333
</span><span class='line'>    ssh root@<span class="nv">$1</span>
</span><span class='line'>    knock  <span class="nv">$1</span> <span class="m">222</span> <span class="m">111</span> 333
</span><span class='line'> <span class="o">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>No tengo que decirte que la combinación de puertos está de acorde al ejemplo de
la entrada y que debes cambiarla por la que tu establezcas. Así de esa manera,
hacerle SSH a un servidor es ejecutar <strong>abrete_cesamo ip.del.servidor</strong> Luego al
terminar la sesión ssh, se ejecuta la secuencia de cerrado.</p>

<p>Y hablando de implementaciones raras de knockd!</p>

<p>En alpine linux, iptables está en <strong>/sbin</strong>, no en /usr/sbin. Sin
embargo, el fichero de configuración tiene puesto que está en /usr/sbin/, lo
cual, repito; no es correcto.</p>

<p>Además, tanto en debian como alpine. No importa que pongas en la configuración
porque interfaz escuchará. Siempre lo hará por eth0. Para cambiar esta
situación; debes:</p>

<p>En <strong>alpine</strong> linux, configurar la interfaz en el fichero <strong>/etc/conf.d/knockd</strong></p>

<p>En <strong>debian</strong>, configurar la interfaz (y poner un 1) en <strong>/etc/default/knockd</strong></p>

<p>Recuerda que en linux, el comando de iptables, viene con &ldquo;-A INPUT&rdquo;. Si tienes
un firewall corriendo, obviamente que no pincha; por tanto, ponlo con &ldquo;-I
INPUT&rdquo;.</p>
</div>
  
  


<p>Si este art&iacute;culo te result&oacute; interesante, considere donar 0.08 BTC: <a href="/images/direccion.png">1Kg4gu3e7u8HUw8bj5NbBciRg6Y56kuFCU</a> </p>

    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2017/03/01/bind-en-infomed/">bind en infomed</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2017-03-01T23:13:34-05:00'><span class='date'>01/03/2017</span> <span class='time'>11:13 pm</span></time>
        
           | <a href="/blog/2017/03/01/bind-en-infomed/#disqus_thread"
             data-disqus-identifier="http://uranio-235.github.io/blog/2017/03/01/bind-en-infomed/">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Seguimos con bind&hellip;</p>

<p>No hace mucho le comentaba a alguien, a raíz de una duda que tenía el colega
Paradyx; la manera correcta de configurar un servidor bind para una red que
cuelga de infomed.</p>

<p>Le comentaba que no vale la pena usar un forward por defecto; que hacer del
dominio &lsquo;.sld.cu&rsquo; una zona forward sería más que suficiente. Digo esto porque
infomed no resuelve ningún dominio que valla más allá de &ldquo;.sld.cu&rdquo;, por tanto,
no vale la pena transferirle las sepetecientas peticiones que hacen cuanta
mierda se conecta a nuestra red (especialmente android).</p>

<figure class='code'><figcaption><span>&#8220;named.conf&#8221;</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
</pre></td><td class='code'><pre><code class='c'><span class='line'><span class="n">options</span> <span class="p">{</span>
</span><span class='line'>   <span class="n">directory</span> <span class="s">&quot;/etc/bind/&quot;</span><span class="p">;</span>
</span><span class='line'>   <span class="n">pid</span><span class="o">-</span><span class="n">file</span> <span class="s">&quot;/run/named/named.pid&quot;</span><span class="p">;</span>
</span><span class='line'>   <span class="n">listen</span><span class="o">-</span><span class="n">on</span> <span class="p">{</span> <span class="mf">10.1.1.1</span><span class="p">;</span> <span class="n">localhost</span><span class="p">;</span> <span class="p">};</span>
</span><span class='line'>   <span class="n">allow</span><span class="o">-</span><span class="n">transfer</span> <span class="p">{</span> <span class="n">none</span><span class="p">;</span> <span class="p">};</span>
</span><span class='line'>   <span class="n">allow</span><span class="o">-</span><span class="n">update</span> <span class="p">{</span> <span class="n">none</span><span class="p">;</span> <span class="p">};</span>
</span><span class='line'>   <span class="n">version</span> <span class="n">none</span><span class="p">;</span>
</span><span class='line'>   <span class="n">hostname</span> <span class="n">none</span><span class="p">;</span>
</span><span class='line'>   <span class="n">server</span><span class="o">-</span><span class="n">id</span> <span class="n">none</span><span class="p">;</span>
</span><span class='line'><span class="p">};</span>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'><span class="n">view</span> <span class="n">lan</span> <span class="p">{</span>
</span><span class='line'>
</span><span class='line'>   <span class="n">match</span><span class="o">-</span><span class="n">clients</span> <span class="p">{</span><span class="mf">10.1.1.0</span><span class="o">/</span><span class="mi">24</span><span class="p">;};</span>
</span><span class='line'>
</span><span class='line'>   <span class="n">zone</span> <span class="s">&quot;localhost&quot;</span> <span class="n">IN</span> <span class="p">{</span>
</span><span class='line'>      <span class="n">type</span> <span class="n">master</span><span class="p">;</span>
</span><span class='line'>      <span class="n">file</span> <span class="s">&quot;localhost.zone&quot;</span><span class="p">;</span>
</span><span class='line'>   <span class="p">};</span>
</span><span class='line'>
</span><span class='line'>   <span class="n">zone</span> <span class="s">&quot;hcg.sld.cu&quot;</span> <span class="n">IN</span> <span class="p">{</span>
</span><span class='line'>      <span class="n">type</span> <span class="n">master</span><span class="p">;</span>
</span><span class='line'>      <span class="n">file</span> <span class="s">&quot;hcg.zone&quot;</span><span class="p">;</span>
</span><span class='line'>      <span class="n">notify</span> <span class="n">no</span><span class="p">;</span>
</span><span class='line'>   <span class="p">};</span>
</span><span class='line'>
</span><span class='line'>   <span class="n">zone</span> <span class="s">&quot;sld.cu&quot;</span> <span class="p">{</span>
</span><span class='line'>      <span class="n">forwarders</span> <span class="p">{</span> <span class="mf">201.220.222.131</span><span class="p">;</span> <span class="mf">201.220.222.132</span><span class="p">;</span> <span class="p">};</span>
</span><span class='line'>      <span class="n">type</span> <span class="n">forward</span><span class="p">;</span>
</span><span class='line'>      <span class="n">forward</span> <span class="n">only</span><span class="p">;</span>
</span><span class='line'>   <span class="p">};</span>
</span><span class='line'>
</span><span class='line'><span class="p">};</span> <span class="c1">// view lan</span>
</span></code></pre></td></tr></table></div></figure>


<p>Como mi dominio es hcg.sld.cu (subdominio de .sld.cu) lo declaramos ARRIBA
del dominio sld.cu. El dominio <strong>hcg.sld.cu</strong> es una zona <strong>master</strong>, sin
embargo, el dominio <strong>sld.cu</strong> es del tipo <strong>forward</strong> y entonces ahí declaramos
los forwarders (los dns de infomed).</p>

<p>Así solo le reenviaremos a infomed, aquellas peticiones que sean para infomed.</p>

<p>En mi opinión esto no es necesario. Tanto así, que la zona donde infomed hace
forward; la tengo para los servidores. En el caso de la zona para LAN,
simplemente declaro los servidores de correo en un fakeroot y listo.</p>
</div>
  
  


<p>Si este art&iacute;culo te result&oacute; interesante, considere donar 0.07 BTC: <a href="/images/direccion.png">1Kg4gu3e7u8HUw8bj5NbBciRg6Y56kuFCU</a> </p>

    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2017/03/01/qos-con-tc/">QoS con tc o dummynet</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2017-03-01T19:57:14-05:00'><span class='date'>01/03/2017</span> <span class='time'>7:57 pm</span></time>
        
           | <a href="/blog/2017/03/01/qos-con-tc/#disqus_thread"
             data-disqus-identifier="http://uranio-235.github.io/blog/2017/03/01/qos-con-tc/">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Acá en el 5to infierno de infomed, algunos usuarios; están acostumbrados a usar
un &ldquo;MUA&rdquo; (léase &ldquo;cliente de correo&rdquo;)  para alar el correo de infomed. Con el
boom de la wifi, los médicos querían tener su correo de infomed en el puñetero
cliente de correo de android/ios. Tras hacer un forward a los smtp y pop de
infomed, el ancho de vianda se fue a la mierda. Por tanto, surgió la necesidad
de chapiar el tráfico que va desde/hacia infomed. Por ejemplo, el tráfico smtp,
es saliente (subida), sin embargo, el tráfico pop es entrante (bajada).</p>

<p>El servidor que uso como &ldquo;router&rdquo;, es un alpine linux. El trinomio bind, dhcp e
iptables, sumado al kernel grsec; convierte en mi opinión a alpinelinux en la
mejor opción para un router.</p>

<p>Entrando en materia. Tenemos un canal de 2 megabit (256 KB/s). Pero en HDSL, la
subida es más triste que la bajada; y además, hay más gente bajando correo que
subiendo. Por tanto, usaremos un canal para el smtp, más estrecho que el del
pop. En este caso, <strong>eth0</strong> será la interfaz donde está el router.</p>

<figure class='code'><figcaption><span>&#8220;tc del firewall&#8221;</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="c"># reiniciamos las colas que hallan en eth0</span>
</span><span class='line'><span class="c"># para empezar a trabajar en limpio</span>
</span><span class='line'>tc qdisc del root dev eth0
</span><span class='line'>tc qdisc add dev eth0 root handle 1: htb default 30
</span><span class='line'>
</span><span class='line'><span class="c"># un canal de 256 KB/s lo partimos en dos</span>
</span><span class='line'><span class="c"># una fracción de 10 KB/s y otro de 20KB/s</span>
</span><span class='line'>tc class add dev eth0 parent 1:  classid 1:1  htb rate 256kbps burst 5k
</span><span class='line'>tc class add dev eth0 parent 1:1 classid 1:10 htb rate  20kbps burst 5k
</span><span class='line'>tc class add dev eth0 parent 1:1 classid 1:11 htb rate  10kbps burst 5k
</span><span class='line'>
</span><span class='line'><span class="c"># lo que valla para el pop e imap, lo dejamos en el :10 con 20kbps</span>
</span><span class='line'>tc filter add dev eth0 parent 1: protocol ip prio <span class="m">1</span> u32 match ip src 201.220.211.7 match ip sport <span class="m">110</span> 0xffff flowid 1:10
</span><span class='line'>tc filter add dev eth0 parent 1: protocol ip prio <span class="m">1</span> u32 match ip src 201.220.211.7 match ip sport <span class="m">143</span> 0xffff flowid 1:10
</span><span class='line'>
</span><span class='line'><span class="c"># lo que valla por el smtp, en el :11 de 10kbps</span>
</span><span class='line'>tc filter add dev eth0 parent 1: protocol ip prio <span class="m">1</span> u32 match ip dst 201.220.211.39 match ip dport <span class="m">25</span> 0xffff flowid 1:11
</span></code></pre></td></tr></table></div></figure>


<p>Note como en el caso de lo que venga del &ldquo;.7&rdquo;, (src) de los puertos pop e imap
(sport) pasarán por la cola <strong>1:10</strong>. Mientras que en el &ldquo;.39&rdquo;, se usan las
cláusulas dst y dport.</p>

<p><strong>pero aquí NO terminan las aventuras de QoS</strong></p>

<p>Resulta que el tráfico proveniente de las WiFi era apabullante para el servidor
proxy. Mientras que de una IP de una máquina entran 3 peticiones, de la IP de
un router wifi entran 30.</p>

<p>En un principio pensaba usar un delay_pool especial para estas ip, pero sería
complicar más el esquema de delay_pool que funciona bien por usuarios. Por
tanto, el tema de la bajada ya está cubierto. Ningún usuario puede acaparar todo
el ancho de banda con una descarga. Sin embargo, 1&#8217;000 peticiones de basura
(android con proxy configurado) ahogan al proxy. La medida fue, que el tráfico
entrante de la wifi, no exceda los 200KB.</p>

<p>En mi caso, los AP usan la ip 10 al 15, por tanto, haciendo un pipe de dummynet
y metiéndolos a todos en ese pipe: -que se fajen por los 200KB!</p>

<figure class='code'><figcaption><span>&#8220;ipfw.rules&#8221;</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>ipfw pipe <span class="m">1</span> config bw 200KBytes
</span><span class='line'>ipfw add pipe <span class="m">1</span> ip from 10.1.1.10 to me
</span><span class='line'>ipfw add pipe <span class="m">1</span> ip from 10.1.1.11 to me
</span><span class='line'>ipfw add pipe <span class="m">1</span> ip from 10.1.1.12 to me
</span><span class='line'>ipfw add pipe <span class="m">1</span> ip from 10.1.1.13 to me
</span><span class='line'>ipfw add pipe <span class="m">1</span> ip from 10.1.1.14 to me
</span><span class='line'>ipfw add pipe <span class="m">1</span> ip from 10.1.1.15 to me
</span></code></pre></td></tr></table></div></figure>

</div>
  
  


<p>Si este art&iacute;culo te result&oacute; interesante, considere donar 0.05 BTC: <a href="/images/direccion.png">1Kg4gu3e7u8HUw8bj5NbBciRg6Y56kuFCU</a> </p>

    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2017/02/22/bind-personal/">bind personal</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2017-02-22T21:05:26-05:00'><span class='date'>22/02/2017</span> <span class='time'>9:05 pm</span></time>
        
           | <a href="/blog/2017/02/22/bind-personal/#disqus_thread"
             data-disqus-identifier="http://uranio-235.github.io/blog/2017/02/22/bind-personal/">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Una cosa que me jode, es que linux el tema de los múltiples DNS no los maneje
bien. Por ejemplo, estamos en una LAN con red 192.168.1.0/24 y además,
tenemos una conexión a internet.</p>

<p>Entonces seteas dos DNS en el resolv.conf y no pincha!</p>

<p>Además, si la situación es itinerante (vas a múltiples LAN) mantener la
configuración DNS se vuelve un rollo. Aunque el networkmanager te permita
configurarlo, volvemos a la situación anterior.</p>

<p>Solución, tenemos un bin con sus debidos forwarders para cada red. En mi caso,
el <strong>/etc/named.conf</strong> me quedó así:</p>

<figure class='code'><figcaption><span>&#8220;/etc/named.conf&#8221;</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
</pre></td><td class='code'><pre><code class='c'><span class='line'><span class="c1">// vim:set ts=4 sw=4 et:</span>
</span><span class='line'><span class="n">options</span> <span class="p">{</span>
</span><span class='line'>        <span class="n">directory</span> <span class="s">&quot;/etc/bind/&quot;</span><span class="p">;</span>
</span><span class='line'>        <span class="n">pid</span><span class="o">-</span><span class="n">file</span> <span class="s">&quot;/run/named/named.pid&quot;</span><span class="p">;</span>
</span><span class='line'>        <span class="n">allow</span><span class="o">-</span><span class="n">recursion</span> <span class="p">{</span> <span class="mf">127.0.0.1</span><span class="p">;</span> <span class="p">};</span>
</span><span class='line'>        <span class="n">allow</span><span class="o">-</span><span class="n">transfer</span> <span class="p">{</span> <span class="mf">127.0.0.1</span><span class="p">;</span> <span class="p">};</span>
</span><span class='line'>        <span class="n">allow</span><span class="o">-</span><span class="n">update</span> <span class="p">{</span> <span class="mf">127.0.0.1</span><span class="p">;</span> <span class="p">};</span>
</span><span class='line'>        <span class="n">version</span> <span class="n">none</span><span class="p">;</span>
</span><span class='line'>        <span class="n">hostname</span> <span class="n">none</span><span class="p">;</span>
</span><span class='line'>        <span class="n">server</span><span class="o">-</span><span class="n">id</span> <span class="n">none</span><span class="p">;</span>
</span><span class='line'>        <span class="n">recursion</span> <span class="n">yes</span><span class="p">;</span>
</span><span class='line'>        <span class="n">auth</span><span class="o">-</span><span class="n">nxdomain</span> <span class="n">no</span><span class="p">;</span>
</span><span class='line'>        <span class="n">listen</span><span class="o">-</span><span class="n">on</span> <span class="p">{</span> <span class="mf">127.0.0.1</span><span class="p">;</span> <span class="p">};</span>
</span><span class='line'><span class="p">};</span>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'><span class="c1">// la lan por su DNS local</span>
</span><span class='line'><span class="n">zone</span> <span class="s">&quot;dominio.cu&quot;</span> <span class="p">{</span>
</span><span class='line'>  <span class="n">type</span> <span class="n">forward</span><span class="p">;</span>
</span><span class='line'>  <span class="n">forwarders</span> <span class="p">{</span> <span class="mf">192.168.1.3</span><span class="p">;</span> <span class="p">};</span>
</span><span class='line'><span class="p">};</span>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'><span class="c1">// lo demás por google</span>
</span><span class='line'><span class="n">zone</span> <span class="s">&quot;.&quot;</span> <span class="p">{</span>
</span><span class='line'>  <span class="n">type</span> <span class="n">forward</span><span class="p">;</span>
</span><span class='line'>  <span class="n">forwarders</span> <span class="p">{</span> <span class="mf">8.8.8.8</span><span class="p">;</span> <span class="mf">8.8.4.4</span><span class="p">;</span> <span class="p">};</span>
</span><span class='line'><span class="p">};</span>
</span></code></pre></td></tr></table></div></figure>


<p>De esta manera, el dominio de la LAN (<strong>dominio.cu</strong>), será resuelto a través
del servidor DNS 192.168.1.3; que es el de la LAN. Para eso usamos la zona
&ldquo;dominio.cu&rdquo; del tipo forward y especificamos a 192.168.1.3 como su forward.</p>

<p>El resto, o sea, la zona &ldquo;.&rdquo;, será también del tipo forward y para este ejemplo,
usamos los dns de google como forward.</p>

<p>Ahora solo te queda actualizar el <strong>/etc/resolv.conf</strong> y setear a 127.0.0.1
como tu servidor dns</p>

<figure class='code'><figcaption><span>&#8220;/etc/resolv.conf&#8221;</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='c'><span class='line'><span class="cp"># Generated by resolvconf</span>
</span><span class='line'><span class="n">nameserver</span> <span class="mf">127.0.0.1</span>
</span></code></pre></td></tr></table></div></figure>


<p>Recuerda que cada configuración automatizada, actualiza este fichero. Te
recomiendo que no te fajes con el fichero, si no que en cada conexión que desees
usar tu servidor, se lo especifiques. Por ejemplo, con networkmanager, le dices
a N conexión, que el servidor dns es manual y será <em>127.0.0.1</em>. Si usas Gnome
(NetworkManager), te recomiendo usar la utilidad <strong>nm-connection-editor</strong>. Te
permitirá especificar el dominio de búsqueda, cosa que no he visto como hacer
con el administrador de conexiones de gnome.</p>
</div>
  
  


<p>Si este art&iacute;culo te result&oacute; interesante, considere donar 0.06 BTC: <a href="/images/direccion.png">1Kg4gu3e7u8HUw8bj5NbBciRg6Y56kuFCU</a> </p>

    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2017/02/05/dns-con-vistas/">dns con vistas</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2017-02-05T18:57:26-05:00'><span class='date'>05/02/2017</span> <span class='time'>6:57 pm</span></time>
        
           | <a href="/blog/2017/02/05/dns-con-vistas/#disqus_thread"
             data-disqus-identifier="http://uranio-235.github.io/blog/2017/02/05/dns-con-vistas/">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Que lindo corre bind9 en alpine linux. Ahora que mis servidores están todo en el
pool de xenserver (los reyes magos me trajeron un servidor pro) tengo un nuevo
problema. Dentro de la red interna de xen, los servidores tienen una ip
distinta. Por ejemplo, para todo el mundo, el alpine linux que hace de router,
es 192.168.0.1, pero para los servidores, es 169.254.0.10</p>

<p>Además, el forward para infomed, es un privilegio que solo los servidores
tienen. Por tanto, lo más seguro, será usar una zona para la LAN y otra para la
red interna del pool.</p>

<p>Esto me recuerda las DMZ, pero no es lo mismo, porque no estoy creando cuellos
de botella. La red interna del pool es una vif, que funciona sin emitir
tráfico real por alguna pif.</p>

<figure class='code'><figcaption><span>&#8220;/etc/bind/named.conf&#8221;</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
<span class='line-number'>45</span>
<span class='line-number'>46</span>
<span class='line-number'>47</span>
<span class='line-number'>48</span>
<span class='line-number'>49</span>
<span class='line-number'>50</span>
<span class='line-number'>51</span>
<span class='line-number'>52</span>
<span class='line-number'>53</span>
<span class='line-number'>54</span>
<span class='line-number'>55</span>
<span class='line-number'>56</span>
<span class='line-number'>57</span>
<span class='line-number'>58</span>
<span class='line-number'>59</span>
<span class='line-number'>60</span>
<span class='line-number'>61</span>
<span class='line-number'>62</span>
<span class='line-number'>63</span>
<span class='line-number'>64</span>
<span class='line-number'>65</span>
<span class='line-number'>66</span>
<span class='line-number'>67</span>
<span class='line-number'>68</span>
<span class='line-number'>69</span>
<span class='line-number'>70</span>
<span class='line-number'>71</span>
<span class='line-number'>72</span>
</pre></td><td class='code'><pre><code class='c'><span class='line'><span class="c1">// vim:set ts=4 sw=4 et:</span>
</span><span class='line'>
</span><span class='line'><span class="n">options</span> <span class="p">{</span>
</span><span class='line'>
</span><span class='line'>   <span class="n">directory</span> <span class="s">&quot;/etc/bind/&quot;</span><span class="p">;</span>
</span><span class='line'>   <span class="n">pid</span><span class="o">-</span><span class="n">file</span> <span class="s">&quot;/run/named/named.pid&quot;</span><span class="p">;</span>
</span><span class='line'>   <span class="n">listen</span><span class="o">-</span><span class="n">on</span><span class="o">-</span><span class="n">v6</span> <span class="p">{</span> <span class="n">none</span><span class="p">;</span> <span class="p">};</span>
</span><span class='line'>   <span class="n">listen</span><span class="o">-</span><span class="n">on</span> <span class="p">{</span> <span class="mf">169.254.0.0</span><span class="o">/</span><span class="mi">16</span><span class="p">;</span> <span class="n">localhost</span><span class="p">;</span> <span class="mf">192.168.1.0</span><span class="o">/</span><span class="mi">24</span><span class="p">;</span> <span class="p">};</span>
</span><span class='line'>   <span class="n">allow</span><span class="o">-</span><span class="n">transfer</span> <span class="p">{</span> <span class="n">none</span><span class="p">;</span> <span class="p">};</span>
</span><span class='line'>   <span class="n">allow</span><span class="o">-</span><span class="n">update</span> <span class="p">{</span> <span class="n">none</span><span class="p">;</span> <span class="p">};</span>
</span><span class='line'>   <span class="n">version</span> <span class="n">none</span><span class="p">;</span>
</span><span class='line'>   <span class="n">hostname</span> <span class="n">none</span><span class="p">;</span>
</span><span class='line'>   <span class="n">server</span><span class="o">-</span><span class="n">id</span> <span class="n">none</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'>   <span class="c1">// los servidores hacen recursion</span>
</span><span class='line'>   <span class="n">allow</span><span class="o">-</span><span class="n">recursion</span> <span class="p">{</span> <span class="mf">169.254.0.0</span><span class="o">/</span><span class="mi">16</span><span class="p">;</span> <span class="n">localhost</span><span class="p">;};</span>
</span><span class='line'>   <span class="n">recursion</span> <span class="n">yes</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'><span class="p">};</span>
</span><span class='line'>
</span><span class='line'><span class="n">view</span> <span class="n">lan</span>  <span class="p">{</span> <span class="c1">// la red LAN</span>
</span><span class='line'>
</span><span class='line'>   <span class="n">match</span><span class="o">-</span><span class="n">clients</span> <span class="p">{</span><span class="mf">192.168.1.0</span><span class="o">/</span><span class="mi">24</span><span class="p">;};</span>
</span><span class='line'>
</span><span class='line'>   <span class="n">zone</span> <span class="s">&quot;localhost&quot;</span> <span class="n">IN</span> <span class="p">{</span>
</span><span class='line'>      <span class="n">type</span> <span class="n">master</span><span class="p">;</span>
</span><span class='line'>      <span class="n">file</span> <span class="s">&quot;localhost.zone&quot;</span><span class="p">;</span>
</span><span class='line'>   <span class="p">};</span>
</span><span class='line'>
</span><span class='line'>   <span class="n">zone</span> <span class="s">&quot;hcg.sld.cu&quot;</span> <span class="n">IN</span> <span class="p">{</span>
</span><span class='line'>      <span class="n">type</span> <span class="n">master</span><span class="p">;</span>
</span><span class='line'>      <span class="n">file</span> <span class="s">&quot;hcg.zone&quot;</span><span class="p">;</span>
</span><span class='line'>      <span class="n">notify</span> <span class="n">no</span><span class="p">;</span>
</span><span class='line'>   <span class="p">};</span>
</span><span class='line'>
</span><span class='line'>   <span class="n">zone</span> <span class="s">&quot;.&quot;</span> <span class="p">{</span>
</span><span class='line'>      <span class="n">type</span> <span class="n">master</span><span class="p">;</span>
</span><span class='line'>      <span class="n">file</span> <span class="s">&quot;fakeroot.zone&quot;</span><span class="p">;</span>
</span><span class='line'>   <span class="p">};</span>
</span><span class='line'>
</span><span class='line'><span class="p">};</span> <span class="c1">// view lan</span>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'><span class="n">view</span> <span class="n">xen</span> <span class="p">{</span> <span class="c1">// la red interna de XenServer</span>
</span><span class='line'>
</span><span class='line'>   <span class="n">match</span><span class="o">-</span><span class="n">clients</span> <span class="p">{</span><span class="mf">169.254.0.0</span><span class="o">/</span><span class="mi">16</span><span class="p">;</span> <span class="n">localhost</span><span class="p">;};</span>
</span><span class='line'>
</span><span class='line'>   <span class="n">zone</span> <span class="s">&quot;localhost&quot;</span> <span class="n">IN</span> <span class="p">{</span>
</span><span class='line'>      <span class="n">type</span> <span class="n">master</span><span class="p">;</span>
</span><span class='line'>      <span class="n">file</span> <span class="s">&quot;localhost.zone&quot;</span><span class="p">;</span>
</span><span class='line'>   <span class="p">};</span>
</span><span class='line'>
</span><span class='line'>   <span class="n">zone</span> <span class="s">&quot;xen&quot;</span> <span class="n">IN</span> <span class="p">{</span>
</span><span class='line'>      <span class="n">type</span> <span class="n">master</span><span class="p">;</span>
</span><span class='line'>      <span class="n">file</span> <span class="s">&quot;xen.zone&quot;</span><span class="p">;</span>
</span><span class='line'>      <span class="n">notify</span> <span class="n">no</span><span class="p">;</span>
</span><span class='line'>   <span class="p">};</span>
</span><span class='line'>
</span><span class='line'>   <span class="n">zone</span> <span class="s">&quot;hcg.sld.cu&quot;</span> <span class="n">IN</span> <span class="p">{</span>
</span><span class='line'>      <span class="n">type</span> <span class="n">master</span><span class="p">;</span>
</span><span class='line'>      <span class="n">file</span> <span class="s">&quot;hcg.zone&quot;</span><span class="p">;</span>
</span><span class='line'>      <span class="n">notify</span> <span class="n">no</span><span class="p">;</span>
</span><span class='line'>   <span class="p">};</span>
</span><span class='line'>
</span><span class='line'>   <span class="n">zone</span> <span class="s">&quot;sld.cu&quot;</span> <span class="p">{</span>
</span><span class='line'>      <span class="n">forwarders</span> <span class="p">{</span> <span class="mf">201.220.222.131</span><span class="p">;</span> <span class="mf">201.220.222.132</span><span class="p">;</span> <span class="p">};</span>
</span><span class='line'>      <span class="n">type</span> <span class="n">forward</span><span class="p">;</span>
</span><span class='line'>      <span class="n">forward</span> <span class="n">only</span><span class="p">;</span>
</span><span class='line'>   <span class="p">};</span>
</span><span class='line'>
</span><span class='line'><span class="p">};</span> <span class="c1">// view xen</span>
</span></code></pre></td></tr></table></div></figure>


<p>Como ven, cree el dominio &ldquo;.xen&rdquo; que solo será visible a la red interna del
pool. La zona &ldquo;hcg.sld.cu&rdquo; también será visible para los servidores ya que estos
tienen una pata en la LAN; a esto suele llamarse &ldquo;shared zone&rdquo; (zona
compartida). Finalmente, la zona &ldquo;sld.cu&rdquo; (debajo de hcg) es una zona forward en
la vista de la interfaz interna.</p>

<p>El host proxy.hcg.sld.cu resolverá una ip de la lan; de esta misma manera, el
host proxy.xen, resolverá la ip de dicho host, pero dentro de la red interna del
pool.</p>

<p><strong>¿y por qué?</strong></p>

<p>Por que esta menera, solo los servidores (a través de la red del pool), harán
forward. Por ejemplo, el servidor de correo, podrá enviar y recibir su correo
multipop, ya que el alpine que está haciendo como router, permite forward desde
la red del pool hacia la WAN; o sea, todos los servidores, ven a la WAN. Es
obligaría al servidor de correo, a usar el dns de infomed para resolver
direcciones de infomed y el servidor local para resolver las direcciones de la
LAN, lo cual funciona de asco. Sin embargo, la vista del pool tiene una zona
forward. Cabe destacar, que una zona forward y un fakeroot, no se por qué; hace
que ninguna pinche.</p>

<p>Sensillo y seguro.</p>
</div>
  
  


<p>Si este art&iacute;culo te result&oacute; interesante, considere donar 0.04 BTC: <a href="/images/direccion.png">1Kg4gu3e7u8HUw8bj5NbBciRg6Y56kuFCU</a> </p>

    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2017/02/01/ipfw-simple-y-consiso/">ipfw simple y conciso</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2017-02-01T23:15:47-05:00'><span class='date'>01/02/2017</span> <span class='time'>11:15 pm</span></time>
        
           | <a href="/blog/2017/02/01/ipfw-simple-y-consiso/#disqus_thread"
             data-disqus-identifier="http://uranio-235.github.io/blog/2017/02/01/ipfw-simple-y-consiso/">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Las instrucciones para hacer un cortafuegos realmente <strong>SIMPLE</strong> y la vez
funcional (statefull firewall) con ipfw; sensillamente <em>&ldquo;no existen&rdquo;</em>, al menos
No de manera oficial. El cortafuegos ejemplificado en el handbook es bastante
ortodoxo y no muestra la flexibilidad de ipfw.</p>

<p>Para empezar, el módulo debe ser cargado en el kernel, así que inicializaremos
ipfw como si fuera un demonio más del sistema. Esto quiere decir que lo
añadiremos al <strong>/etc/rc.conf</strong></p>

<figure class='code'><figcaption><span>&#8220;/etc/rc.conf&#8221;</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'> <span class="nv">firewall_enable</span><span class="o">=</span><span class="s2">&quot;YES&quot;</span>
</span><span class='line'> <span class="nv">firewall_type</span><span class="o">=</span><span class="s2">&quot;/usr/local/etc/ipfw.rules&quot;</span>
</span></code></pre></td></tr></table></div></figure>


<p>Te recomiendo reiniciar ahora; para que todo se cargue correctamente.</p>

<p>La <a href="https://www.freebsd.org/doc/handbook/firewalls-ipfw.html">documentación oficial</a> aclara que
los firewall pueden ser (además) del tipo: open, client, simple, closed o
UNKNOWN. Sin embargo, <strong>en mi opinión</strong> estas configuraciones prefabricadas, no
son suficiente para un servidor (por ejemplo proxy).</p>

<p>Para mantener la armonía chea y anticuada de freebsd; colocamos el cortafuegos
en el etc/ que está bajo /usr/local/. Ten en cuenta que casi todas las
aplicaciones que instales, tendrán su /etc ahí.</p>

<p>Reiniciar ipfw no es tan jamón como un usuario de iptables haría. Hacer un flush
de las reglas, significa quedarse trancado y perder la conexión por ssh. Para
reiniciar el cortafuegos, deberás tener un script que haga flush y además,
reiniciar el servicio. Este scriptsito me lo hice para la faena de toquetear el
cortafuegos</p>

<figure class='code'><figcaption><span>&#8220;/usr/local/bin/reiniciar_ipfw.sh&#8221;</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'> <span class="c">#!/bin/csh</span>
</span><span class='line'> service ipfw stop
</span><span class='line'> ipfw -q flush
</span><span class='line'> service ipfw start
</span><span class='line'> ipfw show
</span></code></pre></td></tr></table></div></figure>


<p></p>

<p>La documentación oficial (y otras muchas) indican que cada regla se cree
enumerada y que bebes mantener esta numeración manualmente. Sin embargo, esto no
es estrictamente necesario. Cada regla incrementará el número de manera
implícita.</p>

<p>La mecánica de ipfw es más sencilla que cualquier firewall de linux en mi
opinión.</p>

<p><strong>ipfw add accion argumento</strong></p>

<p>Si ya conoces <strong>ufw</strong>, te darás cuenta de que es una copia bastante mala de
ipfw, sobre todo; teniendo cuenta que ipfw es un firewall en sí, mientras que
ufw, es un stack que genera instrucciones de iptables.</p>

<p>Algo de lo que linux se ha alejado mucho es el teorema de KISS, pero en BSD, que
es unix ortodoxo, mantiene la simpleza como pilar. De esta manera, una acción
allow, en su forma más simple, es casi lenguaje natural.</p>

<p><strong>ipfw add allow all from 10.99 to me</strong></p>

<p>O sea, permite todo lo que venga de 10.0.0.1 para mi. Pero podemos hacer algo
más discriminatorio.</p>

<p><strong>ipfw add allow tcp from 10.0.0.99 to 10.0.0.1 dst-port 22 in via xn0</strong></p>

<p>Permite el tráfico tcp de 10.99 para 10.1 que valla para el puerto 22 en sentido
entrante (in) por la interfaz (via) xn0</p>

<p>¿Te la llevaste? Jamón de pollo! ¿Verdad?</p>

<p>Veamos pues un <strong>ipfw.rules</strong> bien básico. La interfaz <strong>lo0</strong> (lo con un cero)
es el localhost. La interfaz xn0 es la WAN y xn1 es la LAN.</p>

<figure class='code'><figcaption><span>&#8220;ipfw.rules&#8221;</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'> <span class="c"># lo permitimos todo pa afuera</span>
</span><span class='line'> ipfw -q add allow all from any to any out keep-state
</span><span class='line'>
</span><span class='line'> <span class="c"># permite todo por el localhost</span>
</span><span class='line'> ipfw -q add allow all from any to any via lo0
</span><span class='line'>
</span><span class='line'> <span class="c"># las conexiones que ya estén iniciadas, pásalas</span>
</span><span class='line'> <span class="c"># compara eso con el de iptables</span>
</span><span class='line'> ipfw -q add allow tcp from any to any established
</span><span class='line'>
</span><span class='line'> <span class="c"># permite que te hagan ping desde la LAN </span>
</span><span class='line'> <span class="c"># pero no mucho icmp para que no hagan flood</span>
</span><span class='line'> ipfw pipe <span class="m">1</span> config bw 30KBytes
</span><span class='line'> ipfw -q add pipe <span class="m">1</span> icmp from 192.168.1.0/24 to me in via xn1
</span><span class='line'> ipfw -q add allow  icmp from 192.168.1.0/24 to me in via xn1
</span><span class='line'>
</span><span class='line'> <span class="c"># permite que accedan al proxy desde la LAN</span>
</span><span class='line'> ipfw -q add allow tcp from 192.168.1.0/24 to me <span class="m">3128</span> via xn1
</span><span class='line'>
</span><span class='line'> <span class="c"># permite el servidor web pero solo deade la WAN</span>
</span><span class='line'> <span class="c"># en este caso &quot;me&quot; será la ip de la WAN</span>
</span><span class='line'> ipfw -q add allow tcp from any to me dst-port <span class="m">80</span> via xn0
</span><span class='line'>
</span><span class='line'> <span class="c"># descarta el resto de los paquetes ENTRANTES</span>
</span><span class='line'> <span class="c"># esta regla casi nunca es necesaria, ya que</span>
</span><span class='line'> <span class="c"># suele ser implícita, o sea, drop por defecto</span>
</span><span class='line'> ipfw -q add drop all from any to any
</span></code></pre></td></tr></table></div></figure>


<p>Veamos algunas características de este cortafuegos&hellip;</p>

<p>Como ven, no arranca haciendo flush como los de iptables. De hecho, hacer flush
como primera linea puede causarte problemas muy serios. Por otro parte,
reiniciar el cortafuegos sin hacer flush, provoca que se dupliquen las reglas.</p>

<p>La salida, por definición, está bloqueada. La última regla; autoriza la salida
del tráfico. ¿Por qué la última? ¿Por qué no al principio? Pues por si hacemos
un pipe de salida. Aveces regular el ancho de banda de salida, es más útil que
regular el de entrada. Por ejemplo, si queremos moderar la cantidad de tráfico
que un servidor web exporta. Más adelante veremos dummynet y los pipe.</p>

<p>En iptables, hacemos DROP cuando queremos desechar paquetes. En ipfw usamos
<strong>deny</strong>, aunque también puedes usar <strong>drop</strong> que es sinónimo de deny. El
cortafuego lo sustituirá por deny. Lo puedes ver al usar: ipfw show</p>

<p>Note que &ldquo;<strong>from me</strong>&rdquo; para ipfw, significa un paquete que provenga de cualquiera de
las ip que tiene configurada el servidor. En este caso, la interfaz xn0 debe
tener alguna de la red 192.168.1.0/24 así que <strong>me</strong> será dicha ip.</p>

<p>Una característica de ipfw <strong>bien peligrosa</strong> es que tiene muchas cosas
<strong>implícitas</strong>. Como lo de la numeración. Cuando digo implícita me refrito a que
si no las pones, ipfw las asume. Fíjate bien como se maneja el tema de los
puertos en la siguientes reglas.</p>

<figure class='code'><figcaption><span>&#8220;ipfw dst-port&#8221;</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'> <span class="c"># permite que accedan al proxy desde la LAN</span>
</span><span class='line'> ipfw -q add allow tcp from 192.168.1.0/24 to me <span class="m">3128</span> via xn1
</span><span class='line'>
</span><span class='line'> <span class="c"># permite el servidor web pero solo deade la WAN</span>
</span><span class='line'> <span class="c"># en este caso &quot;me&quot; será la ip de la WAN</span>
</span><span class='line'> ipfw -q add allow tcp from any to me dst-port <span class="m">80</span> via xn0
</span></code></pre></td></tr></table></div></figure>


<p>En la primera regla, declaramos &ldquo;<strong>me 3128</strong>&rdquo;, esto significa &ldquo;para mi ip por el
puerto 3128&rdquo;. Realmente ipfw lo reescribe (puedes verlo con &ldquo;show&rdquo;) y pondrá la
cláusula <strong>dst-port</strong> al igual que la siguiente linea, detrás de <strong>me</strong> viene la
cláusula <strong>dst-port</strong> seguida por el puerto. Pero si no la pones, se asume como
implícita. En poca palabras:</p>

<p>&ldquo;to me 3128&rdquo; y &ldquo;to me dst-port 3128&rdquo; es exactamente lo mismo.</p>

<p>Otro tema que le retraquetea el mango; es la gestión del ancho de vianda. Porque
tc de iproute (en linux) es un asco. Pero si conocemos ipfw, sabremos que maneja
el ancho de vianda de una menera muy peculiar; usando un módulo llamado
dummynet. No esperes ver la palabra &ldquo;dummynet&rdquo; escrita en el cortafuegos. En
fin; analiza este ejemplo:</p>

<figure class='code'><figcaption><span>&#8220;ipfw y dummynet&#8221;</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'> ipfw add pipe <span class="m">1</span> ip from me to 192.168.1.0/24 out via xn0
</span><span class='line'> ipfw pipe <span class="m">1</span> config bw 128KBytes
</span></code></pre></td></tr></table></div></figure>


<p>Se crea el pipe número 1, con un ancho de banda de 128 KyloBytes. En la regla de
arriba, se dijo que todo el tráfico de la interfaz xn0, proveniente de el
servidor hacia la red 192.168.1.0/24 y en sentido saliente; será a 128K. O sea,
modificamos el ancho de banda <strong>que sale</strong> del servidor, lo cual es bastante
útil para un servidor web o ftp.</p>

<p>En el caso de un servidor proxy, no vale la pena modificar el ancho de banda de
<strong>salida</strong>, ya que las páginas son enviadas al cliente una vez bajadas y si ya
nos hicimos el arakiri de bajarla: ¿Pa que demorarlas más? Para un servidor
proxy usamos una regla bidireccional. O sea, creamos el pipe 1 y el pipe 2 con
igual o diferente ancho de banda y aplicamos una regla pa afuera y otra pa
adentro.</p>

<p>Tenga en cuenta que el las conexiones HDSL tiene más ancho de vianda pa abajo
que pa arriba. Osea, que salida a la WAN (el router) debe ser más estrecha que
salida a la LAN.</p>

<p>En un servidor de correo sí sería útil regular la entrada, ya que hay gente que
manda elefantes por el puerto 25. Sobre todo en redes conmutadas o muy lentas.
También sería útil moderar la entrada en un servidor que involucre subida de
ficheros, por ejemplo, una nube, un servidor de carpetas compartidas.</p>

<p>Ah! por cierto:</p>

<p>Si crearas un pipe y le dijeras que 3 ip, lo usan, el ancho de vianda sería
compartido para esas 3 ip. O sea</p>

<figure class='code'><figcaption><span>&#8220;ipfw y dummynet&#8221;</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'> ipfw add pipe <span class="m">1</span> ip from me to 192.168.1.10/24 out via xn0
</span><span class='line'> ipfw add pipe <span class="m">1</span> ip from me to 192.168.1.11/24 out via xn0
</span><span class='line'> ipfw add pipe <span class="m">1</span> ip from me to 192.168.1.12/24 out via xn0
</span><span class='line'> ipfw pipe <span class="m">1</span> config bw 128KBytes
</span></code></pre></td></tr></table></div></figure>


<p>En este caso, 10, 11 y 12, tienen un total de 128KB/s, si 10 acapara todo el
ancho de banda (los 128) entonces 11 y 12 tendrán unos bellos timeout como
respuesta. Piensa en todo lo que puedes hacer con eso.</p>

<p><strong>OJO CON EL ÓRDEN!!!</strong></p>

<p>Esa regla machea <strong>la salida</strong>. Si la colocaras <strong>debajo</strong> de la regla que
permite todo hacia afuera, simplemente, <strong>no pinchará</strong> porque <strong>no machea</strong>.
Coge por la regla de salida y nunca va al pipe. Como diría los yumas &ldquo;rule of
thumbs&rdquo;</p>

<p><strong>Las reglas que envían el tráfico al pipe, debes ponerlas arriba de la regla
&ldquo;destino final&rdquo; del paquete.</strong></p>

<p>De esta manera el paquete va al pipe y luego regresa al cortafuegos. O sea,
intenta poner siempre los pipe arriba y el cortafuegos abajo</p>
</div>
  
  


<p>Si este art&iacute;culo te result&oacute; interesante, considere donar 0.04 BTC: <a href="/images/direccion.png">1Kg4gu3e7u8HUw8bj5NbBciRg6Y56kuFCU</a> </p>

    </article>
  
  <div class="pagination">
    
      <a class="prev" href="/posts/4">&larr; Older</a>
    
    <a href="/blog/archives">Blog Archives</a>
    
    <a class="next" href="/posts/2">Newer &rarr;</a>
    
  </div>
</div>
<aside class="sidebar">
  
    <section>

	<h1>Lo m&aacute;s reciente</h1>

	<ul id="recent_posts">
		
		<li class="post">
			<a href="/blog/2017/06/29/repos-epel-y-demas/">repos EPEL y demás</a>
		</li>
		
		<li class="post">
			<a href="/blog/2017/06/29/knockd-en-centos/">knockd en centos</a>
		</li>
		
		<li class="post">
			<a href="/blog/2017/06/28/android-islamico/">Apps islámicas android</a>
		</li>
		
		<li class="post">
			<a href="/blog/2017/06/22/curiosa-acl-de-squid/">squid y navegar a .cu</a>
		</li>
		
		<li class="post">
			<a href="/blog/2017/05/13/instalar-node-rapido/">instalar node rápido</a>
		</li>
		
		<li class="post">
			<a href="/blog/2017/05/10/ssl-ca-local/">autoridad certificadora</a>
		</li>
		
		<li class="post">
			<a href="/blog/2017/04/08/xen-y-virt-manager/">xen y virt-manager</a>
		</li>
		
		<li class="post">
			<a href="/blog/2017/03/29/jugar-teeworlds-en-lan/">jugar teeworlds en LAN</a>
		</li>
		
		<li class="post">
			<a href="/blog/2017/03/17/nueva-vm-siempre-es-pv/">nueva VM siempre es PV</a>
		</li>
		
		<li class="post">
			<a href="/blog/2017/03/04/rainloop-en-debian/">rainloop en debian</a>
		</li>
		
		<li class="post">
			<a href="/blog/2017/03/03/nginx-y-websocket/">nginx y websocket</a>
		</li>
		
		<li class="post">
			<a href="/blog/2017/03/03/pkg-tras-un-proxy/">pkg tras un proxy</a>
		</li>
		
		<li class="post">
			<a href="/blog/2017/03/01/portknocking-en-freebsd/">portknocking en freebsd</a>
		</li>
		
		<li class="post">
			<a href="/blog/2017/03/01/bind-en-infomed/">bind en infomed</a>
		</li>
		
		<li class="post">
			<a href="/blog/2017/03/01/qos-con-tc/">QoS con tc o dummynet</a>
		</li>
		
		<li class="post">
			<a href="/blog/2017/02/22/bind-personal/">bind personal</a>
		</li>
		
		<li class="post">
			<a href="/blog/2017/02/05/dns-con-vistas/">dns con vistas</a>
		</li>
		
		<li class="post">
			<a href="/blog/2017/02/01/ipfw-simple-y-consiso/">ipfw simple y conciso</a>
		</li>
		
		<li class="post">
			<a href="/blog/2017/01/28/freebsd-11/">mis crónicas con freebsd</a>
		</li>
		
		<li class="post">
			<a href="/blog/2017/01/21/palito/">animación del palito</a>
		</li>
		
		<li class="post">
			<a href="/blog/2017/01/20/datatables-espanol/">DataTables en español</a>
		</li>
		
		<li class="post">
			<a href="/blog/2017/01/09/tendencias-tecnologicas/">tendencias tecnológicas</a>
		</li>
		
		<li class="post">
			<a href="/blog/2017/01/09/flasheando-modem-al-s4/">flasheando modem al S4</a>
		</li>
		
		<li class="post">
			<a href="/blog/2017/01/02/rails-assets/">rails-assets</a>
		</li>
		
		<li class="post">
			<a href="/blog/2016/12/29/xgproyect/">xgproyect</a>
		</li>
		
		<li class="post">
			<a href="/blog/2016/12/27/cambiar-mac-a-un-nano/">cambiar mac a un nano</a>
		</li>
		
		<li class="post">
			<a href="/blog/2016/12/19/phpmyadmin-multiples-servidores/">phpmyadmin múltiples servidores</a>
		</li>
		
		<li class="post">
			<a href="/blog/2016/12/19/iptables-y-ftp/">iptables y ftp</a>
		</li>
		
		<li class="post">
			<a href="/blog/2016/12/09/rails-en-alpine/">rails en alpine</a>
		</li>
		
		<li class="post">
			<a href="/blog/2016/11/24/squid3-bloquear-user-agent/">squid3 bloquear user-agent</a>
		</li>
		
		<li class="post">
			<a href="/blog/2016/11/22/redimensionar-lvm/">redimensionar lvm</a>
		</li>
		
		<li class="post">
			<a href="/blog/2016/11/20/sysinfo-en-el-motd/">sysinfo en el motd</a>
		</li>
		
		<li class="post">
			<a href="/blog/2016/11/14/openvpn-user-plus-pass/">openvpn user+pass</a>
		</li>
		
		<li class="post">
			<a href="/blog/2016/10/22/el-domain-pop/">recolección DomainPOP</a>
		</li>
		
		<li class="post">
			<a href="/blog/2016/10/22/domainpop-con-postfix/">domainpop con postfix</a>
		</li>
		
		<li class="post">
			<a href="/blog/2016/10/22/tunel-6in4/">túnel 6in4</a>
		</li>
		
		<li class="post">
			<a href="/blog/2016/10/22/cortafuegos-ipv6-sencillo/">cortafuegos ipv6 sencillo</a>
		</li>
		
		<li class="post">
			<a href="/blog/2016/10/22/poniendo-direcciones-ipv6/">las reglas del juego ipv6</a>
		</li>
		
		<li class="post">
			<a href="/blog/2016/10/22/ipv6/">la resolución 185/2016</a>
		</li>
		
		<li class="post">
			<a href="/blog/2016/10/04/dirver-broadcom/">driver broadcom</a>
		</li>
		
		<li class="post">
			<a href="/blog/2016/09/22/audifonos-blutu/">audífonos blutú</a>
		</li>
		
		<li class="post">
			<a href="/blog/2016/09/16/dispatcher-script/">dispatcher script</a>
		</li>
		
		<li class="post">
			<a href="/blog/2016/08/16/password-de-windows/">password de windows</a>
		</li>
		
		<li class="post">
			<a href="/blog/2016/08/15/repositorio-de-iso-en-xen/">Local ISO en XenServer</a>
		</li>
		
		<li class="post">
			<a href="/blog/2016/07/31/kiwix-como-servicio/">kiwix como servicio</a>
		</li>
		
		<li class="post">
			<a href="/blog/2016/07/17/hibernar-en-archlinux/">hibernar en archlinux</a>
		</li>
		
		<li class="post">
			<a href="/blog/2016/07/17/rsync-basico/">rsync básico</a>
		</li>
		
		<li class="post">
			<a href="/blog/2016/06/20/correos-del-cron/">correos del cron</a>
		</li>
		
		<li class="post">
			<a href="/blog/2016/06/18/dkim-y-spf-en-postfix/">dkim y spf en postfix</a>
		</li>
		
		<li class="post">
			<a href="/blog/2016/06/06/desacelerar-mouse/">desacelerar mouse</a>
		</li>
		
		<li class="post">
			<a href="/blog/2016/05/12/deshabilitar-historial-de-bash/">deshabilitar historial de bash</a>
		</li>
		
		<li class="post">
			<a href="/blog/2016/04/29/reparar-archivos-de-innodb/">reparar archivos de innodb</a>
		</li>
		
		<li class="post">
			<a href="/blog/2016/04/01/wpa2-con-freeradius/">WPA2 con freeradius</a>
		</li>
		
		<li class="post">
			<a href="/blog/2016/03/14/misterio-con-ethernet-foxconn/">misterio con ethernet foxconn</a>
		</li>
		
		<li class="post">
			<a href="/blog/2016/03/07/cargar-rvm/">cargar rvm</a>
		</li>
		
		<li class="post">
			<a href="/blog/2016/02/22/data-confirm-en-un-boton/">data confirm en un boton</a>
		</li>
		
		<li class="post">
			<a href="/blog/2016/02/20/hooks-de-pacman/">los hooks de pacman</a>
		</li>
		
		<li class="post">
			<a href="/blog/2016/02/01/arch-compartir-paquetes/">arch compartir paquetes</a>
		</li>
		
		<li class="post">
			<a href="/blog/2016/01/25/hostname-arbitrario-en-bind9/">bind9, registro arbitratio</a>
		</li>
		
		<li class="post">
			<a href="/blog/2015/12/14/servidor-jabber-con-prosody/">servidor jabber con prosody</a>
		</li>
		
		<li class="post">
			<a href="/blog/2015/11/29/mc-demora-en-abrir/">mc demora en abrir</a>
		</li>
		
		<li class="post">
			<a href="/blog/2015/11/23/desmume-ultralento/">desmume ultralento</a>
		</li>
		
		<li class="post">
			<a href="/blog/2015/11/12/rc-dot-local-en-systemd/">rc.local en systemd</a>
		</li>
		
		<li class="post">
			<a href="/blog/2015/11/03/las-mujeres-gordas/">las mujeres gordas</a>
		</li>
		
		<li class="post">
			<a href="/blog/2015/11/03/tls-y-ssl-en-postfix/">tls y ssl en postfix</a>
		</li>
		
		<li class="post">
			<a href="/blog/2015/10/20/compartir-la-wifi/">compartir la wifi</a>
		</li>
		
		<li class="post">
			<a href="/blog/2015/10/18/systemd-timesyncd/">systemd-timesyncd</a>
		</li>
		
		<li class="post">
			<a href="/blog/2015/10/15/repo-de-fdroid/">repo de fdroid</a>
		</li>
		
		<li class="post">
			<a href="/blog/2015/10/08/prawn-pdf-con-ruby/">prawn, pdf con ruby</a>
		</li>
		
		<li class="post">
			<a href="/blog/2015/09/17/dhcp-por-grupos/">dhcp por grupos</a>
		</li>
		
		<li class="post">
			<a href="/blog/2015/09/10/plymouth-boot-screen/">plymouth boot screen</a>
		</li>
		
		<li class="post">
			<a href="/blog/2015/09/07/git-clone-rapido/">git clone rápido</a>
		</li>
		
		<li class="post">
			<a href="/blog/2015/09/07/archlinux-dos-kernel/">archlinux con dos kernel</a>
		</li>
		
		<li class="post">
			<a href="/blog/2015/08/28/compute-remote-uptime/">compute remote uptime</a>
		</li>
		
		<li class="post">
			<a href="/blog/2015/07/24/transliteracion-del-coran/">transliteración del corán</a>
		</li>
		
		<li class="post">
			<a href="/blog/2015/07/12/date-select-en-espanol/">date_select en español</a>
		</li>
		
		<li class="post">
			<a href="/blog/2015/07/11/openvas-en-archlinux/">OpenVAS en Archlinux</a>
		</li>
		
		<li class="post">
			<a href="/blog/2015/07/05/anadir-verbo-a-un-scaffold/">añadir verbo a un scaffold</a>
		</li>
		
		<li class="post">
			<a href="/blog/2015/06/30/bootstrap-en-rails-4/">bootstrap en rails 4</a>
		</li>
		
		<li class="post">
			<a href="/blog/2015/06/21/se-dice-dios-no-ala/">se dice DIOS, no alá</a>
		</li>
		
		<li class="post">
			<a href="/blog/2015/06/01/pacman-bajo-el-microscopio/">pacman bajo el microscopio</a>
		</li>
		
		<li class="post">
			<a href="/blog/2015/05/28/cambiar-user-agent-en-squid/">cambiar user agent con squid</a>
		</li>
		
		<li class="post">
			<a href="/blog/2015/05/26/nic-bonding/">NIC bonding</a>
		</li>
		
		<li class="post">
			<a href="/blog/2015/05/23/ltsp-en-debian8-y-salud/">ltsp en debian8 y salud</a>
		</li>
		
		<li class="post">
			<a href="/blog/2015/02/21/sasl-homeclub-only/">SASL homeclub only</a>
		</li>
		
		<li class="post">
			<a href="/blog/2015/02/19/delay-pools-de-squid/">delay pools de squid</a>
		</li>
		
		<li class="post">
			<a href="/blog/2015/02/12/rails-con-mongodb/">rails con mongodb</a>
		</li>
		
		<li class="post">
			<a href="/blog/2015/02/06/zentyal/">Zentyal</a>
		</li>
		
		<li class="post">
			<a href="/blog/2014/10/28/proxy-automatico/">proxy automático</a>
		</li>
		
		<li class="post">
			<a href="/blog/2014/09/24/verdial-y-el-imagis/">la pena de verdial</a>
		</li>
		
		<li class="post">
			<a href="/blog/2014/09/05/palos-de-wordpress/">palos de wordpress</a>
		</li>
		
		<li class="post">
			<a href="/blog/2014/08/25/el-server-de-correo/">el servidor de correo</a>
		</li>
		
		<li class="post">
			<a href="/blog/2014/08/15/subdesarrollo/">subdesarrollo</a>
		</li>
		
		<li class="post">
			<a href="/blog/2014/08/11/ocs-inventory/">ocs-inventory</a>
		</li>
		
		<li class="post">
			<a href="/blog/2014/07/08/select-en-bootstrap/">select en bootstrap</a>
		</li>
		
		<li class="post">
			<a href="/blog/2014/07/05/empirico/">empíricos</a>
		</li>
		
		<li class="post">
			<a href="/blog/2014/06/10/autenticador-sql-en-el-proxy/">autenticador SQL en el proxy</a>
		</li>
		
		<li class="post">
			<a href="/blog/2014/06/09/postfix-entrando-en-el-baile/">postfix entrando en el baile</a>
		</li>
		
		<li class="post">
			<a href="/blog/2014/06/09/dovecot-entra-en-el-baile/">dovecot entra en el baile</a>
		</li>
		
		<li class="post">
			<a href="/blog/2014/05/02/wordpress-para-todos/">wordpress para todos</a>
		</li>
		
		<li class="post">
			<a href="/blog/2014/04/18/lxc-en-salud/">lxc en salud</a>
		</li>
		
		<li class="post">
			<a href="/blog/2014/04/06/squid-en-infomed/">el toten de proxies</a>
		</li>
		
		<li class="post">
			<a href="/blog/2014/04/04/en-la-cumbre-del-vedado/">el &#8220;calisto&#8221; garcía</a>
		</li>
		
	</ul>
	
</section>





  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-68987437-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


  
</aside>

    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2017 - låzaro -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  

<script type="text/javascript">
      var disqus_shortname = 'uranio-235';
      
        
        var disqus_script = 'count.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = '//' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>



<div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) {return;}
  js = d.createElement(s); js.id = id; js.async = true;
  js.src = "//connect.facebook.net/en_US/all.js#appId=212934732101925&xfbml=1";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>



  <script type="text/javascript">
    (function() {
      var script = document.createElement('script'); script.type = 'text/javascript'; script.async = true;
      script.src = 'https://apis.google.com/js/plusone.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(script, s);
    })();
  </script>



  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = '//platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-68987437-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>



</body>
</html>
