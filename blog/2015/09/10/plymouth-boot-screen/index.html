
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>plymouth boot screen - El SysAdmin del 3er Mundo</title>
  <meta name="author" content="låzaro">

  
  <meta name="description" content="Sigo con mi plan de &ldquo;civilizarme&rdquo;, me he propuesto dejar de parecer un friki en
materia de software. He cambiado i3 por MATE (en la &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://uranio-235.github.io/blog/2015/09/10/plymouth-boot-screen/">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/atom.xml" rel="alternate" title="El SysAdmin del 3er Mundo" type="application/atom+xml">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="/javascripts/libs/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="//fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="//fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  

</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/">El SysAdmin del 3er Mundo</a></h1>
  
    <h2>servidores con linux & ruby on rails en Cuba</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="http://www.google.com.cu" method="get">
  <fieldset role="search">
    <input type="hidden" name="sitesearch" value="uranio-235.github.io">
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/blog/archives">Archivo</a></li>
  <li><a href="/blog/categories/rails/">Ruby on Rails</a></li>
  <li><a href="/blog/categories/destacado/">Destacado</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div>
<article class="hentry" role="article">
  
  <header>
    
      <h1 class="entry-title">plymouth boot screen</h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2015-09-10T18:28:48-04:00'><span class='date'><span class='date-month'>Sep</span> <span class='date-day'>10</span><span class='date-suffix'>th</span>, <span class='date-year'>2015</span></span> <span class='time'>6:28 pm</span></time>
        
      </p>
    
  </header>


<div class="entry-content"><p>Sigo con mi plan de &ldquo;civilizarme&rdquo;, me he propuesto dejar de parecer un friki en
materia de software. He cambiado i3 por MATE (en la máquina personal) e incluso
tengo un tema en el grub. Intenté cambiar Atom por Vim, evolution por mutt y
double-cmd por mc; pero por gusto, acabé virando pa atrá.</p>

<p>Una de las cosas que antes solía molestarme en las distros duras como debian,
era el hecho de que no tuvieran una pantalla bien bonita mientras buteaban.
Ubuntu por ejemplo, te pone las bolitas.</p>

<p>Archlinux es particularmente rápido buteando, pero aún tenía conmigo mismo la
deuda del bootscren pendiente.</p>

<p>Resulta que ya splashy no se usa, ahora la talla es un software con nombre de
almendrón: Plymouth</p>

<p>Plymouth, es una proyecto de fedora, para proveer una pantalla de buteo a nivel
de framebuffer. Hoy en día casi todas las distros butean con el framebuffer en
la máxima resolución posible, así que me imagino que Plymouth sea algo bastante
simple.</p>

<p>En el repo de arch no está incluido pero como todo, está disponible en AUR. La
rutina ya la conoces. Selecciona el que dice plymouth pelao.</p>

<figure class='code'><figcaption><span>&#8220;yaourt&#8221;</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>yaourt plymouth
</span></code></pre></td></tr></table></div></figure>


<p>Ahora vamos a cambiar unos parámetros en el generador de imágenes de inicio.
Localiza el fichero <strong>/etc/mkinitcpio.conf</strong> y ahí vamos a cambiar unos
parámetros.</p>

<p>Primero necesitaremos poner el <strong>HOOK</strong> para plymouth. La documentación advierte
que debe ser después de <strong>base</strong> y de <strong>udev</strong>, así que mejor <strong>ponlo de
último</strong>. Por tanto, dentro de las comillas colocarás <strong>plymouth</strong> como un
objeto más de dicha lista; como el último.</p>

<figure class='code'><figcaption><span>&#8220;/etc/mkinitcpio.conf&#8221;</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">HOOKS</span><span class="o">=</span><span class="s2">&quot;base udev fulanito menganito el_ultimo plymouth&quot;</span>
</span></code></pre></td></tr></table></div></figure>


<p><strong>Nota para los imbéciles:</strong> <em>Si copias y pegas el código anterior, el sistema no te arrancará más.</em></p>

<p>Necesitaremos el módulo apropiado para pinchar el framebufer. En mi caso,
desgraciadamente, uso nvidia, así que me quedó así:</p>

<figure class='code'><figcaption><span>&#8220;/etc/mkinitcpio.conf&#8221;</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">MODULES</span><span class="o">=</span><span class="s2">&quot;nouveau&quot;</span>
</span><span class='line'><span class="c">#MODULES=&quot;i915&quot;</span>
</span><span class='line'><span class="c">#MODULES=&quot;radeon&quot;</span>
</span></code></pre></td></tr></table></div></figure>


<p>Fíjate que los demás quedaron a modo de comentario. Te aclaro que <strong>i915</strong> es
para las tarjetas de video Intel.</p>

<p>Ahora tenemos que decirle al grub, que incluya el parámetro <strong>splash</strong> en la
linea de buteo. Eso lo hacemos editando el fichero <strong>/etc/default/grub</strong></p>

<figure class='code'><figcaption><span>&#8220;/etc/default/grub&#8221;</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">GRUB_CMDLINE_LINUX_DEFAULT</span><span class="o">=</span><span class="s2">&quot;quiet splash&quot;</span>
</span></code></pre></td></tr></table></div></figure>


<p>Yo en lo personal suelo quitarle &ldquo;quiet&rdquo; porque me gusta ver lo que hace el
sistema mientras butea. Aunque ya no da tiempo. Como te dije, los sistemas
modernos butean MUY rápido. Es más el tiempo en que carga init o el display
manager, que el de buteo como tal.</p>

<p>Más adelante veremos que hacer para que la pantalla se vea más tiempo, por ahora
terminemos de configurar. Tanto el grub como initramfs, tienen que reflejar los
cambios</p>

<figure class='code'><figcaption><span>&#8220;reflejando cambios&#8221;</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>grub-mkconfig -o /boot/grub/grub.cfg
</span><span class='line'>mkinitcpio -p linux
</span></code></pre></td></tr></table></div></figure>


<p>Si usas linux-lts, corre:</p>

<figure class='code'><figcaption><span>&#8220;reflejando cambios&#8221;</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>mkinitcpio -p linux-lts
</span></code></pre></td></tr></table></div></figure>


<p>Algo que suele molestar, es que el display manager te caiga en la cara de
pronto. Arch suele manejar bien ese tema, pero por si acaso, nos aseguramos de
habilitar la unit para cada display manager.</p>

<p>En mi caso yo uso slim y corrí:</p>

<figure class='code'><figcaption><span>&#8220;enable&#8221;</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>systemctl <span class="nb">enable </span>slim-plymouth.service
</span></code></pre></td></tr></table></div></figure>


<p>Puede que el tuyo sea:</p>

<ul>
<li>gdm-plymouth.service</li>
<li>kdm-plymouth.service</li>
<li>lxdm-plymouth.service</li>
</ul>


<p>Con eso ya debe estar listo para pinchar pero vamos a darle unos toquesitos
finales.</p>

<p>El fichero <strong>/etc/plymouth/plymouthd.conf</strong> contiene los parámetros de
configuración de plymouth. El mío luce así:</p>

<figure class='code'><figcaption><span>&#8220;/etc/plymouth/plymouthd.conf&#8221;</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="o">[</span>lazaro@artema ~<span class="o">]</span><span class="nv">$ </span>cat /etc/plymouth/plymouthd.conf
</span><span class='line'><span class="c"># Distribution defaults. Changes to this file will get overwritten during</span>
</span><span class='line'><span class="c"># upgrades.</span>
</span><span class='line'><span class="o">[</span>Daemon<span class="o">]</span>
</span><span class='line'><span class="nv">Theme</span><span class="o">=</span>tribar
</span><span class='line'><span class="nv">ShowDelay</span><span class="o">=</span>2
</span></code></pre></td></tr></table></div></figure>


<p>El parámetro <strong>ShowDelay</strong>, define que tiempo se mostrará la pantalla. Como ya
te dije, arch a mi me butea en segundos. Si pones 5 ahí, la pantalla de buteo se
mostrará cinco segundos. Dos buteando y otros tres pa que tu la mires mostrando
su animación. Yo cuando terminé de verla correr la primera vez; desinstalé
plymouth. No me interesa tener 2 segundos adicionales de media por el mero hecho
de que sea más bonito.</p>

<p>El otro parámetro, <strong>Theme</strong>, setea el tema que usarás. Para ver que temas
tienes en el menú, corre:</p>

<figure class='code'><figcaption><span>&#8220;plymouth-set-default-theme&#8221;</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="o">[</span>lazaro@artema ~<span class="o">]</span><span class="nv">$ </span>plymouth-set-default-theme -l
</span><span class='line'>details
</span><span class='line'>fade-in
</span><span class='line'>glow
</span><span class='line'>script
</span><span class='line'>solar
</span><span class='line'>spinfinity
</span><span class='line'>spinner
</span><span class='line'>text
</span><span class='line'>tribar
</span></code></pre></td></tr></table></div></figure>


<p>A mi me gustó &ldquo;tribar&rdquo; y el que viene por defecto también está lindo, pero es
una copia al carbón de MacOS.</p>

<h4>OJO!</h4>

<p>Cada vez que cambies un parámetro ahí, debes correr &ldquo;mkinitcpio -p&rdquo;</p>

<p>Ah! Una cosita, si en algún momento quieres ver lo que está haciendo el kernel
por detrás de plymouth, presiona &ldquo;home&rdquo; mientras butea.</p>

<p>Eso es todo. ¡Reinicia!</p>
</div>


  <footer>
    <p class="meta">
      
  

<span class="byline author vcard">Posted by <span class="fn">låzaro</span></span>

      




<time class='entry-date' datetime='2015-09-10T18:28:48-04:00'><span class='date'><span class='date-month'>Sep</span> <span class='date-day'>10</span><span class='date-suffix'>th</span>, <span class='date-year'>2015</span></span> <span class='time'>6:28 pm</span></time>
      


    </p>
    
      <div class="sharing">
  
  <a href="//twitter.com/share" class="twitter-share-button" data-url="http://uranio-235.github.io/blog/2015/09/10/plymouth-boot-screen/" data-via="lazarumoxyde" data-counturl="http://uranio-235.github.io/blog/2015/09/10/plymouth-boot-screen/" >Tweet</a>
  
  
  <div class="g-plusone" data-size="medium"></div>
  
  
    <div class="fb-like" data-send="true" data-width="450" data-show-faces="false"></div>
  
</div>

    
    <p class="meta">
      
        <a class="basic-alignment left" href="/blog/2015/09/07/git-clone-rapido/" title="Previous Post: git clone rápido">&laquo; git clone rápido</a>
      
      
        <a class="basic-alignment right" href="/blog/2015/09/17/dhcp-por-grupos/" title="Next Post: dhcp por grupos">dhcp por grupos &raquo;</a>
      
    </p>
  </footer>
</article>

</div>

<aside class="sidebar">
  
    <section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2015/10/15/repo-de-fdroid/">repo de fdroid</a>
      </li>
    
      <li class="post">
        <a href="/blog/2015/10/08/prawn-pdf-con-ruby/">prawn, pdf con ruby</a>
      </li>
    
      <li class="post">
        <a href="/blog/2015/10/05/assets-por-controlador/">assets por controlador</a>
      </li>
    
      <li class="post">
        <a href="/blog/2015/09/17/dhcp-por-grupos/">dhcp por grupos</a>
      </li>
    
      <li class="post">
        <a href="/blog/2015/09/10/plymouth-boot-screen/">plymouth boot screen</a>
      </li>
    
      <li class="post">
        <a href="/blog/2015/09/07/git-clone-rapido/">git clone rápido</a>
      </li>
    
      <li class="post">
        <a href="/blog/2015/09/07/archlinux-dos-kernel/">archlinux con dos kernel</a>
      </li>
    
      <li class="post">
        <a href="/blog/2015/09/01/squid-transparente/">squid transparente</a>
      </li>
    
      <li class="post">
        <a href="/blog/2015/08/28/compute-remote-uptime/">compute remote uptime</a>
      </li>
    
      <li class="post">
        <a href="/blog/2015/07/19/will-paginate/">will_paginate</a>
      </li>
    
      <li class="post">
        <a href="/blog/2015/07/12/date-select-en-espanol/">date_select en español</a>
      </li>
    
      <li class="post">
        <a href="/blog/2015/07/11/openvas-en-archlinux/">OpenVAS en Archlinux</a>
      </li>
    
      <li class="post">
        <a href="/blog/2015/07/05/anadir-verbo-a-un-scaffold/">añadir verbo a un scaffold</a>
      </li>
    
      <li class="post">
        <a href="/blog/2015/07/05/asset-pipeline-en-production/">asset pipeline en production</a>
      </li>
    
      <li class="post">
        <a href="/blog/2015/06/30/bootstrap-en-rails-4/">bootstrap en rails 4</a>
      </li>
    
      <li class="post">
        <a href="/blog/2015/06/14/revocar-certificados-de-ovpn/">revocar certificados de OVPN</a>
      </li>
    
      <li class="post">
        <a href="/blog/2015/06/12/systemd-automount/">systemd automount</a>
      </li>
    
      <li class="post">
        <a href="/blog/2015/06/07/openvpn-en-arch/">OpenVPN en Arch</a>
      </li>
    
      <li class="post">
        <a href="/blog/2015/06/03/transando-a-ext4/">transando a ext4</a>
      </li>
    
      <li class="post">
        <a href="/blog/2015/06/01/pacman-bajo-el-microscopio/">pacman bajo el microscopio</a>
      </li>
    
      <li class="post">
        <a href="/blog/2015/05/28/cambiar-user-agent-en-squid/">cambiar user agent con squid</a>
      </li>
    
      <li class="post">
        <a href="/blog/2015/05/26/nic-bonding/">NIC bonding</a>
      </li>
    
      <li class="post">
        <a href="/blog/2015/05/23/ltsp-en-debian8-y-salud/">ltsp en debian8 y salud</a>
      </li>
    
      <li class="post">
        <a href="/blog/2015/02/22/rails-sin-turbolink/">rails sin turbolinks</a>
      </li>
    
      <li class="post">
        <a href="/blog/2015/02/21/sasl-homeclub-only/">SASL homeclub only</a>
      </li>
    
      <li class="post">
        <a href="/blog/2015/02/19/delay-pools-de-squid/">delay pools de squid</a>
      </li>
    
      <li class="post">
        <a href="/blog/2015/02/12/rails-con-mongodb/">rails con mongodb</a>
      </li>
    
      <li class="post">
        <a href="/blog/2015/02/06/zentyal/">Zentyal</a>
      </li>
    
      <li class="post">
        <a href="/blog/2015/02/01/bundle/">bundle</a>
      </li>
    
      <li class="post">
        <a href="/blog/2014/12/02/welcome-aboard/">welcome aboard</a>
      </li>
    
      <li class="post">
        <a href="/blog/2014/10/28/proxy-automatico/">proxy automático</a>
      </li>
    
      <li class="post">
        <a href="/blog/2014/09/24/verdial-y-el-imagis/">la pena de verdial</a>
      </li>
    
      <li class="post">
        <a href="/blog/2014/09/05/palos-de-wordpress/">palos de wordpress</a>
      </li>
    
      <li class="post">
        <a href="/blog/2014/08/25/el-server-de-correo/">el servidor de correo</a>
      </li>
    
      <li class="post">
        <a href="/blog/2014/08/25/mas-de-ocs/">más de OCS</a>
      </li>
    
      <li class="post">
        <a href="/blog/2014/08/15/subdesarrollo/">subdesarrollo</a>
      </li>
    
      <li class="post">
        <a href="/blog/2014/08/11/ocs-inventory/">ocs-inventory</a>
      </li>
    
      <li class="post">
        <a href="/blog/2014/07/08/select-en-bootstrap/">select en bootstrap</a>
      </li>
    
      <li class="post">
        <a href="/blog/2014/07/05/empirico/">empíricos</a>
      </li>
    
      <li class="post">
        <a href="/blog/2014/06/27/crear-un-chroot-con-debian/">crear un chroot con debian</a>
      </li>
    
      <li class="post">
        <a href="/blog/2014/06/10/autenticador-sql-en-el-proxy/">autenticador SQL en el proxy</a>
      </li>
    
      <li class="post">
        <a href="/blog/2014/06/09/postfix-entrando-en-el-baile/">postfix entrando en el baile</a>
      </li>
    
      <li class="post">
        <a href="/blog/2014/06/09/dovecot-entra-en-el-baile/">dovecot entra en el baile</a>
      </li>
    
      <li class="post">
        <a href="/blog/2014/05/02/wordpress-para-todos/">wordpress para todos</a>
      </li>
    
      <li class="post">
        <a href="/blog/2014/04/06/squid-en-infomed/">el toten de proxies</a>
      </li>
    
      <li class="post">
        <a href="/blog/2014/04/04/en-la-cumbre-del-vedado/">el &#8220;calisto&#8221; garcía</a>
      </li>
    
  </ul>
</section>





  
</aside>


    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2015 - låzaro -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  



<div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) {return;}
  js = d.createElement(s); js.id = id; js.async = true;
  js.src = "//connect.facebook.net/en_US/all.js#appId=212934732101925&xfbml=1";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>



  <script type="text/javascript">
    (function() {
      var script = document.createElement('script'); script.type = 'text/javascript'; script.async = true;
      script.src = 'https://apis.google.com/js/plusone.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(script, s);
    })();
  </script>



  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = '//platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
